(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function L0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var np={exports:{}},kl={},rp={exports:{}},ie={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Li=Symbol.for("react.element"),O0=Symbol.for("react.portal"),M0=Symbol.for("react.fragment"),z0=Symbol.for("react.strict_mode"),F0=Symbol.for("react.profiler"),B0=Symbol.for("react.provider"),$0=Symbol.for("react.context"),U0=Symbol.for("react.forward_ref"),G0=Symbol.for("react.suspense"),V0=Symbol.for("react.memo"),H0=Symbol.for("react.lazy"),qd=Symbol.iterator;function Y0(t){return t===null||typeof t!="object"?null:(t=qd&&t[qd]||t["@@iterator"],typeof t=="function"?t:null)}var sp={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ip=Object.assign,op={};function cs(t,e,n){this.props=t,this.context=e,this.refs=op,this.updater=n||sp}cs.prototype.isReactComponent={};cs.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};cs.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function lp(){}lp.prototype=cs.prototype;function nu(t,e,n){this.props=t,this.context=e,this.refs=op,this.updater=n||sp}var ru=nu.prototype=new lp;ru.constructor=nu;ip(ru,cs.prototype);ru.isPureReactComponent=!0;var Jd=Array.isArray,ap=Object.prototype.hasOwnProperty,su={current:null},cp={key:!0,ref:!0,__self:!0,__source:!0};function up(t,e,n){var r,s={},i=null,l=null;if(e!=null)for(r in e.ref!==void 0&&(l=e.ref),e.key!==void 0&&(i=""+e.key),e)ap.call(e,r)&&!cp.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var c=Array(a),u=0;u<a;u++)c[u]=arguments[u+2];s.children=c}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Li,type:t,key:i,ref:l,props:s,_owner:su.current}}function K0(t,e){return{$$typeof:Li,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function iu(t){return typeof t=="object"&&t!==null&&t.$$typeof===Li}function Q0(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Zd=/\/+/g;function ra(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Q0(""+t.key):e.toString(36)}function wo(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(i){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case Li:case O0:l=!0}}if(l)return l=t,s=s(l),t=r===""?"."+ra(l,0):r,Jd(s)?(n="",t!=null&&(n=t.replace(Zd,"$&/")+"/"),wo(s,e,n,"",function(u){return u})):s!=null&&(iu(s)&&(s=K0(s,n+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(Zd,"$&/")+"/")+t)),e.push(s)),1;if(l=0,r=r===""?".":r+":",Jd(t))for(var a=0;a<t.length;a++){i=t[a];var c=r+ra(i,a);l+=wo(i,e,n,c,s)}else if(c=Y0(t),typeof c=="function")for(t=c.call(t),a=0;!(i=t.next()).done;)i=i.value,c=r+ra(i,a++),l+=wo(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function to(t,e,n){if(t==null)return t;var r=[],s=0;return wo(t,r,"","",function(i){return e.call(n,i,s++)}),r}function X0(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var it={current:null},ko={transition:null},q0={ReactCurrentDispatcher:it,ReactCurrentBatchConfig:ko,ReactCurrentOwner:su};function dp(){throw Error("act(...) is not supported in production builds of React.")}ie.Children={map:to,forEach:function(t,e,n){to(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return to(t,function(){e++}),e},toArray:function(t){return to(t,function(e){return e})||[]},only:function(t){if(!iu(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ie.Component=cs;ie.Fragment=M0;ie.Profiler=F0;ie.PureComponent=nu;ie.StrictMode=z0;ie.Suspense=G0;ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=q0;ie.act=dp;ie.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=ip({},t.props),s=t.key,i=t.ref,l=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,l=su.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)ap.call(e,c)&&!cp.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var u=0;u<c;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Li,type:t.type,key:s,ref:i,props:r,_owner:l}};ie.createContext=function(t){return t={$$typeof:$0,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:B0,_context:t},t.Consumer=t};ie.createElement=up;ie.createFactory=function(t){var e=up.bind(null,t);return e.type=t,e};ie.createRef=function(){return{current:null}};ie.forwardRef=function(t){return{$$typeof:U0,render:t}};ie.isValidElement=iu;ie.lazy=function(t){return{$$typeof:H0,_payload:{_status:-1,_result:t},_init:X0}};ie.memo=function(t,e){return{$$typeof:V0,type:t,compare:e===void 0?null:e}};ie.startTransition=function(t){var e=ko.transition;ko.transition={};try{t()}finally{ko.transition=e}};ie.unstable_act=dp;ie.useCallback=function(t,e){return it.current.useCallback(t,e)};ie.useContext=function(t){return it.current.useContext(t)};ie.useDebugValue=function(){};ie.useDeferredValue=function(t){return it.current.useDeferredValue(t)};ie.useEffect=function(t,e){return it.current.useEffect(t,e)};ie.useId=function(){return it.current.useId()};ie.useImperativeHandle=function(t,e,n){return it.current.useImperativeHandle(t,e,n)};ie.useInsertionEffect=function(t,e){return it.current.useInsertionEffect(t,e)};ie.useLayoutEffect=function(t,e){return it.current.useLayoutEffect(t,e)};ie.useMemo=function(t,e){return it.current.useMemo(t,e)};ie.useReducer=function(t,e,n){return it.current.useReducer(t,e,n)};ie.useRef=function(t){return it.current.useRef(t)};ie.useState=function(t){return it.current.useState(t)};ie.useSyncExternalStore=function(t,e,n){return it.current.useSyncExternalStore(t,e,n)};ie.useTransition=function(){return it.current.useTransition()};ie.version="18.3.1";rp.exports=ie;var O=rp.exports;const Ga=L0(O);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J0=O,Z0=Symbol.for("react.element"),ex=Symbol.for("react.fragment"),tx=Object.prototype.hasOwnProperty,nx=J0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,rx={key:!0,ref:!0,__self:!0,__source:!0};function fp(t,e,n){var r,s={},i=null,l=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(l=e.ref);for(r in e)tx.call(e,r)&&!rx.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:Z0,type:t,key:i,ref:l,props:s,_owner:nx.current}}kl.Fragment=ex;kl.jsx=fp;kl.jsxs=fp;np.exports=kl;var o=np.exports,Va={},hp={exports:{}},St={},pp={exports:{}},mp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,X){var J=B.length;B.push(X);e:for(;0<J;){var ke=J-1>>>1,De=B[ke];if(0<s(De,X))B[ke]=X,B[J]=De,J=ke;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var X=B[0],J=B.pop();if(J!==X){B[0]=J;e:for(var ke=0,De=B.length,kr=De>>>1;ke<kr;){var mn=2*(ke+1)-1,gs=B[mn],at=mn+1,yt=B[at];if(0>s(gs,J))at<De&&0>s(yt,gs)?(B[ke]=yt,B[at]=J,ke=at):(B[ke]=gs,B[mn]=J,ke=mn);else if(at<De&&0>s(yt,J))B[ke]=yt,B[at]=J,ke=at;else break e}}return X}function s(B,X){var J=B.sortIndex-X.sortIndex;return J!==0?J:B.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var l=Date,a=l.now();t.unstable_now=function(){return l.now()-a}}var c=[],u=[],p=1,d=null,h=3,_=!1,w=!1,T=!1,E=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(B){for(var X=n(u);X!==null;){if(X.callback===null)r(u);else if(X.startTime<=B)r(u),X.sortIndex=X.expirationTime,e(c,X);else break;X=n(u)}}function m(B){if(T=!1,k(B),!w)if(n(c)!==null)w=!0,H(C);else{var X=n(u);X!==null&&Ae(m,X.startTime-B)}}function C(B,X){w=!1,T&&(T=!1,v(A),A=-1),_=!0;var J=h;try{for(k(X),d=n(c);d!==null&&(!(d.expirationTime>X)||B&&!W());){var ke=d.callback;if(typeof ke=="function"){d.callback=null,h=d.priorityLevel;var De=ke(d.expirationTime<=X);X=t.unstable_now(),typeof De=="function"?d.callback=De:d===n(c)&&r(c),k(X)}else r(c);d=n(c)}if(d!==null)var kr=!0;else{var mn=n(u);mn!==null&&Ae(m,mn.startTime-X),kr=!1}return kr}finally{d=null,h=J,_=!1}}var b=!1,P=null,A=-1,R=5,D=-1;function W(){return!(t.unstable_now()-D<R)}function V(){if(P!==null){var B=t.unstable_now();D=B;var X=!0;try{X=P(!0,B)}finally{X?ee():(b=!1,P=null)}}else b=!1}var ee;if(typeof y=="function")ee=function(){y(V)};else if(typeof MessageChannel<"u"){var Ce=new MessageChannel,lt=Ce.port2;Ce.port1.onmessage=V,ee=function(){lt.postMessage(null)}}else ee=function(){E(V,0)};function H(B){P=B,b||(b=!0,ee())}function Ae(B,X){A=E(function(){B(t.unstable_now())},X)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){w||_||(w=!0,H(C))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(B){switch(h){case 1:case 2:case 3:var X=3;break;default:X=h}var J=h;h=X;try{return B()}finally{h=J}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,X){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var J=h;h=B;try{return X()}finally{h=J}},t.unstable_scheduleCallback=function(B,X,J){var ke=t.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?ke+J:ke):J=ke,B){case 1:var De=-1;break;case 2:De=250;break;case 5:De=1073741823;break;case 4:De=1e4;break;default:De=5e3}return De=J+De,B={id:p++,callback:X,priorityLevel:B,startTime:J,expirationTime:De,sortIndex:-1},J>ke?(B.sortIndex=J,e(u,B),n(c)===null&&B===n(u)&&(T?(v(A),A=-1):T=!0,Ae(m,J-ke))):(B.sortIndex=De,e(c,B),w||_||(w=!0,H(C))),B},t.unstable_shouldYield=W,t.unstable_wrapCallback=function(B){var X=h;return function(){var J=h;h=X;try{return B.apply(this,arguments)}finally{h=J}}}})(mp);pp.exports=mp;var sx=pp.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ix=O,kt=sx;function M(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var gp=new Set,li={};function xr(t,e){Jr(t,e),Jr(t+"Capture",e)}function Jr(t,e){for(li[t]=e,t=0;t<e.length;t++)gp.add(e[t])}var on=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ha=Object.prototype.hasOwnProperty,ox=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ef={},tf={};function lx(t){return Ha.call(tf,t)?!0:Ha.call(ef,t)?!1:ox.test(t)?tf[t]=!0:(ef[t]=!0,!1)}function ax(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function cx(t,e,n,r){if(e===null||typeof e>"u"||ax(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ot(t,e,n,r,s,i,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=l}var Ke={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ke[t]=new ot(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ke[e]=new ot(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ke[t]=new ot(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ke[t]=new ot(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ke[t]=new ot(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ke[t]=new ot(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ke[t]=new ot(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ke[t]=new ot(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ke[t]=new ot(t,5,!1,t.toLowerCase(),null,!1,!1)});var ou=/[\-:]([a-z])/g;function lu(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(ou,lu);Ke[e]=new ot(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(ou,lu);Ke[e]=new ot(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(ou,lu);Ke[e]=new ot(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ke[t]=new ot(t,1,!1,t.toLowerCase(),null,!1,!1)});Ke.xlinkHref=new ot("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ke[t]=new ot(t,1,!1,t.toLowerCase(),null,!0,!0)});function au(t,e,n,r){var s=Ke.hasOwnProperty(e)?Ke[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(cx(e,n,s,r)&&(n=null),r||s===null?lx(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var fn=ix.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,no=Symbol.for("react.element"),Pr=Symbol.for("react.portal"),Ir=Symbol.for("react.fragment"),cu=Symbol.for("react.strict_mode"),Ya=Symbol.for("react.profiler"),yp=Symbol.for("react.provider"),xp=Symbol.for("react.context"),uu=Symbol.for("react.forward_ref"),Ka=Symbol.for("react.suspense"),Qa=Symbol.for("react.suspense_list"),du=Symbol.for("react.memo"),kn=Symbol.for("react.lazy"),vp=Symbol.for("react.offscreen"),nf=Symbol.iterator;function Ts(t){return t===null||typeof t!="object"?null:(t=nf&&t[nf]||t["@@iterator"],typeof t=="function"?t:null)}var Te=Object.assign,sa;function Us(t){if(sa===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);sa=e&&e[1]||""}return`
`+sa+t}var ia=!1;function oa(t,e){if(!t||ia)return"";ia=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),l=s.length-1,a=i.length-1;1<=l&&0<=a&&s[l]!==i[a];)a--;for(;1<=l&&0<=a;l--,a--)if(s[l]!==i[a]){if(l!==1||a!==1)do if(l--,a--,0>a||s[l]!==i[a]){var c=`
`+s[l].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=l&&0<=a);break}}}finally{ia=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Us(t):""}function ux(t){switch(t.tag){case 5:return Us(t.type);case 16:return Us("Lazy");case 13:return Us("Suspense");case 19:return Us("SuspenseList");case 0:case 2:case 15:return t=oa(t.type,!1),t;case 11:return t=oa(t.type.render,!1),t;case 1:return t=oa(t.type,!0),t;default:return""}}function Xa(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ir:return"Fragment";case Pr:return"Portal";case Ya:return"Profiler";case cu:return"StrictMode";case Ka:return"Suspense";case Qa:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case xp:return(t.displayName||"Context")+".Consumer";case yp:return(t._context.displayName||"Context")+".Provider";case uu:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case du:return e=t.displayName||null,e!==null?e:Xa(t.type)||"Memo";case kn:e=t._payload,t=t._init;try{return Xa(t(e))}catch{}}return null}function dx(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Xa(e);case 8:return e===cu?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Fn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function _p(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function fx(t){var e=_p(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(l){r=""+l,i.call(this,l)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(l){r=""+l},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ro(t){t._valueTracker||(t._valueTracker=fx(t))}function wp(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=_p(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Wo(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function qa(t,e){var n=e.checked;return Te({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function rf(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Fn(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function kp(t,e){e=e.checked,e!=null&&au(t,"checked",e,!1)}function Ja(t,e){kp(t,e);var n=Fn(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Za(t,e.type,n):e.hasOwnProperty("defaultValue")&&Za(t,e.type,Fn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function sf(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Za(t,e,n){(e!=="number"||Wo(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Gs=Array.isArray;function Ur(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Fn(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function ec(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(M(91));return Te({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function of(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(M(92));if(Gs(n)){if(1<n.length)throw Error(M(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Fn(n)}}function Sp(t,e){var n=Fn(e.value),r=Fn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function lf(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Cp(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function tc(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Cp(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var so,Ep=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(so=so||document.createElement("div"),so.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=so.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ai(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ys={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},hx=["Webkit","ms","Moz","O"];Object.keys(Ys).forEach(function(t){hx.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ys[e]=Ys[t]})});function bp(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ys.hasOwnProperty(t)&&Ys[t]?(""+e).trim():e+"px"}function Np(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=bp(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var px=Te({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function nc(t,e){if(e){if(px[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(M(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(M(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(M(61))}if(e.style!=null&&typeof e.style!="object")throw Error(M(62))}}function rc(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var sc=null;function fu(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ic=null,Gr=null,Vr=null;function af(t){if(t=zi(t)){if(typeof ic!="function")throw Error(M(280));var e=t.stateNode;e&&(e=Nl(e),ic(t.stateNode,t.type,e))}}function jp(t){Gr?Vr?Vr.push(t):Vr=[t]:Gr=t}function Tp(){if(Gr){var t=Gr,e=Vr;if(Vr=Gr=null,af(t),e)for(t=0;t<e.length;t++)af(e[t])}}function Pp(t,e){return t(e)}function Ip(){}var la=!1;function Rp(t,e,n){if(la)return t(e,n);la=!0;try{return Pp(t,e,n)}finally{la=!1,(Gr!==null||Vr!==null)&&(Ip(),Tp())}}function ci(t,e){var n=t.stateNode;if(n===null)return null;var r=Nl(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(M(231,e,typeof n));return n}var oc=!1;if(on)try{var Ps={};Object.defineProperty(Ps,"passive",{get:function(){oc=!0}}),window.addEventListener("test",Ps,Ps),window.removeEventListener("test",Ps,Ps)}catch{oc=!1}function mx(t,e,n,r,s,i,l,a,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(p){this.onError(p)}}var Ks=!1,Lo=null,Oo=!1,lc=null,gx={onError:function(t){Ks=!0,Lo=t}};function yx(t,e,n,r,s,i,l,a,c){Ks=!1,Lo=null,mx.apply(gx,arguments)}function xx(t,e,n,r,s,i,l,a,c){if(yx.apply(this,arguments),Ks){if(Ks){var u=Lo;Ks=!1,Lo=null}else throw Error(M(198));Oo||(Oo=!0,lc=u)}}function vr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Ap(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function cf(t){if(vr(t)!==t)throw Error(M(188))}function vx(t){var e=t.alternate;if(!e){if(e=vr(t),e===null)throw Error(M(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return cf(s),t;if(i===r)return cf(s),e;i=i.sibling}throw Error(M(188))}if(n.return!==r.return)n=s,r=i;else{for(var l=!1,a=s.child;a;){if(a===n){l=!0,n=s,r=i;break}if(a===r){l=!0,r=s,n=i;break}a=a.sibling}if(!l){for(a=i.child;a;){if(a===n){l=!0,n=i,r=s;break}if(a===r){l=!0,r=i,n=s;break}a=a.sibling}if(!l)throw Error(M(189))}}if(n.alternate!==r)throw Error(M(190))}if(n.tag!==3)throw Error(M(188));return n.stateNode.current===n?t:e}function Dp(t){return t=vx(t),t!==null?Wp(t):null}function Wp(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Wp(t);if(e!==null)return e;t=t.sibling}return null}var Lp=kt.unstable_scheduleCallback,uf=kt.unstable_cancelCallback,_x=kt.unstable_shouldYield,wx=kt.unstable_requestPaint,Re=kt.unstable_now,kx=kt.unstable_getCurrentPriorityLevel,hu=kt.unstable_ImmediatePriority,Op=kt.unstable_UserBlockingPriority,Mo=kt.unstable_NormalPriority,Sx=kt.unstable_LowPriority,Mp=kt.unstable_IdlePriority,Sl=null,Qt=null;function Cx(t){if(Qt&&typeof Qt.onCommitFiberRoot=="function")try{Qt.onCommitFiberRoot(Sl,t,void 0,(t.current.flags&128)===128)}catch{}}var Ft=Math.clz32?Math.clz32:Nx,Ex=Math.log,bx=Math.LN2;function Nx(t){return t>>>=0,t===0?32:31-(Ex(t)/bx|0)|0}var io=64,oo=4194304;function Vs(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function zo(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,l=n&268435455;if(l!==0){var a=l&~s;a!==0?r=Vs(a):(i&=l,i!==0&&(r=Vs(i)))}else l=n&~s,l!==0?r=Vs(l):i!==0&&(r=Vs(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Ft(e),s=1<<n,r|=t[n],e&=~s;return r}function jx(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Tx(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var l=31-Ft(i),a=1<<l,c=s[l];c===-1?(!(a&n)||a&r)&&(s[l]=jx(a,e)):c<=e&&(t.expiredLanes|=a),i&=~a}}function ac(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function zp(){var t=io;return io<<=1,!(io&4194240)&&(io=64),t}function aa(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Oi(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ft(e),t[e]=n}function Px(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Ft(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function pu(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Ft(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var de=0;function Fp(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Bp,mu,$p,Up,Gp,cc=!1,lo=[],jn=null,Tn=null,Pn=null,ui=new Map,di=new Map,Cn=[],Ix="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function df(t,e){switch(t){case"focusin":case"focusout":jn=null;break;case"dragenter":case"dragleave":Tn=null;break;case"mouseover":case"mouseout":Pn=null;break;case"pointerover":case"pointerout":ui.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":di.delete(e.pointerId)}}function Is(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=zi(e),e!==null&&mu(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function Rx(t,e,n,r,s){switch(e){case"focusin":return jn=Is(jn,t,e,n,r,s),!0;case"dragenter":return Tn=Is(Tn,t,e,n,r,s),!0;case"mouseover":return Pn=Is(Pn,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return ui.set(i,Is(ui.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,di.set(i,Is(di.get(i)||null,t,e,n,r,s)),!0}return!1}function Vp(t){var e=tr(t.target);if(e!==null){var n=vr(e);if(n!==null){if(e=n.tag,e===13){if(e=Ap(n),e!==null){t.blockedOn=e,Gp(t.priority,function(){$p(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function So(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=uc(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);sc=r,n.target.dispatchEvent(r),sc=null}else return e=zi(n),e!==null&&mu(e),t.blockedOn=n,!1;e.shift()}return!0}function ff(t,e,n){So(t)&&n.delete(e)}function Ax(){cc=!1,jn!==null&&So(jn)&&(jn=null),Tn!==null&&So(Tn)&&(Tn=null),Pn!==null&&So(Pn)&&(Pn=null),ui.forEach(ff),di.forEach(ff)}function Rs(t,e){t.blockedOn===e&&(t.blockedOn=null,cc||(cc=!0,kt.unstable_scheduleCallback(kt.unstable_NormalPriority,Ax)))}function fi(t){function e(s){return Rs(s,t)}if(0<lo.length){Rs(lo[0],t);for(var n=1;n<lo.length;n++){var r=lo[n];r.blockedOn===t&&(r.blockedOn=null)}}for(jn!==null&&Rs(jn,t),Tn!==null&&Rs(Tn,t),Pn!==null&&Rs(Pn,t),ui.forEach(e),di.forEach(e),n=0;n<Cn.length;n++)r=Cn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Cn.length&&(n=Cn[0],n.blockedOn===null);)Vp(n),n.blockedOn===null&&Cn.shift()}var Hr=fn.ReactCurrentBatchConfig,Fo=!0;function Dx(t,e,n,r){var s=de,i=Hr.transition;Hr.transition=null;try{de=1,gu(t,e,n,r)}finally{de=s,Hr.transition=i}}function Wx(t,e,n,r){var s=de,i=Hr.transition;Hr.transition=null;try{de=4,gu(t,e,n,r)}finally{de=s,Hr.transition=i}}function gu(t,e,n,r){if(Fo){var s=uc(t,e,n,r);if(s===null)xa(t,e,r,Bo,n),df(t,r);else if(Rx(s,t,e,n,r))r.stopPropagation();else if(df(t,r),e&4&&-1<Ix.indexOf(t)){for(;s!==null;){var i=zi(s);if(i!==null&&Bp(i),i=uc(t,e,n,r),i===null&&xa(t,e,r,Bo,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else xa(t,e,r,null,n)}}var Bo=null;function uc(t,e,n,r){if(Bo=null,t=fu(r),t=tr(t),t!==null)if(e=vr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Ap(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Bo=t,null}function Hp(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(kx()){case hu:return 1;case Op:return 4;case Mo:case Sx:return 16;case Mp:return 536870912;default:return 16}default:return 16}}var bn=null,yu=null,Co=null;function Yp(){if(Co)return Co;var t,e=yu,n=e.length,r,s="value"in bn?bn.value:bn.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var l=n-t;for(r=1;r<=l&&e[n-r]===s[i-r];r++);return Co=s.slice(t,1<r?1-r:void 0)}function Eo(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ao(){return!0}function hf(){return!1}function Ct(t){function e(n,r,s,i,l){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=l,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ao:hf,this.isPropagationStopped=hf,this}return Te(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ao)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ao)},persist:function(){},isPersistent:ao}),e}var us={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xu=Ct(us),Mi=Te({},us,{view:0,detail:0}),Lx=Ct(Mi),ca,ua,As,Cl=Te({},Mi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vu,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==As&&(As&&t.type==="mousemove"?(ca=t.screenX-As.screenX,ua=t.screenY-As.screenY):ua=ca=0,As=t),ca)},movementY:function(t){return"movementY"in t?t.movementY:ua}}),pf=Ct(Cl),Ox=Te({},Cl,{dataTransfer:0}),Mx=Ct(Ox),zx=Te({},Mi,{relatedTarget:0}),da=Ct(zx),Fx=Te({},us,{animationName:0,elapsedTime:0,pseudoElement:0}),Bx=Ct(Fx),$x=Te({},us,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ux=Ct($x),Gx=Te({},us,{data:0}),mf=Ct(Gx),Vx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Hx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Yx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Kx(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Yx[t])?!!e[t]:!1}function vu(){return Kx}var Qx=Te({},Mi,{key:function(t){if(t.key){var e=Vx[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Eo(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Hx[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vu,charCode:function(t){return t.type==="keypress"?Eo(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Eo(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Xx=Ct(Qx),qx=Te({},Cl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gf=Ct(qx),Jx=Te({},Mi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vu}),Zx=Ct(Jx),ev=Te({},us,{propertyName:0,elapsedTime:0,pseudoElement:0}),tv=Ct(ev),nv=Te({},Cl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),rv=Ct(nv),sv=[9,13,27,32],_u=on&&"CompositionEvent"in window,Qs=null;on&&"documentMode"in document&&(Qs=document.documentMode);var iv=on&&"TextEvent"in window&&!Qs,Kp=on&&(!_u||Qs&&8<Qs&&11>=Qs),yf=" ",xf=!1;function Qp(t,e){switch(t){case"keyup":return sv.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Xp(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Rr=!1;function ov(t,e){switch(t){case"compositionend":return Xp(e);case"keypress":return e.which!==32?null:(xf=!0,yf);case"textInput":return t=e.data,t===yf&&xf?null:t;default:return null}}function lv(t,e){if(Rr)return t==="compositionend"||!_u&&Qp(t,e)?(t=Yp(),Co=yu=bn=null,Rr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Kp&&e.locale!=="ko"?null:e.data;default:return null}}var av={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!av[t.type]:e==="textarea"}function qp(t,e,n,r){jp(r),e=$o(e,"onChange"),0<e.length&&(n=new xu("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Xs=null,hi=null;function cv(t){am(t,0)}function El(t){var e=Wr(t);if(wp(e))return t}function uv(t,e){if(t==="change")return e}var Jp=!1;if(on){var fa;if(on){var ha="oninput"in document;if(!ha){var _f=document.createElement("div");_f.setAttribute("oninput","return;"),ha=typeof _f.oninput=="function"}fa=ha}else fa=!1;Jp=fa&&(!document.documentMode||9<document.documentMode)}function wf(){Xs&&(Xs.detachEvent("onpropertychange",Zp),hi=Xs=null)}function Zp(t){if(t.propertyName==="value"&&El(hi)){var e=[];qp(e,hi,t,fu(t)),Rp(cv,e)}}function dv(t,e,n){t==="focusin"?(wf(),Xs=e,hi=n,Xs.attachEvent("onpropertychange",Zp)):t==="focusout"&&wf()}function fv(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return El(hi)}function hv(t,e){if(t==="click")return El(e)}function pv(t,e){if(t==="input"||t==="change")return El(e)}function mv(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ut=typeof Object.is=="function"?Object.is:mv;function pi(t,e){if(Ut(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Ha.call(e,s)||!Ut(t[s],e[s]))return!1}return!0}function kf(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Sf(t,e){var n=kf(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=kf(n)}}function em(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?em(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function tm(){for(var t=window,e=Wo();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Wo(t.document)}return e}function wu(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function gv(t){var e=tm(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&em(n.ownerDocument.documentElement,n)){if(r!==null&&wu(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Sf(n,i);var l=Sf(n,r);s&&l&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(l.node,l.offset)):(e.setEnd(l.node,l.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var yv=on&&"documentMode"in document&&11>=document.documentMode,Ar=null,dc=null,qs=null,fc=!1;function Cf(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;fc||Ar==null||Ar!==Wo(r)||(r=Ar,"selectionStart"in r&&wu(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),qs&&pi(qs,r)||(qs=r,r=$o(dc,"onSelect"),0<r.length&&(e=new xu("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ar)))}function co(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Dr={animationend:co("Animation","AnimationEnd"),animationiteration:co("Animation","AnimationIteration"),animationstart:co("Animation","AnimationStart"),transitionend:co("Transition","TransitionEnd")},pa={},nm={};on&&(nm=document.createElement("div").style,"AnimationEvent"in window||(delete Dr.animationend.animation,delete Dr.animationiteration.animation,delete Dr.animationstart.animation),"TransitionEvent"in window||delete Dr.transitionend.transition);function bl(t){if(pa[t])return pa[t];if(!Dr[t])return t;var e=Dr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in nm)return pa[t]=e[n];return t}var rm=bl("animationend"),sm=bl("animationiteration"),im=bl("animationstart"),om=bl("transitionend"),lm=new Map,Ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Hn(t,e){lm.set(t,e),xr(e,[t])}for(var ma=0;ma<Ef.length;ma++){var ga=Ef[ma],xv=ga.toLowerCase(),vv=ga[0].toUpperCase()+ga.slice(1);Hn(xv,"on"+vv)}Hn(rm,"onAnimationEnd");Hn(sm,"onAnimationIteration");Hn(im,"onAnimationStart");Hn("dblclick","onDoubleClick");Hn("focusin","onFocus");Hn("focusout","onBlur");Hn(om,"onTransitionEnd");Jr("onMouseEnter",["mouseout","mouseover"]);Jr("onMouseLeave",["mouseout","mouseover"]);Jr("onPointerEnter",["pointerout","pointerover"]);Jr("onPointerLeave",["pointerout","pointerover"]);xr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));xr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));xr("onBeforeInput",["compositionend","keypress","textInput","paste"]);xr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));xr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));xr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_v=new Set("cancel close invalid load scroll toggle".split(" ").concat(Hs));function bf(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,xx(r,e,void 0,t),t.currentTarget=null}function am(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var l=r.length-1;0<=l;l--){var a=r[l],c=a.instance,u=a.currentTarget;if(a=a.listener,c!==i&&s.isPropagationStopped())break e;bf(s,a,u),i=c}else for(l=0;l<r.length;l++){if(a=r[l],c=a.instance,u=a.currentTarget,a=a.listener,c!==i&&s.isPropagationStopped())break e;bf(s,a,u),i=c}}}if(Oo)throw t=lc,Oo=!1,lc=null,t}function xe(t,e){var n=e[yc];n===void 0&&(n=e[yc]=new Set);var r=t+"__bubble";n.has(r)||(cm(e,t,2,!1),n.add(r))}function ya(t,e,n){var r=0;e&&(r|=4),cm(n,t,r,e)}var uo="_reactListening"+Math.random().toString(36).slice(2);function mi(t){if(!t[uo]){t[uo]=!0,gp.forEach(function(n){n!=="selectionchange"&&(_v.has(n)||ya(n,!1,t),ya(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[uo]||(e[uo]=!0,ya("selectionchange",!1,e))}}function cm(t,e,n,r){switch(Hp(e)){case 1:var s=Dx;break;case 4:s=Wx;break;default:s=gu}n=s.bind(null,e,n,t),s=void 0,!oc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function xa(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var l=r.tag;if(l===3||l===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(l===4)for(l=r.return;l!==null;){var c=l.tag;if((c===3||c===4)&&(c=l.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;l=l.return}for(;a!==null;){if(l=tr(a),l===null)return;if(c=l.tag,c===5||c===6){r=i=l;continue e}a=a.parentNode}}r=r.return}Rp(function(){var u=i,p=fu(n),d=[];e:{var h=lm.get(t);if(h!==void 0){var _=xu,w=t;switch(t){case"keypress":if(Eo(n)===0)break e;case"keydown":case"keyup":_=Xx;break;case"focusin":w="focus",_=da;break;case"focusout":w="blur",_=da;break;case"beforeblur":case"afterblur":_=da;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=pf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=Mx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=Zx;break;case rm:case sm:case im:_=Bx;break;case om:_=tv;break;case"scroll":_=Lx;break;case"wheel":_=rv;break;case"copy":case"cut":case"paste":_=Ux;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=gf}var T=(e&4)!==0,E=!T&&t==="scroll",v=T?h!==null?h+"Capture":null:h;T=[];for(var y=u,k;y!==null;){k=y;var m=k.stateNode;if(k.tag===5&&m!==null&&(k=m,v!==null&&(m=ci(y,v),m!=null&&T.push(gi(y,m,k)))),E)break;y=y.return}0<T.length&&(h=new _(h,w,null,n,p),d.push({event:h,listeners:T}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",_=t==="mouseout"||t==="pointerout",h&&n!==sc&&(w=n.relatedTarget||n.fromElement)&&(tr(w)||w[ln]))break e;if((_||h)&&(h=p.window===p?p:(h=p.ownerDocument)?h.defaultView||h.parentWindow:window,_?(w=n.relatedTarget||n.toElement,_=u,w=w?tr(w):null,w!==null&&(E=vr(w),w!==E||w.tag!==5&&w.tag!==6)&&(w=null)):(_=null,w=u),_!==w)){if(T=pf,m="onMouseLeave",v="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(T=gf,m="onPointerLeave",v="onPointerEnter",y="pointer"),E=_==null?h:Wr(_),k=w==null?h:Wr(w),h=new T(m,y+"leave",_,n,p),h.target=E,h.relatedTarget=k,m=null,tr(p)===u&&(T=new T(v,y+"enter",w,n,p),T.target=k,T.relatedTarget=E,m=T),E=m,_&&w)t:{for(T=_,v=w,y=0,k=T;k;k=jr(k))y++;for(k=0,m=v;m;m=jr(m))k++;for(;0<y-k;)T=jr(T),y--;for(;0<k-y;)v=jr(v),k--;for(;y--;){if(T===v||v!==null&&T===v.alternate)break t;T=jr(T),v=jr(v)}T=null}else T=null;_!==null&&Nf(d,h,_,T,!1),w!==null&&E!==null&&Nf(d,E,w,T,!0)}}e:{if(h=u?Wr(u):window,_=h.nodeName&&h.nodeName.toLowerCase(),_==="select"||_==="input"&&h.type==="file")var C=uv;else if(vf(h))if(Jp)C=pv;else{C=fv;var b=dv}else(_=h.nodeName)&&_.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(C=hv);if(C&&(C=C(t,u))){qp(d,C,n,p);break e}b&&b(t,h,u),t==="focusout"&&(b=h._wrapperState)&&b.controlled&&h.type==="number"&&Za(h,"number",h.value)}switch(b=u?Wr(u):window,t){case"focusin":(vf(b)||b.contentEditable==="true")&&(Ar=b,dc=u,qs=null);break;case"focusout":qs=dc=Ar=null;break;case"mousedown":fc=!0;break;case"contextmenu":case"mouseup":case"dragend":fc=!1,Cf(d,n,p);break;case"selectionchange":if(yv)break;case"keydown":case"keyup":Cf(d,n,p)}var P;if(_u)e:{switch(t){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else Rr?Qp(t,n)&&(A="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(A="onCompositionStart");A&&(Kp&&n.locale!=="ko"&&(Rr||A!=="onCompositionStart"?A==="onCompositionEnd"&&Rr&&(P=Yp()):(bn=p,yu="value"in bn?bn.value:bn.textContent,Rr=!0)),b=$o(u,A),0<b.length&&(A=new mf(A,t,null,n,p),d.push({event:A,listeners:b}),P?A.data=P:(P=Xp(n),P!==null&&(A.data=P)))),(P=iv?ov(t,n):lv(t,n))&&(u=$o(u,"onBeforeInput"),0<u.length&&(p=new mf("onBeforeInput","beforeinput",null,n,p),d.push({event:p,listeners:u}),p.data=P))}am(d,e)})}function gi(t,e,n){return{instance:t,listener:e,currentTarget:n}}function $o(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=ci(t,n),i!=null&&r.unshift(gi(t,i,s)),i=ci(t,e),i!=null&&r.push(gi(t,i,s))),t=t.return}return r}function jr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Nf(t,e,n,r,s){for(var i=e._reactName,l=[];n!==null&&n!==r;){var a=n,c=a.alternate,u=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&u!==null&&(a=u,s?(c=ci(n,i),c!=null&&l.unshift(gi(n,c,a))):s||(c=ci(n,i),c!=null&&l.push(gi(n,c,a)))),n=n.return}l.length!==0&&t.push({event:e,listeners:l})}var wv=/\r\n?/g,kv=/\u0000|\uFFFD/g;function jf(t){return(typeof t=="string"?t:""+t).replace(wv,`
`).replace(kv,"")}function fo(t,e,n){if(e=jf(e),jf(t)!==e&&n)throw Error(M(425))}function Uo(){}var hc=null,pc=null;function mc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var gc=typeof setTimeout=="function"?setTimeout:void 0,Sv=typeof clearTimeout=="function"?clearTimeout:void 0,Tf=typeof Promise=="function"?Promise:void 0,Cv=typeof queueMicrotask=="function"?queueMicrotask:typeof Tf<"u"?function(t){return Tf.resolve(null).then(t).catch(Ev)}:gc;function Ev(t){setTimeout(function(){throw t})}function va(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),fi(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);fi(e)}function In(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Pf(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ds=Math.random().toString(36).slice(2),Kt="__reactFiber$"+ds,yi="__reactProps$"+ds,ln="__reactContainer$"+ds,yc="__reactEvents$"+ds,bv="__reactListeners$"+ds,Nv="__reactHandles$"+ds;function tr(t){var e=t[Kt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ln]||n[Kt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Pf(t);t!==null;){if(n=t[Kt])return n;t=Pf(t)}return e}t=n,n=t.parentNode}return null}function zi(t){return t=t[Kt]||t[ln],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Wr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(M(33))}function Nl(t){return t[yi]||null}var xc=[],Lr=-1;function Yn(t){return{current:t}}function we(t){0>Lr||(t.current=xc[Lr],xc[Lr]=null,Lr--)}function ye(t,e){Lr++,xc[Lr]=t.current,t.current=e}var Bn={},et=Yn(Bn),ft=Yn(!1),ar=Bn;function Zr(t,e){var n=t.type.contextTypes;if(!n)return Bn;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function ht(t){return t=t.childContextTypes,t!=null}function Go(){we(ft),we(et)}function If(t,e,n){if(et.current!==Bn)throw Error(M(168));ye(et,e),ye(ft,n)}function um(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(M(108,dx(t)||"Unknown",s));return Te({},n,r)}function Vo(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Bn,ar=et.current,ye(et,t),ye(ft,ft.current),!0}function Rf(t,e,n){var r=t.stateNode;if(!r)throw Error(M(169));n?(t=um(t,e,ar),r.__reactInternalMemoizedMergedChildContext=t,we(ft),we(et),ye(et,t)):we(ft),ye(ft,n)}var Zt=null,jl=!1,_a=!1;function dm(t){Zt===null?Zt=[t]:Zt.push(t)}function jv(t){jl=!0,dm(t)}function Kn(){if(!_a&&Zt!==null){_a=!0;var t=0,e=de;try{var n=Zt;for(de=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Zt=null,jl=!1}catch(s){throw Zt!==null&&(Zt=Zt.slice(t+1)),Lp(hu,Kn),s}finally{de=e,_a=!1}}return null}var Or=[],Mr=0,Ho=null,Yo=0,bt=[],Nt=0,cr=null,en=1,tn="";function qn(t,e){Or[Mr++]=Yo,Or[Mr++]=Ho,Ho=t,Yo=e}function fm(t,e,n){bt[Nt++]=en,bt[Nt++]=tn,bt[Nt++]=cr,cr=t;var r=en;t=tn;var s=32-Ft(r)-1;r&=~(1<<s),n+=1;var i=32-Ft(e)+s;if(30<i){var l=s-s%5;i=(r&(1<<l)-1).toString(32),r>>=l,s-=l,en=1<<32-Ft(e)+s|n<<s|r,tn=i+t}else en=1<<i|n<<s|r,tn=t}function ku(t){t.return!==null&&(qn(t,1),fm(t,1,0))}function Su(t){for(;t===Ho;)Ho=Or[--Mr],Or[Mr]=null,Yo=Or[--Mr],Or[Mr]=null;for(;t===cr;)cr=bt[--Nt],bt[Nt]=null,tn=bt[--Nt],bt[Nt]=null,en=bt[--Nt],bt[Nt]=null}var wt=null,_t=null,Se=!1,Lt=null;function hm(t,e){var n=jt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Af(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,wt=t,_t=In(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,wt=t,_t=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=cr!==null?{id:en,overflow:tn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=jt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,wt=t,_t=null,!0):!1;default:return!1}}function vc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function _c(t){if(Se){var e=_t;if(e){var n=e;if(!Af(t,e)){if(vc(t))throw Error(M(418));e=In(n.nextSibling);var r=wt;e&&Af(t,e)?hm(r,n):(t.flags=t.flags&-4097|2,Se=!1,wt=t)}}else{if(vc(t))throw Error(M(418));t.flags=t.flags&-4097|2,Se=!1,wt=t}}}function Df(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;wt=t}function ho(t){if(t!==wt)return!1;if(!Se)return Df(t),Se=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!mc(t.type,t.memoizedProps)),e&&(e=_t)){if(vc(t))throw pm(),Error(M(418));for(;e;)hm(t,e),e=In(e.nextSibling)}if(Df(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(M(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){_t=In(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}_t=null}}else _t=wt?In(t.stateNode.nextSibling):null;return!0}function pm(){for(var t=_t;t;)t=In(t.nextSibling)}function es(){_t=wt=null,Se=!1}function Cu(t){Lt===null?Lt=[t]:Lt.push(t)}var Tv=fn.ReactCurrentBatchConfig;function Ds(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(M(309));var r=n.stateNode}if(!r)throw Error(M(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(l){var a=s.refs;l===null?delete a[i]:a[i]=l},e._stringRef=i,e)}if(typeof t!="string")throw Error(M(284));if(!n._owner)throw Error(M(290,t))}return t}function po(t,e){throw t=Object.prototype.toString.call(e),Error(M(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Wf(t){var e=t._init;return e(t._payload)}function mm(t){function e(v,y){if(t){var k=v.deletions;k===null?(v.deletions=[y],v.flags|=16):k.push(y)}}function n(v,y){if(!t)return null;for(;y!==null;)e(v,y),y=y.sibling;return null}function r(v,y){for(v=new Map;y!==null;)y.key!==null?v.set(y.key,y):v.set(y.index,y),y=y.sibling;return v}function s(v,y){return v=Wn(v,y),v.index=0,v.sibling=null,v}function i(v,y,k){return v.index=k,t?(k=v.alternate,k!==null?(k=k.index,k<y?(v.flags|=2,y):k):(v.flags|=2,y)):(v.flags|=1048576,y)}function l(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,y,k,m){return y===null||y.tag!==6?(y=Na(k,v.mode,m),y.return=v,y):(y=s(y,k),y.return=v,y)}function c(v,y,k,m){var C=k.type;return C===Ir?p(v,y,k.props.children,m,k.key):y!==null&&(y.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===kn&&Wf(C)===y.type)?(m=s(y,k.props),m.ref=Ds(v,y,k),m.return=v,m):(m=Ro(k.type,k.key,k.props,null,v.mode,m),m.ref=Ds(v,y,k),m.return=v,m)}function u(v,y,k,m){return y===null||y.tag!==4||y.stateNode.containerInfo!==k.containerInfo||y.stateNode.implementation!==k.implementation?(y=ja(k,v.mode,m),y.return=v,y):(y=s(y,k.children||[]),y.return=v,y)}function p(v,y,k,m,C){return y===null||y.tag!==7?(y=lr(k,v.mode,m,C),y.return=v,y):(y=s(y,k),y.return=v,y)}function d(v,y,k){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Na(""+y,v.mode,k),y.return=v,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case no:return k=Ro(y.type,y.key,y.props,null,v.mode,k),k.ref=Ds(v,null,y),k.return=v,k;case Pr:return y=ja(y,v.mode,k),y.return=v,y;case kn:var m=y._init;return d(v,m(y._payload),k)}if(Gs(y)||Ts(y))return y=lr(y,v.mode,k,null),y.return=v,y;po(v,y)}return null}function h(v,y,k,m){var C=y!==null?y.key:null;if(typeof k=="string"&&k!==""||typeof k=="number")return C!==null?null:a(v,y,""+k,m);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case no:return k.key===C?c(v,y,k,m):null;case Pr:return k.key===C?u(v,y,k,m):null;case kn:return C=k._init,h(v,y,C(k._payload),m)}if(Gs(k)||Ts(k))return C!==null?null:p(v,y,k,m,null);po(v,k)}return null}function _(v,y,k,m,C){if(typeof m=="string"&&m!==""||typeof m=="number")return v=v.get(k)||null,a(y,v,""+m,C);if(typeof m=="object"&&m!==null){switch(m.$$typeof){case no:return v=v.get(m.key===null?k:m.key)||null,c(y,v,m,C);case Pr:return v=v.get(m.key===null?k:m.key)||null,u(y,v,m,C);case kn:var b=m._init;return _(v,y,k,b(m._payload),C)}if(Gs(m)||Ts(m))return v=v.get(k)||null,p(y,v,m,C,null);po(y,m)}return null}function w(v,y,k,m){for(var C=null,b=null,P=y,A=y=0,R=null;P!==null&&A<k.length;A++){P.index>A?(R=P,P=null):R=P.sibling;var D=h(v,P,k[A],m);if(D===null){P===null&&(P=R);break}t&&P&&D.alternate===null&&e(v,P),y=i(D,y,A),b===null?C=D:b.sibling=D,b=D,P=R}if(A===k.length)return n(v,P),Se&&qn(v,A),C;if(P===null){for(;A<k.length;A++)P=d(v,k[A],m),P!==null&&(y=i(P,y,A),b===null?C=P:b.sibling=P,b=P);return Se&&qn(v,A),C}for(P=r(v,P);A<k.length;A++)R=_(P,v,A,k[A],m),R!==null&&(t&&R.alternate!==null&&P.delete(R.key===null?A:R.key),y=i(R,y,A),b===null?C=R:b.sibling=R,b=R);return t&&P.forEach(function(W){return e(v,W)}),Se&&qn(v,A),C}function T(v,y,k,m){var C=Ts(k);if(typeof C!="function")throw Error(M(150));if(k=C.call(k),k==null)throw Error(M(151));for(var b=C=null,P=y,A=y=0,R=null,D=k.next();P!==null&&!D.done;A++,D=k.next()){P.index>A?(R=P,P=null):R=P.sibling;var W=h(v,P,D.value,m);if(W===null){P===null&&(P=R);break}t&&P&&W.alternate===null&&e(v,P),y=i(W,y,A),b===null?C=W:b.sibling=W,b=W,P=R}if(D.done)return n(v,P),Se&&qn(v,A),C;if(P===null){for(;!D.done;A++,D=k.next())D=d(v,D.value,m),D!==null&&(y=i(D,y,A),b===null?C=D:b.sibling=D,b=D);return Se&&qn(v,A),C}for(P=r(v,P);!D.done;A++,D=k.next())D=_(P,v,A,D.value,m),D!==null&&(t&&D.alternate!==null&&P.delete(D.key===null?A:D.key),y=i(D,y,A),b===null?C=D:b.sibling=D,b=D);return t&&P.forEach(function(V){return e(v,V)}),Se&&qn(v,A),C}function E(v,y,k,m){if(typeof k=="object"&&k!==null&&k.type===Ir&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case no:e:{for(var C=k.key,b=y;b!==null;){if(b.key===C){if(C=k.type,C===Ir){if(b.tag===7){n(v,b.sibling),y=s(b,k.props.children),y.return=v,v=y;break e}}else if(b.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===kn&&Wf(C)===b.type){n(v,b.sibling),y=s(b,k.props),y.ref=Ds(v,b,k),y.return=v,v=y;break e}n(v,b);break}else e(v,b);b=b.sibling}k.type===Ir?(y=lr(k.props.children,v.mode,m,k.key),y.return=v,v=y):(m=Ro(k.type,k.key,k.props,null,v.mode,m),m.ref=Ds(v,y,k),m.return=v,v=m)}return l(v);case Pr:e:{for(b=k.key;y!==null;){if(y.key===b)if(y.tag===4&&y.stateNode.containerInfo===k.containerInfo&&y.stateNode.implementation===k.implementation){n(v,y.sibling),y=s(y,k.children||[]),y.return=v,v=y;break e}else{n(v,y);break}else e(v,y);y=y.sibling}y=ja(k,v.mode,m),y.return=v,v=y}return l(v);case kn:return b=k._init,E(v,y,b(k._payload),m)}if(Gs(k))return w(v,y,k,m);if(Ts(k))return T(v,y,k,m);po(v,k)}return typeof k=="string"&&k!==""||typeof k=="number"?(k=""+k,y!==null&&y.tag===6?(n(v,y.sibling),y=s(y,k),y.return=v,v=y):(n(v,y),y=Na(k,v.mode,m),y.return=v,v=y),l(v)):n(v,y)}return E}var ts=mm(!0),gm=mm(!1),Ko=Yn(null),Qo=null,zr=null,Eu=null;function bu(){Eu=zr=Qo=null}function Nu(t){var e=Ko.current;we(Ko),t._currentValue=e}function wc(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Yr(t,e){Qo=t,Eu=zr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ut=!0),t.firstContext=null)}function Pt(t){var e=t._currentValue;if(Eu!==t)if(t={context:t,memoizedValue:e,next:null},zr===null){if(Qo===null)throw Error(M(308));zr=t,Qo.dependencies={lanes:0,firstContext:t}}else zr=zr.next=t;return e}var nr=null;function ju(t){nr===null?nr=[t]:nr.push(t)}function ym(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,ju(e)):(n.next=s.next,s.next=n),e.interleaved=n,an(t,r)}function an(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Sn=!1;function Tu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function xm(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function rn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Rn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,le&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,an(t,n)}return s=r.interleaved,s===null?(e.next=e,ju(r)):(e.next=s.next,s.next=e),r.interleaved=e,an(t,n)}function bo(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,pu(t,n)}}function Lf(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=l:i=i.next=l,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Xo(t,e,n,r){var s=t.updateQueue;Sn=!1;var i=s.firstBaseUpdate,l=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var c=a,u=c.next;c.next=null,l===null?i=u:l.next=u,l=c;var p=t.alternate;p!==null&&(p=p.updateQueue,a=p.lastBaseUpdate,a!==l&&(a===null?p.firstBaseUpdate=u:a.next=u,p.lastBaseUpdate=c))}if(i!==null){var d=s.baseState;l=0,p=u=c=null,a=i;do{var h=a.lane,_=a.eventTime;if((r&h)===h){p!==null&&(p=p.next={eventTime:_,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var w=t,T=a;switch(h=e,_=n,T.tag){case 1:if(w=T.payload,typeof w=="function"){d=w.call(_,d,h);break e}d=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=T.payload,h=typeof w=="function"?w.call(_,d,h):w,h==null)break e;d=Te({},d,h);break e;case 2:Sn=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=s.effects,h===null?s.effects=[a]:h.push(a))}else _={eventTime:_,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},p===null?(u=p=_,c=d):p=p.next=_,l|=h;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;h=a,a=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(p===null&&(c=d),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=p,e=s.shared.interleaved,e!==null){s=e;do l|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);dr|=l,t.lanes=l,t.memoizedState=d}}function Of(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(M(191,s));s.call(r)}}}var Fi={},Xt=Yn(Fi),xi=Yn(Fi),vi=Yn(Fi);function rr(t){if(t===Fi)throw Error(M(174));return t}function Pu(t,e){switch(ye(vi,e),ye(xi,t),ye(Xt,Fi),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:tc(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=tc(e,t)}we(Xt),ye(Xt,e)}function ns(){we(Xt),we(xi),we(vi)}function vm(t){rr(vi.current);var e=rr(Xt.current),n=tc(e,t.type);e!==n&&(ye(xi,t),ye(Xt,n))}function Iu(t){xi.current===t&&(we(Xt),we(xi))}var Ne=Yn(0);function qo(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var wa=[];function Ru(){for(var t=0;t<wa.length;t++)wa[t]._workInProgressVersionPrimary=null;wa.length=0}var No=fn.ReactCurrentDispatcher,ka=fn.ReactCurrentBatchConfig,ur=0,je=null,Le=null,$e=null,Jo=!1,Js=!1,_i=0,Pv=0;function Xe(){throw Error(M(321))}function Au(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ut(t[n],e[n]))return!1;return!0}function Du(t,e,n,r,s,i){if(ur=i,je=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,No.current=t===null||t.memoizedState===null?Dv:Wv,t=n(r,s),Js){i=0;do{if(Js=!1,_i=0,25<=i)throw Error(M(301));i+=1,$e=Le=null,e.updateQueue=null,No.current=Lv,t=n(r,s)}while(Js)}if(No.current=Zo,e=Le!==null&&Le.next!==null,ur=0,$e=Le=je=null,Jo=!1,e)throw Error(M(300));return t}function Wu(){var t=_i!==0;return _i=0,t}function Yt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $e===null?je.memoizedState=$e=t:$e=$e.next=t,$e}function It(){if(Le===null){var t=je.alternate;t=t!==null?t.memoizedState:null}else t=Le.next;var e=$e===null?je.memoizedState:$e.next;if(e!==null)$e=e,Le=t;else{if(t===null)throw Error(M(310));Le=t,t={memoizedState:Le.memoizedState,baseState:Le.baseState,baseQueue:Le.baseQueue,queue:Le.queue,next:null},$e===null?je.memoizedState=$e=t:$e=$e.next=t}return $e}function wi(t,e){return typeof e=="function"?e(t):e}function Sa(t){var e=It(),n=e.queue;if(n===null)throw Error(M(311));n.lastRenderedReducer=t;var r=Le,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var l=s.next;s.next=i.next,i.next=l}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=l=null,c=null,u=i;do{var p=u.lane;if((ur&p)===p)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var d={lane:p,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(a=c=d,l=r):c=c.next=d,je.lanes|=p,dr|=p}u=u.next}while(u!==null&&u!==i);c===null?l=r:c.next=a,Ut(r,e.memoizedState)||(ut=!0),e.memoizedState=r,e.baseState=l,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,je.lanes|=i,dr|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ca(t){var e=It(),n=e.queue;if(n===null)throw Error(M(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var l=s=s.next;do i=t(i,l.action),l=l.next;while(l!==s);Ut(i,e.memoizedState)||(ut=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function _m(){}function wm(t,e){var n=je,r=It(),s=e(),i=!Ut(r.memoizedState,s);if(i&&(r.memoizedState=s,ut=!0),r=r.queue,Lu(Cm.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||$e!==null&&$e.memoizedState.tag&1){if(n.flags|=2048,ki(9,Sm.bind(null,n,r,s,e),void 0,null),Ve===null)throw Error(M(349));ur&30||km(n,e,s)}return s}function km(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=je.updateQueue,e===null?(e={lastEffect:null,stores:null},je.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Sm(t,e,n,r){e.value=n,e.getSnapshot=r,Em(e)&&bm(t)}function Cm(t,e,n){return n(function(){Em(e)&&bm(t)})}function Em(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ut(t,n)}catch{return!0}}function bm(t){var e=an(t,1);e!==null&&Bt(e,t,1,-1)}function Mf(t){var e=Yt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wi,lastRenderedState:t},e.queue=t,t=t.dispatch=Av.bind(null,je,t),[e.memoizedState,t]}function ki(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=je.updateQueue,e===null?(e={lastEffect:null,stores:null},je.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Nm(){return It().memoizedState}function jo(t,e,n,r){var s=Yt();je.flags|=t,s.memoizedState=ki(1|e,n,void 0,r===void 0?null:r)}function Tl(t,e,n,r){var s=It();r=r===void 0?null:r;var i=void 0;if(Le!==null){var l=Le.memoizedState;if(i=l.destroy,r!==null&&Au(r,l.deps)){s.memoizedState=ki(e,n,i,r);return}}je.flags|=t,s.memoizedState=ki(1|e,n,i,r)}function zf(t,e){return jo(8390656,8,t,e)}function Lu(t,e){return Tl(2048,8,t,e)}function jm(t,e){return Tl(4,2,t,e)}function Tm(t,e){return Tl(4,4,t,e)}function Pm(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Im(t,e,n){return n=n!=null?n.concat([t]):null,Tl(4,4,Pm.bind(null,e,t),n)}function Ou(){}function Rm(t,e){var n=It();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Au(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Am(t,e){var n=It();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Au(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Dm(t,e,n){return ur&21?(Ut(n,e)||(n=zp(),je.lanes|=n,dr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ut=!0),t.memoizedState=n)}function Iv(t,e){var n=de;de=n!==0&&4>n?n:4,t(!0);var r=ka.transition;ka.transition={};try{t(!1),e()}finally{de=n,ka.transition=r}}function Wm(){return It().memoizedState}function Rv(t,e,n){var r=Dn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Lm(t))Om(e,n);else if(n=ym(t,e,n,r),n!==null){var s=st();Bt(n,t,r,s),Mm(n,e,r)}}function Av(t,e,n){var r=Dn(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Lm(t))Om(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var l=e.lastRenderedState,a=i(l,n);if(s.hasEagerState=!0,s.eagerState=a,Ut(a,l)){var c=e.interleaved;c===null?(s.next=s,ju(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=ym(t,e,s,r),n!==null&&(s=st(),Bt(n,t,r,s),Mm(n,e,r))}}function Lm(t){var e=t.alternate;return t===je||e!==null&&e===je}function Om(t,e){Js=Jo=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Mm(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,pu(t,n)}}var Zo={readContext:Pt,useCallback:Xe,useContext:Xe,useEffect:Xe,useImperativeHandle:Xe,useInsertionEffect:Xe,useLayoutEffect:Xe,useMemo:Xe,useReducer:Xe,useRef:Xe,useState:Xe,useDebugValue:Xe,useDeferredValue:Xe,useTransition:Xe,useMutableSource:Xe,useSyncExternalStore:Xe,useId:Xe,unstable_isNewReconciler:!1},Dv={readContext:Pt,useCallback:function(t,e){return Yt().memoizedState=[t,e===void 0?null:e],t},useContext:Pt,useEffect:zf,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,jo(4194308,4,Pm.bind(null,e,t),n)},useLayoutEffect:function(t,e){return jo(4194308,4,t,e)},useInsertionEffect:function(t,e){return jo(4,2,t,e)},useMemo:function(t,e){var n=Yt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Yt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Rv.bind(null,je,t),[r.memoizedState,t]},useRef:function(t){var e=Yt();return t={current:t},e.memoizedState=t},useState:Mf,useDebugValue:Ou,useDeferredValue:function(t){return Yt().memoizedState=t},useTransition:function(){var t=Mf(!1),e=t[0];return t=Iv.bind(null,t[1]),Yt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=je,s=Yt();if(Se){if(n===void 0)throw Error(M(407));n=n()}else{if(n=e(),Ve===null)throw Error(M(349));ur&30||km(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,zf(Cm.bind(null,r,i,t),[t]),r.flags|=2048,ki(9,Sm.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Yt(),e=Ve.identifierPrefix;if(Se){var n=tn,r=en;n=(r&~(1<<32-Ft(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=_i++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Pv++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Wv={readContext:Pt,useCallback:Rm,useContext:Pt,useEffect:Lu,useImperativeHandle:Im,useInsertionEffect:jm,useLayoutEffect:Tm,useMemo:Am,useReducer:Sa,useRef:Nm,useState:function(){return Sa(wi)},useDebugValue:Ou,useDeferredValue:function(t){var e=It();return Dm(e,Le.memoizedState,t)},useTransition:function(){var t=Sa(wi)[0],e=It().memoizedState;return[t,e]},useMutableSource:_m,useSyncExternalStore:wm,useId:Wm,unstable_isNewReconciler:!1},Lv={readContext:Pt,useCallback:Rm,useContext:Pt,useEffect:Lu,useImperativeHandle:Im,useInsertionEffect:jm,useLayoutEffect:Tm,useMemo:Am,useReducer:Ca,useRef:Nm,useState:function(){return Ca(wi)},useDebugValue:Ou,useDeferredValue:function(t){var e=It();return Le===null?e.memoizedState=t:Dm(e,Le.memoizedState,t)},useTransition:function(){var t=Ca(wi)[0],e=It().memoizedState;return[t,e]},useMutableSource:_m,useSyncExternalStore:wm,useId:Wm,unstable_isNewReconciler:!1};function Dt(t,e){if(t&&t.defaultProps){e=Te({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function kc(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Te({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Pl={isMounted:function(t){return(t=t._reactInternals)?vr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=st(),s=Dn(t),i=rn(r,s);i.payload=e,n!=null&&(i.callback=n),e=Rn(t,i,s),e!==null&&(Bt(e,t,s,r),bo(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=st(),s=Dn(t),i=rn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Rn(t,i,s),e!==null&&(Bt(e,t,s,r),bo(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=st(),r=Dn(t),s=rn(n,r);s.tag=2,e!=null&&(s.callback=e),e=Rn(t,s,r),e!==null&&(Bt(e,t,r,n),bo(e,t,r))}};function Ff(t,e,n,r,s,i,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,l):e.prototype&&e.prototype.isPureReactComponent?!pi(n,r)||!pi(s,i):!0}function zm(t,e,n){var r=!1,s=Bn,i=e.contextType;return typeof i=="object"&&i!==null?i=Pt(i):(s=ht(e)?ar:et.current,r=e.contextTypes,i=(r=r!=null)?Zr(t,s):Bn),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Pl,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Bf(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Pl.enqueueReplaceState(e,e.state,null)}function Sc(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Tu(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Pt(i):(i=ht(e)?ar:et.current,s.context=Zr(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(kc(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Pl.enqueueReplaceState(s,s.state,null),Xo(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function rs(t,e){try{var n="",r=e;do n+=ux(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Ea(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Cc(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Ov=typeof WeakMap=="function"?WeakMap:Map;function Fm(t,e,n){n=rn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){tl||(tl=!0,Dc=r),Cc(t,e)},n}function Bm(t,e,n){n=rn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Cc(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Cc(t,e),typeof r!="function"&&(An===null?An=new Set([this]):An.add(this));var l=e.stack;this.componentDidCatch(e.value,{componentStack:l!==null?l:""})}),n}function $f(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Ov;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=qv.bind(null,t,e,n),e.then(t,t))}function Uf(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Gf(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=rn(-1,1),e.tag=2,Rn(n,e,1))),n.lanes|=1),t)}var Mv=fn.ReactCurrentOwner,ut=!1;function nt(t,e,n,r){e.child=t===null?gm(e,null,n,r):ts(e,t.child,n,r)}function Vf(t,e,n,r,s){n=n.render;var i=e.ref;return Yr(e,s),r=Du(t,e,n,r,i,s),n=Wu(),t!==null&&!ut?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,cn(t,e,s)):(Se&&n&&ku(e),e.flags|=1,nt(t,e,r,s),e.child)}function Hf(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Vu(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,$m(t,e,i,r,s)):(t=Ro(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var l=i.memoizedProps;if(n=n.compare,n=n!==null?n:pi,n(l,r)&&t.ref===e.ref)return cn(t,e,s)}return e.flags|=1,t=Wn(i,r),t.ref=e.ref,t.return=e,e.child=t}function $m(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(pi(i,r)&&t.ref===e.ref)if(ut=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(ut=!0);else return e.lanes=t.lanes,cn(t,e,s)}return Ec(t,e,n,r,s)}function Um(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ye(Br,vt),vt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ye(Br,vt),vt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,ye(Br,vt),vt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,ye(Br,vt),vt|=r;return nt(t,e,s,n),e.child}function Gm(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Ec(t,e,n,r,s){var i=ht(n)?ar:et.current;return i=Zr(e,i),Yr(e,s),n=Du(t,e,n,r,i,s),r=Wu(),t!==null&&!ut?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,cn(t,e,s)):(Se&&r&&ku(e),e.flags|=1,nt(t,e,n,s),e.child)}function Yf(t,e,n,r,s){if(ht(n)){var i=!0;Vo(e)}else i=!1;if(Yr(e,s),e.stateNode===null)To(t,e),zm(e,n,r),Sc(e,n,r,s),r=!0;else if(t===null){var l=e.stateNode,a=e.memoizedProps;l.props=a;var c=l.context,u=n.contextType;typeof u=="object"&&u!==null?u=Pt(u):(u=ht(n)?ar:et.current,u=Zr(e,u));var p=n.getDerivedStateFromProps,d=typeof p=="function"||typeof l.getSnapshotBeforeUpdate=="function";d||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(a!==r||c!==u)&&Bf(e,l,r,u),Sn=!1;var h=e.memoizedState;l.state=h,Xo(e,r,l,s),c=e.memoizedState,a!==r||h!==c||ft.current||Sn?(typeof p=="function"&&(kc(e,n,p,r),c=e.memoizedState),(a=Sn||Ff(e,n,a,r,h,c,u))?(d||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4194308)):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),l.props=r,l.state=c,l.context=u,r=a):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{l=e.stateNode,xm(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Dt(e.type,a),l.props=u,d=e.pendingProps,h=l.context,c=n.contextType,typeof c=="object"&&c!==null?c=Pt(c):(c=ht(n)?ar:et.current,c=Zr(e,c));var _=n.getDerivedStateFromProps;(p=typeof _=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(a!==d||h!==c)&&Bf(e,l,r,c),Sn=!1,h=e.memoizedState,l.state=h,Xo(e,r,l,s);var w=e.memoizedState;a!==d||h!==w||ft.current||Sn?(typeof _=="function"&&(kc(e,n,_,r),w=e.memoizedState),(u=Sn||Ff(e,n,u,r,h,w,c)||!1)?(p||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(r,w,c),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(r,w,c)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof l.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=w),l.props=r,l.state=w,l.context=c,r=u):(typeof l.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return bc(t,e,n,r,i,s)}function bc(t,e,n,r,s,i){Gm(t,e);var l=(e.flags&128)!==0;if(!r&&!l)return s&&Rf(e,n,!1),cn(t,e,i);r=e.stateNode,Mv.current=e;var a=l&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&l?(e.child=ts(e,t.child,null,i),e.child=ts(e,null,a,i)):nt(t,e,a,i),e.memoizedState=r.state,s&&Rf(e,n,!0),e.child}function Vm(t){var e=t.stateNode;e.pendingContext?If(t,e.pendingContext,e.pendingContext!==e.context):e.context&&If(t,e.context,!1),Pu(t,e.containerInfo)}function Kf(t,e,n,r,s){return es(),Cu(s),e.flags|=256,nt(t,e,n,r),e.child}var Nc={dehydrated:null,treeContext:null,retryLane:0};function jc(t){return{baseLanes:t,cachePool:null,transitions:null}}function Hm(t,e,n){var r=e.pendingProps,s=Ne.current,i=!1,l=(e.flags&128)!==0,a;if((a=l)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),ye(Ne,s&1),t===null)return _c(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(l=r.children,t=r.fallback,i?(r=e.mode,i=e.child,l={mode:"hidden",children:l},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=l):i=Al(l,r,0,null),t=lr(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=jc(n),e.memoizedState=Nc,t):Mu(e,l));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return zv(t,e,l,r,a,s,n);if(i){i=r.fallback,l=e.mode,s=t.child,a=s.sibling;var c={mode:"hidden",children:r.children};return!(l&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Wn(s,c),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Wn(a,i):(i=lr(i,l,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,l=t.child.memoizedState,l=l===null?jc(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},i.memoizedState=l,i.childLanes=t.childLanes&~n,e.memoizedState=Nc,r}return i=t.child,t=i.sibling,r=Wn(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Mu(t,e){return e=Al({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function mo(t,e,n,r){return r!==null&&Cu(r),ts(e,t.child,null,n),t=Mu(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function zv(t,e,n,r,s,i,l){if(n)return e.flags&256?(e.flags&=-257,r=Ea(Error(M(422))),mo(t,e,l,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Al({mode:"visible",children:r.children},s,0,null),i=lr(i,s,l,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&ts(e,t.child,null,l),e.child.memoizedState=jc(l),e.memoizedState=Nc,i);if(!(e.mode&1))return mo(t,e,l,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(M(419)),r=Ea(i,r,void 0),mo(t,e,l,r)}if(a=(l&t.childLanes)!==0,ut||a){if(r=Ve,r!==null){switch(l&-l){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|l)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,an(t,s),Bt(r,t,s,-1))}return Gu(),r=Ea(Error(M(421))),mo(t,e,l,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=Jv.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,_t=In(s.nextSibling),wt=e,Se=!0,Lt=null,t!==null&&(bt[Nt++]=en,bt[Nt++]=tn,bt[Nt++]=cr,en=t.id,tn=t.overflow,cr=e),e=Mu(e,r.children),e.flags|=4096,e)}function Qf(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),wc(t.return,e,n)}function ba(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Ym(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(nt(t,e,r.children,n),r=Ne.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Qf(t,n,e);else if(t.tag===19)Qf(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ye(Ne,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&qo(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),ba(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&qo(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}ba(e,!0,n,null,i);break;case"together":ba(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function To(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function cn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),dr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(M(153));if(e.child!==null){for(t=e.child,n=Wn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Wn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Fv(t,e,n){switch(e.tag){case 3:Vm(e),es();break;case 5:vm(e);break;case 1:ht(e.type)&&Vo(e);break;case 4:Pu(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;ye(Ko,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ye(Ne,Ne.current&1),e.flags|=128,null):n&e.child.childLanes?Hm(t,e,n):(ye(Ne,Ne.current&1),t=cn(t,e,n),t!==null?t.sibling:null);ye(Ne,Ne.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Ym(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ye(Ne,Ne.current),r)break;return null;case 22:case 23:return e.lanes=0,Um(t,e,n)}return cn(t,e,n)}var Km,Tc,Qm,Xm;Km=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Tc=function(){};Qm=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,rr(Xt.current);var i=null;switch(n){case"input":s=qa(t,s),r=qa(t,r),i=[];break;case"select":s=Te({},s,{value:void 0}),r=Te({},r,{value:void 0}),i=[];break;case"textarea":s=ec(t,s),r=ec(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Uo)}nc(n,r);var l;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(l in a)a.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(li.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(a=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==a&&(c!=null||a!=null))if(u==="style")if(a){for(l in a)!a.hasOwnProperty(l)||c&&c.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in c)c.hasOwnProperty(l)&&a[l]!==c[l]&&(n||(n={}),n[l]=c[l])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(li.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&xe("scroll",t),i||a===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};Xm=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ws(t,e){if(!Se)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function qe(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Bv(t,e,n){var r=e.pendingProps;switch(Su(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qe(e),null;case 1:return ht(e.type)&&Go(),qe(e),null;case 3:return r=e.stateNode,ns(),we(ft),we(et),Ru(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ho(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Lt!==null&&(Oc(Lt),Lt=null))),Tc(t,e),qe(e),null;case 5:Iu(e);var s=rr(vi.current);if(n=e.type,t!==null&&e.stateNode!=null)Qm(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(M(166));return qe(e),null}if(t=rr(Xt.current),ho(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Kt]=e,r[yi]=i,t=(e.mode&1)!==0,n){case"dialog":xe("cancel",r),xe("close",r);break;case"iframe":case"object":case"embed":xe("load",r);break;case"video":case"audio":for(s=0;s<Hs.length;s++)xe(Hs[s],r);break;case"source":xe("error",r);break;case"img":case"image":case"link":xe("error",r),xe("load",r);break;case"details":xe("toggle",r);break;case"input":rf(r,i),xe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},xe("invalid",r);break;case"textarea":of(r,i),xe("invalid",r)}nc(n,i),s=null;for(var l in i)if(i.hasOwnProperty(l)){var a=i[l];l==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&fo(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&fo(r.textContent,a,t),s=["children",""+a]):li.hasOwnProperty(l)&&a!=null&&l==="onScroll"&&xe("scroll",r)}switch(n){case"input":ro(r),sf(r,i,!0);break;case"textarea":ro(r),lf(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Uo)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{l=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Cp(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=l.createElement(n,{is:r.is}):(t=l.createElement(n),n==="select"&&(l=t,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):t=l.createElementNS(t,n),t[Kt]=e,t[yi]=r,Km(t,e,!1,!1),e.stateNode=t;e:{switch(l=rc(n,r),n){case"dialog":xe("cancel",t),xe("close",t),s=r;break;case"iframe":case"object":case"embed":xe("load",t),s=r;break;case"video":case"audio":for(s=0;s<Hs.length;s++)xe(Hs[s],t);s=r;break;case"source":xe("error",t),s=r;break;case"img":case"image":case"link":xe("error",t),xe("load",t),s=r;break;case"details":xe("toggle",t),s=r;break;case"input":rf(t,r),s=qa(t,r),xe("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Te({},r,{value:void 0}),xe("invalid",t);break;case"textarea":of(t,r),s=ec(t,r),xe("invalid",t);break;default:s=r}nc(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var c=a[i];i==="style"?Np(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Ep(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&ai(t,c):typeof c=="number"&&ai(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(li.hasOwnProperty(i)?c!=null&&i==="onScroll"&&xe("scroll",t):c!=null&&au(t,i,c,l))}switch(n){case"input":ro(t),sf(t,r,!1);break;case"textarea":ro(t),lf(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Fn(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Ur(t,!!r.multiple,i,!1):r.defaultValue!=null&&Ur(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Uo)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return qe(e),null;case 6:if(t&&e.stateNode!=null)Xm(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(M(166));if(n=rr(vi.current),rr(Xt.current),ho(e)){if(r=e.stateNode,n=e.memoizedProps,r[Kt]=e,(i=r.nodeValue!==n)&&(t=wt,t!==null))switch(t.tag){case 3:fo(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&fo(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Kt]=e,e.stateNode=r}return qe(e),null;case 13:if(we(Ne),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Se&&_t!==null&&e.mode&1&&!(e.flags&128))pm(),es(),e.flags|=98560,i=!1;else if(i=ho(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(M(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(M(317));i[Kt]=e}else es(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;qe(e),i=!1}else Lt!==null&&(Oc(Lt),Lt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ne.current&1?ze===0&&(ze=3):Gu())),e.updateQueue!==null&&(e.flags|=4),qe(e),null);case 4:return ns(),Tc(t,e),t===null&&mi(e.stateNode.containerInfo),qe(e),null;case 10:return Nu(e.type._context),qe(e),null;case 17:return ht(e.type)&&Go(),qe(e),null;case 19:if(we(Ne),i=e.memoizedState,i===null)return qe(e),null;if(r=(e.flags&128)!==0,l=i.rendering,l===null)if(r)Ws(i,!1);else{if(ze!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(l=qo(t),l!==null){for(e.flags|=128,Ws(i,!1),r=l.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,l=i.alternate,l===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,t=l.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ye(Ne,Ne.current&1|2),e.child}t=t.sibling}i.tail!==null&&Re()>ss&&(e.flags|=128,r=!0,Ws(i,!1),e.lanes=4194304)}else{if(!r)if(t=qo(l),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ws(i,!0),i.tail===null&&i.tailMode==="hidden"&&!l.alternate&&!Se)return qe(e),null}else 2*Re()-i.renderingStartTime>ss&&n!==1073741824&&(e.flags|=128,r=!0,Ws(i,!1),e.lanes=4194304);i.isBackwards?(l.sibling=e.child,e.child=l):(n=i.last,n!==null?n.sibling=l:e.child=l,i.last=l)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Re(),e.sibling=null,n=Ne.current,ye(Ne,r?n&1|2:n&1),e):(qe(e),null);case 22:case 23:return Uu(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?vt&1073741824&&(qe(e),e.subtreeFlags&6&&(e.flags|=8192)):qe(e),null;case 24:return null;case 25:return null}throw Error(M(156,e.tag))}function $v(t,e){switch(Su(e),e.tag){case 1:return ht(e.type)&&Go(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ns(),we(ft),we(et),Ru(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Iu(e),null;case 13:if(we(Ne),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(M(340));es()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return we(Ne),null;case 4:return ns(),null;case 10:return Nu(e.type._context),null;case 22:case 23:return Uu(),null;case 24:return null;default:return null}}var go=!1,Je=!1,Uv=typeof WeakSet=="function"?WeakSet:Set,$=null;function Fr(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Pe(t,e,r)}else n.current=null}function Pc(t,e,n){try{n()}catch(r){Pe(t,e,r)}}var Xf=!1;function Gv(t,e){if(hc=Fo,t=tm(),wu(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var l=0,a=-1,c=-1,u=0,p=0,d=t,h=null;t:for(;;){for(var _;d!==n||s!==0&&d.nodeType!==3||(a=l+s),d!==i||r!==0&&d.nodeType!==3||(c=l+r),d.nodeType===3&&(l+=d.nodeValue.length),(_=d.firstChild)!==null;)h=d,d=_;for(;;){if(d===t)break t;if(h===n&&++u===s&&(a=l),h===i&&++p===r&&(c=l),(_=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=_}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(pc={focusedElem:t,selectionRange:n},Fo=!1,$=e;$!==null;)if(e=$,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,$=t;else for(;$!==null;){e=$;try{var w=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var T=w.memoizedProps,E=w.memoizedState,v=e.stateNode,y=v.getSnapshotBeforeUpdate(e.elementType===e.type?T:Dt(e.type,T),E);v.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var k=e.stateNode.containerInfo;k.nodeType===1?k.textContent="":k.nodeType===9&&k.documentElement&&k.removeChild(k.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(M(163))}}catch(m){Pe(e,e.return,m)}if(t=e.sibling,t!==null){t.return=e.return,$=t;break}$=e.return}return w=Xf,Xf=!1,w}function Zs(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Pc(e,n,i)}s=s.next}while(s!==r)}}function Il(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Ic(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function qm(t){var e=t.alternate;e!==null&&(t.alternate=null,qm(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Kt],delete e[yi],delete e[yc],delete e[bv],delete e[Nv])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Jm(t){return t.tag===5||t.tag===3||t.tag===4}function qf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Jm(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Rc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Uo));else if(r!==4&&(t=t.child,t!==null))for(Rc(t,e,n),t=t.sibling;t!==null;)Rc(t,e,n),t=t.sibling}function Ac(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Ac(t,e,n),t=t.sibling;t!==null;)Ac(t,e,n),t=t.sibling}var He=null,Wt=!1;function xn(t,e,n){for(n=n.child;n!==null;)Zm(t,e,n),n=n.sibling}function Zm(t,e,n){if(Qt&&typeof Qt.onCommitFiberUnmount=="function")try{Qt.onCommitFiberUnmount(Sl,n)}catch{}switch(n.tag){case 5:Je||Fr(n,e);case 6:var r=He,s=Wt;He=null,xn(t,e,n),He=r,Wt=s,He!==null&&(Wt?(t=He,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):He.removeChild(n.stateNode));break;case 18:He!==null&&(Wt?(t=He,n=n.stateNode,t.nodeType===8?va(t.parentNode,n):t.nodeType===1&&va(t,n),fi(t)):va(He,n.stateNode));break;case 4:r=He,s=Wt,He=n.stateNode.containerInfo,Wt=!0,xn(t,e,n),He=r,Wt=s;break;case 0:case 11:case 14:case 15:if(!Je&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,l=i.destroy;i=i.tag,l!==void 0&&(i&2||i&4)&&Pc(n,e,l),s=s.next}while(s!==r)}xn(t,e,n);break;case 1:if(!Je&&(Fr(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Pe(n,e,a)}xn(t,e,n);break;case 21:xn(t,e,n);break;case 22:n.mode&1?(Je=(r=Je)||n.memoizedState!==null,xn(t,e,n),Je=r):xn(t,e,n);break;default:xn(t,e,n)}}function Jf(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Uv),e.forEach(function(r){var s=Zv.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function At(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,l=e,a=l;e:for(;a!==null;){switch(a.tag){case 5:He=a.stateNode,Wt=!1;break e;case 3:He=a.stateNode.containerInfo,Wt=!0;break e;case 4:He=a.stateNode.containerInfo,Wt=!0;break e}a=a.return}if(He===null)throw Error(M(160));Zm(i,l,s),He=null,Wt=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){Pe(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)eg(e,t),e=e.sibling}function eg(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(At(e,t),Ht(t),r&4){try{Zs(3,t,t.return),Il(3,t)}catch(T){Pe(t,t.return,T)}try{Zs(5,t,t.return)}catch(T){Pe(t,t.return,T)}}break;case 1:At(e,t),Ht(t),r&512&&n!==null&&Fr(n,n.return);break;case 5:if(At(e,t),Ht(t),r&512&&n!==null&&Fr(n,n.return),t.flags&32){var s=t.stateNode;try{ai(s,"")}catch(T){Pe(t,t.return,T)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,l=n!==null?n.memoizedProps:i,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&kp(s,i),rc(a,l);var u=rc(a,i);for(l=0;l<c.length;l+=2){var p=c[l],d=c[l+1];p==="style"?Np(s,d):p==="dangerouslySetInnerHTML"?Ep(s,d):p==="children"?ai(s,d):au(s,p,d,u)}switch(a){case"input":Ja(s,i);break;case"textarea":Sp(s,i);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var _=i.value;_!=null?Ur(s,!!i.multiple,_,!1):h!==!!i.multiple&&(i.defaultValue!=null?Ur(s,!!i.multiple,i.defaultValue,!0):Ur(s,!!i.multiple,i.multiple?[]:"",!1))}s[yi]=i}catch(T){Pe(t,t.return,T)}}break;case 6:if(At(e,t),Ht(t),r&4){if(t.stateNode===null)throw Error(M(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(T){Pe(t,t.return,T)}}break;case 3:if(At(e,t),Ht(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{fi(e.containerInfo)}catch(T){Pe(t,t.return,T)}break;case 4:At(e,t),Ht(t);break;case 13:At(e,t),Ht(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Bu=Re())),r&4&&Jf(t);break;case 22:if(p=n!==null&&n.memoizedState!==null,t.mode&1?(Je=(u=Je)||p,At(e,t),Je=u):At(e,t),Ht(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!p&&t.mode&1)for($=t,p=t.child;p!==null;){for(d=$=p;$!==null;){switch(h=$,_=h.child,h.tag){case 0:case 11:case 14:case 15:Zs(4,h,h.return);break;case 1:Fr(h,h.return);var w=h.stateNode;if(typeof w.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,w.props=e.memoizedProps,w.state=e.memoizedState,w.componentWillUnmount()}catch(T){Pe(r,n,T)}}break;case 5:Fr(h,h.return);break;case 22:if(h.memoizedState!==null){eh(d);continue}}_!==null?(_.return=h,$=_):eh(d)}p=p.sibling}e:for(p=null,d=t;;){if(d.tag===5){if(p===null){p=d;try{s=d.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=d.stateNode,c=d.memoizedProps.style,l=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=bp("display",l))}catch(T){Pe(t,t.return,T)}}}else if(d.tag===6){if(p===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(T){Pe(t,t.return,T)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;p===d&&(p=null),d=d.return}p===d&&(p=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:At(e,t),Ht(t),r&4&&Jf(t);break;case 21:break;default:At(e,t),Ht(t)}}function Ht(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Jm(n)){var r=n;break e}n=n.return}throw Error(M(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(ai(s,""),r.flags&=-33);var i=qf(t);Ac(t,i,s);break;case 3:case 4:var l=r.stateNode.containerInfo,a=qf(t);Rc(t,a,l);break;default:throw Error(M(161))}}catch(c){Pe(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Vv(t,e,n){$=t,tg(t)}function tg(t,e,n){for(var r=(t.mode&1)!==0;$!==null;){var s=$,i=s.child;if(s.tag===22&&r){var l=s.memoizedState!==null||go;if(!l){var a=s.alternate,c=a!==null&&a.memoizedState!==null||Je;a=go;var u=Je;if(go=l,(Je=c)&&!u)for($=s;$!==null;)l=$,c=l.child,l.tag===22&&l.memoizedState!==null?th(s):c!==null?(c.return=l,$=c):th(s);for(;i!==null;)$=i,tg(i),i=i.sibling;$=s,go=a,Je=u}Zf(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,$=i):Zf(t)}}function Zf(t){for(;$!==null;){var e=$;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Je||Il(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Je)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Dt(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Of(e,i,r);break;case 3:var l=e.updateQueue;if(l!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Of(e,l,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var p=u.memoizedState;if(p!==null){var d=p.dehydrated;d!==null&&fi(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(M(163))}Je||e.flags&512&&Ic(e)}catch(h){Pe(e,e.return,h)}}if(e===t){$=null;break}if(n=e.sibling,n!==null){n.return=e.return,$=n;break}$=e.return}}function eh(t){for(;$!==null;){var e=$;if(e===t){$=null;break}var n=e.sibling;if(n!==null){n.return=e.return,$=n;break}$=e.return}}function th(t){for(;$!==null;){var e=$;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Il(4,e)}catch(c){Pe(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){Pe(e,s,c)}}var i=e.return;try{Ic(e)}catch(c){Pe(e,i,c)}break;case 5:var l=e.return;try{Ic(e)}catch(c){Pe(e,l,c)}}}catch(c){Pe(e,e.return,c)}if(e===t){$=null;break}var a=e.sibling;if(a!==null){a.return=e.return,$=a;break}$=e.return}}var Hv=Math.ceil,el=fn.ReactCurrentDispatcher,zu=fn.ReactCurrentOwner,Tt=fn.ReactCurrentBatchConfig,le=0,Ve=null,We=null,Ye=0,vt=0,Br=Yn(0),ze=0,Si=null,dr=0,Rl=0,Fu=0,ei=null,ct=null,Bu=0,ss=1/0,Jt=null,tl=!1,Dc=null,An=null,yo=!1,Nn=null,nl=0,ti=0,Wc=null,Po=-1,Io=0;function st(){return le&6?Re():Po!==-1?Po:Po=Re()}function Dn(t){return t.mode&1?le&2&&Ye!==0?Ye&-Ye:Tv.transition!==null?(Io===0&&(Io=zp()),Io):(t=de,t!==0||(t=window.event,t=t===void 0?16:Hp(t.type)),t):1}function Bt(t,e,n,r){if(50<ti)throw ti=0,Wc=null,Error(M(185));Oi(t,n,r),(!(le&2)||t!==Ve)&&(t===Ve&&(!(le&2)&&(Rl|=n),ze===4&&En(t,Ye)),pt(t,r),n===1&&le===0&&!(e.mode&1)&&(ss=Re()+500,jl&&Kn()))}function pt(t,e){var n=t.callbackNode;Tx(t,e);var r=zo(t,t===Ve?Ye:0);if(r===0)n!==null&&uf(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&uf(n),e===1)t.tag===0?jv(nh.bind(null,t)):dm(nh.bind(null,t)),Cv(function(){!(le&6)&&Kn()}),n=null;else{switch(Fp(r)){case 1:n=hu;break;case 4:n=Op;break;case 16:n=Mo;break;case 536870912:n=Mp;break;default:n=Mo}n=cg(n,ng.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function ng(t,e){if(Po=-1,Io=0,le&6)throw Error(M(327));var n=t.callbackNode;if(Kr()&&t.callbackNode!==n)return null;var r=zo(t,t===Ve?Ye:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=rl(t,r);else{e=r;var s=le;le|=2;var i=sg();(Ve!==t||Ye!==e)&&(Jt=null,ss=Re()+500,or(t,e));do try{Qv();break}catch(a){rg(t,a)}while(!0);bu(),el.current=i,le=s,We!==null?e=0:(Ve=null,Ye=0,e=ze)}if(e!==0){if(e===2&&(s=ac(t),s!==0&&(r=s,e=Lc(t,s))),e===1)throw n=Si,or(t,0),En(t,r),pt(t,Re()),n;if(e===6)En(t,r);else{if(s=t.current.alternate,!(r&30)&&!Yv(s)&&(e=rl(t,r),e===2&&(i=ac(t),i!==0&&(r=i,e=Lc(t,i))),e===1))throw n=Si,or(t,0),En(t,r),pt(t,Re()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(M(345));case 2:Jn(t,ct,Jt);break;case 3:if(En(t,r),(r&130023424)===r&&(e=Bu+500-Re(),10<e)){if(zo(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){st(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=gc(Jn.bind(null,t,ct,Jt),e);break}Jn(t,ct,Jt);break;case 4:if(En(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var l=31-Ft(r);i=1<<l,l=e[l],l>s&&(s=l),r&=~i}if(r=s,r=Re()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Hv(r/1960))-r,10<r){t.timeoutHandle=gc(Jn.bind(null,t,ct,Jt),r);break}Jn(t,ct,Jt);break;case 5:Jn(t,ct,Jt);break;default:throw Error(M(329))}}}return pt(t,Re()),t.callbackNode===n?ng.bind(null,t):null}function Lc(t,e){var n=ei;return t.current.memoizedState.isDehydrated&&(or(t,e).flags|=256),t=rl(t,e),t!==2&&(e=ct,ct=n,e!==null&&Oc(e)),t}function Oc(t){ct===null?ct=t:ct.push.apply(ct,t)}function Yv(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Ut(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function En(t,e){for(e&=~Fu,e&=~Rl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ft(e),r=1<<n;t[n]=-1,e&=~r}}function nh(t){if(le&6)throw Error(M(327));Kr();var e=zo(t,0);if(!(e&1))return pt(t,Re()),null;var n=rl(t,e);if(t.tag!==0&&n===2){var r=ac(t);r!==0&&(e=r,n=Lc(t,r))}if(n===1)throw n=Si,or(t,0),En(t,e),pt(t,Re()),n;if(n===6)throw Error(M(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Jn(t,ct,Jt),pt(t,Re()),null}function $u(t,e){var n=le;le|=1;try{return t(e)}finally{le=n,le===0&&(ss=Re()+500,jl&&Kn())}}function fr(t){Nn!==null&&Nn.tag===0&&!(le&6)&&Kr();var e=le;le|=1;var n=Tt.transition,r=de;try{if(Tt.transition=null,de=1,t)return t()}finally{de=r,Tt.transition=n,le=e,!(le&6)&&Kn()}}function Uu(){vt=Br.current,we(Br)}function or(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Sv(n)),We!==null)for(n=We.return;n!==null;){var r=n;switch(Su(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Go();break;case 3:ns(),we(ft),we(et),Ru();break;case 5:Iu(r);break;case 4:ns();break;case 13:we(Ne);break;case 19:we(Ne);break;case 10:Nu(r.type._context);break;case 22:case 23:Uu()}n=n.return}if(Ve=t,We=t=Wn(t.current,null),Ye=vt=e,ze=0,Si=null,Fu=Rl=dr=0,ct=ei=null,nr!==null){for(e=0;e<nr.length;e++)if(n=nr[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var l=i.next;i.next=s,r.next=l}n.pending=r}nr=null}return t}function rg(t,e){do{var n=We;try{if(bu(),No.current=Zo,Jo){for(var r=je.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Jo=!1}if(ur=0,$e=Le=je=null,Js=!1,_i=0,zu.current=null,n===null||n.return===null){ze=1,Si=e,We=null;break}e:{var i=t,l=n.return,a=n,c=e;if(e=Ye,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,p=a,d=p.tag;if(!(p.mode&1)&&(d===0||d===11||d===15)){var h=p.alternate;h?(p.updateQueue=h.updateQueue,p.memoizedState=h.memoizedState,p.lanes=h.lanes):(p.updateQueue=null,p.memoizedState=null)}var _=Uf(l);if(_!==null){_.flags&=-257,Gf(_,l,a,i,e),_.mode&1&&$f(i,u,e),e=_,c=u;var w=e.updateQueue;if(w===null){var T=new Set;T.add(c),e.updateQueue=T}else w.add(c);break e}else{if(!(e&1)){$f(i,u,e),Gu();break e}c=Error(M(426))}}else if(Se&&a.mode&1){var E=Uf(l);if(E!==null){!(E.flags&65536)&&(E.flags|=256),Gf(E,l,a,i,e),Cu(rs(c,a));break e}}i=c=rs(c,a),ze!==4&&(ze=2),ei===null?ei=[i]:ei.push(i),i=l;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var v=Fm(i,c,e);Lf(i,v);break e;case 1:a=c;var y=i.type,k=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(An===null||!An.has(k)))){i.flags|=65536,e&=-e,i.lanes|=e;var m=Bm(i,a,e);Lf(i,m);break e}}i=i.return}while(i!==null)}og(n)}catch(C){e=C,We===n&&n!==null&&(We=n=n.return);continue}break}while(!0)}function sg(){var t=el.current;return el.current=Zo,t===null?Zo:t}function Gu(){(ze===0||ze===3||ze===2)&&(ze=4),Ve===null||!(dr&268435455)&&!(Rl&268435455)||En(Ve,Ye)}function rl(t,e){var n=le;le|=2;var r=sg();(Ve!==t||Ye!==e)&&(Jt=null,or(t,e));do try{Kv();break}catch(s){rg(t,s)}while(!0);if(bu(),le=n,el.current=r,We!==null)throw Error(M(261));return Ve=null,Ye=0,ze}function Kv(){for(;We!==null;)ig(We)}function Qv(){for(;We!==null&&!_x();)ig(We)}function ig(t){var e=ag(t.alternate,t,vt);t.memoizedProps=t.pendingProps,e===null?og(t):We=e,zu.current=null}function og(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=$v(n,e),n!==null){n.flags&=32767,We=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ze=6,We=null;return}}else if(n=Bv(n,e,vt),n!==null){We=n;return}if(e=e.sibling,e!==null){We=e;return}We=e=t}while(e!==null);ze===0&&(ze=5)}function Jn(t,e,n){var r=de,s=Tt.transition;try{Tt.transition=null,de=1,Xv(t,e,n,r)}finally{Tt.transition=s,de=r}return null}function Xv(t,e,n,r){do Kr();while(Nn!==null);if(le&6)throw Error(M(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(M(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(Px(t,i),t===Ve&&(We=Ve=null,Ye=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||yo||(yo=!0,cg(Mo,function(){return Kr(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Tt.transition,Tt.transition=null;var l=de;de=1;var a=le;le|=4,zu.current=null,Gv(t,n),eg(n,t),gv(pc),Fo=!!hc,pc=hc=null,t.current=n,Vv(n),wx(),le=a,de=l,Tt.transition=i}else t.current=n;if(yo&&(yo=!1,Nn=t,nl=s),i=t.pendingLanes,i===0&&(An=null),Cx(n.stateNode),pt(t,Re()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(tl)throw tl=!1,t=Dc,Dc=null,t;return nl&1&&t.tag!==0&&Kr(),i=t.pendingLanes,i&1?t===Wc?ti++:(ti=0,Wc=t):ti=0,Kn(),null}function Kr(){if(Nn!==null){var t=Fp(nl),e=Tt.transition,n=de;try{if(Tt.transition=null,de=16>t?16:t,Nn===null)var r=!1;else{if(t=Nn,Nn=null,nl=0,le&6)throw Error(M(331));var s=le;for(le|=4,$=t.current;$!==null;){var i=$,l=i.child;if($.flags&16){var a=i.deletions;if(a!==null){for(var c=0;c<a.length;c++){var u=a[c];for($=u;$!==null;){var p=$;switch(p.tag){case 0:case 11:case 15:Zs(8,p,i)}var d=p.child;if(d!==null)d.return=p,$=d;else for(;$!==null;){p=$;var h=p.sibling,_=p.return;if(qm(p),p===u){$=null;break}if(h!==null){h.return=_,$=h;break}$=_}}}var w=i.alternate;if(w!==null){var T=w.child;if(T!==null){w.child=null;do{var E=T.sibling;T.sibling=null,T=E}while(T!==null)}}$=i}}if(i.subtreeFlags&2064&&l!==null)l.return=i,$=l;else e:for(;$!==null;){if(i=$,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Zs(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,$=v;break e}$=i.return}}var y=t.current;for($=y;$!==null;){l=$;var k=l.child;if(l.subtreeFlags&2064&&k!==null)k.return=l,$=k;else e:for(l=y;$!==null;){if(a=$,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Il(9,a)}}catch(C){Pe(a,a.return,C)}if(a===l){$=null;break e}var m=a.sibling;if(m!==null){m.return=a.return,$=m;break e}$=a.return}}if(le=s,Kn(),Qt&&typeof Qt.onPostCommitFiberRoot=="function")try{Qt.onPostCommitFiberRoot(Sl,t)}catch{}r=!0}return r}finally{de=n,Tt.transition=e}}return!1}function rh(t,e,n){e=rs(n,e),e=Fm(t,e,1),t=Rn(t,e,1),e=st(),t!==null&&(Oi(t,1,e),pt(t,e))}function Pe(t,e,n){if(t.tag===3)rh(t,t,n);else for(;e!==null;){if(e.tag===3){rh(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(An===null||!An.has(r))){t=rs(n,t),t=Bm(e,t,1),e=Rn(e,t,1),t=st(),e!==null&&(Oi(e,1,t),pt(e,t));break}}e=e.return}}function qv(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=st(),t.pingedLanes|=t.suspendedLanes&n,Ve===t&&(Ye&n)===n&&(ze===4||ze===3&&(Ye&130023424)===Ye&&500>Re()-Bu?or(t,0):Fu|=n),pt(t,e)}function lg(t,e){e===0&&(t.mode&1?(e=oo,oo<<=1,!(oo&130023424)&&(oo=4194304)):e=1);var n=st();t=an(t,e),t!==null&&(Oi(t,e,n),pt(t,n))}function Jv(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),lg(t,n)}function Zv(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(M(314))}r!==null&&r.delete(e),lg(t,n)}var ag;ag=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||ft.current)ut=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ut=!1,Fv(t,e,n);ut=!!(t.flags&131072)}else ut=!1,Se&&e.flags&1048576&&fm(e,Yo,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;To(t,e),t=e.pendingProps;var s=Zr(e,et.current);Yr(e,n),s=Du(null,e,r,t,s,n);var i=Wu();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ht(r)?(i=!0,Vo(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Tu(e),s.updater=Pl,e.stateNode=s,s._reactInternals=e,Sc(e,r,t,n),e=bc(null,e,r,!0,i,n)):(e.tag=0,Se&&i&&ku(e),nt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(To(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=t_(r),t=Dt(r,t),s){case 0:e=Ec(null,e,r,t,n);break e;case 1:e=Yf(null,e,r,t,n);break e;case 11:e=Vf(null,e,r,t,n);break e;case 14:e=Hf(null,e,r,Dt(r.type,t),n);break e}throw Error(M(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Dt(r,s),Ec(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Dt(r,s),Yf(t,e,r,s,n);case 3:e:{if(Vm(e),t===null)throw Error(M(387));r=e.pendingProps,i=e.memoizedState,s=i.element,xm(t,e),Xo(e,r,null,n);var l=e.memoizedState;if(r=l.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=rs(Error(M(423)),e),e=Kf(t,e,r,n,s);break e}else if(r!==s){s=rs(Error(M(424)),e),e=Kf(t,e,r,n,s);break e}else for(_t=In(e.stateNode.containerInfo.firstChild),wt=e,Se=!0,Lt=null,n=gm(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(es(),r===s){e=cn(t,e,n);break e}nt(t,e,r,n)}e=e.child}return e;case 5:return vm(e),t===null&&_c(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,l=s.children,mc(r,s)?l=null:i!==null&&mc(r,i)&&(e.flags|=32),Gm(t,e),nt(t,e,l,n),e.child;case 6:return t===null&&_c(e),null;case 13:return Hm(t,e,n);case 4:return Pu(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ts(e,null,r,n):nt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Dt(r,s),Vf(t,e,r,s,n);case 7:return nt(t,e,e.pendingProps,n),e.child;case 8:return nt(t,e,e.pendingProps.children,n),e.child;case 12:return nt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,l=s.value,ye(Ko,r._currentValue),r._currentValue=l,i!==null)if(Ut(i.value,l)){if(i.children===s.children&&!ft.current){e=cn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){l=i.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=rn(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var p=u.pending;p===null?c.next=c:(c.next=p.next,p.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),wc(i.return,n,e),a.lanes|=n;break}c=c.next}}else if(i.tag===10)l=i.type===e.type?null:i.child;else if(i.tag===18){if(l=i.return,l===null)throw Error(M(341));l.lanes|=n,a=l.alternate,a!==null&&(a.lanes|=n),wc(l,n,e),l=i.sibling}else l=i.child;if(l!==null)l.return=i;else for(l=i;l!==null;){if(l===e){l=null;break}if(i=l.sibling,i!==null){i.return=l.return,l=i;break}l=l.return}i=l}nt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Yr(e,n),s=Pt(s),r=r(s),e.flags|=1,nt(t,e,r,n),e.child;case 14:return r=e.type,s=Dt(r,e.pendingProps),s=Dt(r.type,s),Hf(t,e,r,s,n);case 15:return $m(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Dt(r,s),To(t,e),e.tag=1,ht(r)?(t=!0,Vo(e)):t=!1,Yr(e,n),zm(e,r,s),Sc(e,r,s,n),bc(null,e,r,!0,t,n);case 19:return Ym(t,e,n);case 22:return Um(t,e,n)}throw Error(M(156,e.tag))};function cg(t,e){return Lp(t,e)}function e_(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jt(t,e,n,r){return new e_(t,e,n,r)}function Vu(t){return t=t.prototype,!(!t||!t.isReactComponent)}function t_(t){if(typeof t=="function")return Vu(t)?1:0;if(t!=null){if(t=t.$$typeof,t===uu)return 11;if(t===du)return 14}return 2}function Wn(t,e){var n=t.alternate;return n===null?(n=jt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ro(t,e,n,r,s,i){var l=2;if(r=t,typeof t=="function")Vu(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case Ir:return lr(n.children,s,i,e);case cu:l=8,s|=8;break;case Ya:return t=jt(12,n,e,s|2),t.elementType=Ya,t.lanes=i,t;case Ka:return t=jt(13,n,e,s),t.elementType=Ka,t.lanes=i,t;case Qa:return t=jt(19,n,e,s),t.elementType=Qa,t.lanes=i,t;case vp:return Al(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case yp:l=10;break e;case xp:l=9;break e;case uu:l=11;break e;case du:l=14;break e;case kn:l=16,r=null;break e}throw Error(M(130,t==null?t:typeof t,""))}return e=jt(l,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function lr(t,e,n,r){return t=jt(7,t,r,e),t.lanes=n,t}function Al(t,e,n,r){return t=jt(22,t,r,e),t.elementType=vp,t.lanes=n,t.stateNode={isHidden:!1},t}function Na(t,e,n){return t=jt(6,t,null,e),t.lanes=n,t}function ja(t,e,n){return e=jt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function n_(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=aa(0),this.expirationTimes=aa(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=aa(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Hu(t,e,n,r,s,i,l,a,c){return t=new n_(t,e,n,a,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=jt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Tu(i),t}function r_(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Pr,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function ug(t){if(!t)return Bn;t=t._reactInternals;e:{if(vr(t)!==t||t.tag!==1)throw Error(M(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ht(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(M(171))}if(t.tag===1){var n=t.type;if(ht(n))return um(t,n,e)}return e}function dg(t,e,n,r,s,i,l,a,c){return t=Hu(n,r,!0,t,s,i,l,a,c),t.context=ug(null),n=t.current,r=st(),s=Dn(n),i=rn(r,s),i.callback=e??null,Rn(n,i,s),t.current.lanes=s,Oi(t,s,r),pt(t,r),t}function Dl(t,e,n,r){var s=e.current,i=st(),l=Dn(s);return n=ug(n),e.context===null?e.context=n:e.pendingContext=n,e=rn(i,l),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Rn(s,e,l),t!==null&&(Bt(t,s,l,i),bo(t,s,l)),l}function sl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function sh(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Yu(t,e){sh(t,e),(t=t.alternate)&&sh(t,e)}function s_(){return null}var fg=typeof reportError=="function"?reportError:function(t){console.error(t)};function Ku(t){this._internalRoot=t}Wl.prototype.render=Ku.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(M(409));Dl(t,e,null,null)};Wl.prototype.unmount=Ku.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;fr(function(){Dl(null,t,null,null)}),e[ln]=null}};function Wl(t){this._internalRoot=t}Wl.prototype.unstable_scheduleHydration=function(t){if(t){var e=Up();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Cn.length&&e!==0&&e<Cn[n].priority;n++);Cn.splice(n,0,t),n===0&&Vp(t)}};function Qu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ll(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function ih(){}function i_(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=sl(l);i.call(u)}}var l=dg(e,r,t,0,null,!1,!1,"",ih);return t._reactRootContainer=l,t[ln]=l.current,mi(t.nodeType===8?t.parentNode:t),fr(),l}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var u=sl(c);a.call(u)}}var c=Hu(t,0,!1,null,null,!1,!1,"",ih);return t._reactRootContainer=c,t[ln]=c.current,mi(t.nodeType===8?t.parentNode:t),fr(function(){Dl(e,c,n,r)}),c}function Ol(t,e,n,r,s){var i=n._reactRootContainer;if(i){var l=i;if(typeof s=="function"){var a=s;s=function(){var c=sl(l);a.call(c)}}Dl(e,l,t,s)}else l=i_(n,e,t,s,r);return sl(l)}Bp=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Vs(e.pendingLanes);n!==0&&(pu(e,n|1),pt(e,Re()),!(le&6)&&(ss=Re()+500,Kn()))}break;case 13:fr(function(){var r=an(t,1);if(r!==null){var s=st();Bt(r,t,1,s)}}),Yu(t,1)}};mu=function(t){if(t.tag===13){var e=an(t,134217728);if(e!==null){var n=st();Bt(e,t,134217728,n)}Yu(t,134217728)}};$p=function(t){if(t.tag===13){var e=Dn(t),n=an(t,e);if(n!==null){var r=st();Bt(n,t,e,r)}Yu(t,e)}};Up=function(){return de};Gp=function(t,e){var n=de;try{return de=t,e()}finally{de=n}};ic=function(t,e,n){switch(e){case"input":if(Ja(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Nl(r);if(!s)throw Error(M(90));wp(r),Ja(r,s)}}}break;case"textarea":Sp(t,n);break;case"select":e=n.value,e!=null&&Ur(t,!!n.multiple,e,!1)}};Pp=$u;Ip=fr;var o_={usingClientEntryPoint:!1,Events:[zi,Wr,Nl,jp,Tp,$u]},Ls={findFiberByHostInstance:tr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},l_={bundleType:Ls.bundleType,version:Ls.version,rendererPackageName:Ls.rendererPackageName,rendererConfig:Ls.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:fn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Dp(t),t===null?null:t.stateNode},findFiberByHostInstance:Ls.findFiberByHostInstance||s_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xo.isDisabled&&xo.supportsFiber)try{Sl=xo.inject(l_),Qt=xo}catch{}}St.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=o_;St.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Qu(e))throw Error(M(200));return r_(t,e,null,n)};St.createRoot=function(t,e){if(!Qu(t))throw Error(M(299));var n=!1,r="",s=fg;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Hu(t,1,!1,null,null,n,!1,r,s),t[ln]=e.current,mi(t.nodeType===8?t.parentNode:t),new Ku(e)};St.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(M(188)):(t=Object.keys(t).join(","),Error(M(268,t)));return t=Dp(e),t=t===null?null:t.stateNode,t};St.flushSync=function(t){return fr(t)};St.hydrate=function(t,e,n){if(!Ll(e))throw Error(M(200));return Ol(null,t,e,!0,n)};St.hydrateRoot=function(t,e,n){if(!Qu(t))throw Error(M(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",l=fg;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),e=dg(e,null,t,1,n??null,s,!1,i,l),t[ln]=e.current,mi(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Wl(e)};St.render=function(t,e,n){if(!Ll(e))throw Error(M(200));return Ol(null,t,e,!1,n)};St.unmountComponentAtNode=function(t){if(!Ll(t))throw Error(M(40));return t._reactRootContainer?(fr(function(){Ol(null,null,t,!1,function(){t._reactRootContainer=null,t[ln]=null})}),!0):!1};St.unstable_batchedUpdates=$u;St.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Ll(n))throw Error(M(200));if(t==null||t._reactInternals===void 0)throw Error(M(38));return Ol(t,e,n,!1,r)};St.version="18.3.1-next-f1338f8080-20240426";function hg(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(hg)}catch(t){console.error(t)}}hg(),hp.exports=St;var a_=hp.exports,oh=a_;Va.createRoot=oh.createRoot,Va.hydrateRoot=oh.hydrateRoot;var lh={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pg={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z=function(t,e){if(!t)throw fs(e)},fs=function(t){return new Error("Firebase Database ("+pg.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mg=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},c_=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],l=t[n++],a=t[n++],c=((s&7)<<18|(i&63)<<12|(l&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],l=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|l&63)}}return e.join("")},Xu={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],l=s+1<t.length,a=l?t[s+1]:0,c=s+2<t.length,u=c?t[s+2]:0,p=i>>2,d=(i&3)<<4|a>>4;let h=(a&15)<<2|u>>6,_=u&63;c||(_=64,l||(h=64)),r.push(n[p],n[d],n[h],n[_])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(mg(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):c_(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const d=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||u==null||d==null)throw new u_;const h=i<<2|a>>4;if(r.push(h),u!==64){const _=a<<4&240|u>>2;if(r.push(_),d!==64){const w=u<<6&192|d;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class u_ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const gg=function(t){const e=mg(t);return Xu.encodeByteArray(e,!0)},il=function(t){return gg(t).replace(/\./g,"")},Mc=function(t){try{return Xu.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d_(t){return yg(void 0,t)}function yg(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!f_(n)||(t[n]=yg(t[n],e[n]));return t}function f_(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h_(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p_=()=>h_().__FIREBASE_DEFAULTS__,m_=()=>{if(typeof process>"u"||typeof lh>"u")return;const t=lh.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},g_=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Mc(t[1]);return e&&JSON.parse(e)},xg=()=>{try{return p_()||m_()||g_()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},y_=t=>{var e,n;return(n=(e=xg())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},x_=t=>{const e=y_(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},vg=()=>{var t;return(t=xg())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v_(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[il(JSON.stringify(n)),il(JSON.stringify(l)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function _g(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(__())}function w_(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function k_(){return pg.NODE_ADMIN===!0}function S_(){try{return typeof indexedDB=="object"}catch{return!1}}function C_(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E_="FirebaseError";class Bi extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=E_,Object.setPrototypeOf(this,Bi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,wg.prototype.create)}}class wg{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],l=i?b_(i,r):"Error",a=`${this.serviceName}: ${l} (${s}).`;return new Bi(s,a,r)}}function b_(t,e){return t.replace(N_,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const N_=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ci(t){return JSON.parse(t)}function Oe(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kg=function(t){let e={},n={},r={},s="";try{const i=t.split(".");e=Ci(Mc(i[0])||""),n=Ci(Mc(i[1])||""),s=i[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:s}},j_=function(t){const e=kg(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},T_=function(t){const e=kg(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function is(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function ah(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ol(t,e,n){const r={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=e.call(n,t[s],s,t));return r}function zc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],l=e[s];if(ch(i)&&ch(l)){if(!zc(i,l))return!1}else if(i!==l)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function ch(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P_(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I_{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){const h=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(h<<1|h>>>31)&4294967295}let s=this.chain_[0],i=this.chain_[1],l=this.chain_[2],a=this.chain_[3],c=this.chain_[4],u,p;for(let d=0;d<80;d++){d<40?d<20?(u=a^i&(l^a),p=1518500249):(u=i^l^a,p=1859775393):d<60?(u=i&l|a&(i|l),p=2400959708):(u=i^l^a,p=3395469782);const h=(s<<5|s>>>27)+u+c+p+r[d]&4294967295;c=a,a=l,l=(i<<30|i>>>2)&4294967295,i=s,s=h}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+i&4294967295,this.chain_[2]=this.chain_[2]+l&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let s=0;const i=this.buf_;let l=this.inbuf_;for(;s<n;){if(l===0)for(;s<=r;)this.compress_(e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<n;)if(i[l]=e.charCodeAt(s),++l,++s,l===this.blockSize){this.compress_(i),l=0;break}}else for(;s<n;)if(i[l]=e[s],++l,++s,l===this.blockSize){this.compress_(i),l=0;break}}this.inbuf_=l,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let s=0;s<5;s++)for(let i=24;i>=0;i-=8)e[r]=this.chain_[s]>>i&255,++r;return e}}function qu(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R_=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);if(s>=55296&&s<=56319){const i=s-55296;r++,z(r<t.length,"Surrogate pair missing trail surrogate.");const l=t.charCodeAt(r)-56320;s=65536+(i<<10)+l}s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):s<65536?(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},zl=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _r(t){return t&&t._delegate?t._delegate:t}class Ei{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zn="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A_{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Ml;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(W_(e))try{this.getOrInitializeService({instanceIdentifier:Zn})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Zn){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Zn){return this.instances.has(e)}getOptions(e=Zn){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,l]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&l.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const l=this.instances.get(s);return l&&e(l,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:D_(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Zn){return this.component?this.component.multipleInstances?e:Zn:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function D_(t){return t===Zn?void 0:t}function W_(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L_{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new A_(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var me;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(me||(me={}));const O_={debug:me.DEBUG,verbose:me.VERBOSE,info:me.INFO,warn:me.WARN,error:me.ERROR,silent:me.SILENT},M_=me.INFO,z_={[me.DEBUG]:"log",[me.VERBOSE]:"log",[me.INFO]:"info",[me.WARN]:"warn",[me.ERROR]:"error"},F_=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=z_[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Sg{constructor(e){this.name=e,this._logLevel=M_,this._logHandler=F_,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in me))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?O_[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,me.DEBUG,...e),this._logHandler(this,me.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,me.VERBOSE,...e),this._logHandler(this,me.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,me.INFO,...e),this._logHandler(this,me.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,me.WARN,...e),this._logHandler(this,me.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,me.ERROR,...e),this._logHandler(this,me.ERROR,...e)}}const B_=(t,e)=>e.some(n=>t instanceof n);let uh,dh;function $_(){return uh||(uh=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function U_(){return dh||(dh=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Cg=new WeakMap,Fc=new WeakMap,Eg=new WeakMap,Ta=new WeakMap,Ju=new WeakMap;function G_(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",l)},i=()=>{n(Ln(t.result)),s()},l=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&Cg.set(n,t)}).catch(()=>{}),Ju.set(e,t),e}function V_(t){if(Fc.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",l),t.removeEventListener("abort",l)},i=()=>{n(),s()},l=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",l),t.addEventListener("abort",l)});Fc.set(t,e)}let Bc={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Fc.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Eg.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ln(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function H_(t){Bc=t(Bc)}function Y_(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Pa(this),e,...n);return Eg.set(r,e.sort?e.sort():[e]),Ln(r)}:U_().includes(t)?function(...e){return t.apply(Pa(this),e),Ln(Cg.get(this))}:function(...e){return Ln(t.apply(Pa(this),e))}}function K_(t){return typeof t=="function"?Y_(t):(t instanceof IDBTransaction&&V_(t),B_(t,$_())?new Proxy(t,Bc):t)}function Ln(t){if(t instanceof IDBRequest)return G_(t);if(Ta.has(t))return Ta.get(t);const e=K_(t);return e!==t&&(Ta.set(t,e),Ju.set(e,t)),e}const Pa=t=>Ju.get(t);function Q_(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const l=indexedDB.open(t,e),a=Ln(l);return r&&l.addEventListener("upgradeneeded",c=>{r(Ln(l.result),c.oldVersion,c.newVersion,Ln(l.transaction),c)}),n&&l.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const X_=["get","getKey","getAll","getAllKeys","count"],q_=["put","add","delete","clear"],Ia=new Map;function fh(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Ia.get(e))return Ia.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=q_.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||X_.includes(n)))return;const i=async function(l,...a){const c=this.transaction(l,s?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),s&&c.done]))[0]};return Ia.set(e,i),i}H_(t=>({...t,get:(e,n,r)=>fh(e,n)||t.get(e,n,r),has:(e,n)=>!!fh(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J_{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Z_(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Z_(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const $c="@firebase/app",hh="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const un=new Sg("@firebase/app"),ew="@firebase/app-compat",tw="@firebase/analytics-compat",nw="@firebase/analytics",rw="@firebase/app-check-compat",sw="@firebase/app-check",iw="@firebase/auth",ow="@firebase/auth-compat",lw="@firebase/database",aw="@firebase/data-connect",cw="@firebase/database-compat",uw="@firebase/functions",dw="@firebase/functions-compat",fw="@firebase/installations",hw="@firebase/installations-compat",pw="@firebase/messaging",mw="@firebase/messaging-compat",gw="@firebase/performance",yw="@firebase/performance-compat",xw="@firebase/remote-config",vw="@firebase/remote-config-compat",_w="@firebase/storage",ww="@firebase/storage-compat",kw="@firebase/firestore",Sw="@firebase/vertexai-preview",Cw="@firebase/firestore-compat",Ew="firebase",bw="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uc="[DEFAULT]",Nw={[$c]:"fire-core",[ew]:"fire-core-compat",[nw]:"fire-analytics",[tw]:"fire-analytics-compat",[sw]:"fire-app-check",[rw]:"fire-app-check-compat",[iw]:"fire-auth",[ow]:"fire-auth-compat",[lw]:"fire-rtdb",[aw]:"fire-data-connect",[cw]:"fire-rtdb-compat",[uw]:"fire-fn",[dw]:"fire-fn-compat",[fw]:"fire-iid",[hw]:"fire-iid-compat",[pw]:"fire-fcm",[mw]:"fire-fcm-compat",[gw]:"fire-perf",[yw]:"fire-perf-compat",[xw]:"fire-rc",[vw]:"fire-rc-compat",[_w]:"fire-gcs",[ww]:"fire-gcs-compat",[kw]:"fire-fst",[Cw]:"fire-fst-compat",[Sw]:"fire-vertex","fire-js":"fire-js",[Ew]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ll=new Map,jw=new Map,Gc=new Map;function ph(t,e){try{t.container.addComponent(e)}catch(n){un.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function al(t){const e=t.name;if(Gc.has(e))return un.debug(`There were multiple attempts to register component ${e}.`),!1;Gc.set(e,t);for(const n of ll.values())ph(n,t);for(const n of jw.values())ph(n,t);return!0}function Tw(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pw={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},On=new wg("app","Firebase",Pw);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iw{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ei("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw On.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rw=bw;function bg(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Uc,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw On.create("bad-app-name",{appName:String(s)});if(n||(n=vg()),!n)throw On.create("no-options");const i=ll.get(s);if(i){if(zc(n,i.options)&&zc(r,i.config))return i;throw On.create("duplicate-app",{appName:s})}const l=new L_(s);for(const c of Gc.values())l.addComponent(c);const a=new Iw(n,r,l);return ll.set(s,a),a}function Aw(t=Uc){const e=ll.get(t);if(!e&&t===Uc&&vg())return bg();if(!e)throw On.create("no-app",{appName:t});return e}function Qr(t,e,n){var r;let s=(r=Nw[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),l=e.match(/\s|\//);if(i||l){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&l&&a.push("and"),l&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),un.warn(a.join(" "));return}al(new Ei(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dw="firebase-heartbeat-database",Ww=1,bi="firebase-heartbeat-store";let Ra=null;function Ng(){return Ra||(Ra=Q_(Dw,Ww,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(bi)}catch(n){console.warn(n)}}}}).catch(t=>{throw On.create("idb-open",{originalErrorMessage:t.message})})),Ra}async function Lw(t){try{const n=(await Ng()).transaction(bi),r=await n.objectStore(bi).get(jg(t));return await n.done,r}catch(e){if(e instanceof Bi)un.warn(e.message);else{const n=On.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});un.warn(n.message)}}}async function mh(t,e){try{const r=(await Ng()).transaction(bi,"readwrite");await r.objectStore(bi).put(e,jg(t)),await r.done}catch(n){if(n instanceof Bi)un.warn(n.message);else{const r=On.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});un.warn(r.message)}}}function jg(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ow=1024,Mw=30*24*60*60*1e3;class zw{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Bw(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=gh();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(l=>l.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(l=>{const a=new Date(l.date).valueOf();return Date.now()-a<=Mw}),this._storage.overwrite(this._heartbeatsCache))}catch(r){un.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=gh(),{heartbeatsToSend:r,unsentEntries:s}=Fw(this._heartbeatsCache.heartbeats),i=il(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return un.warn(n),""}}}function gh(){return new Date().toISOString().substring(0,10)}function Fw(t,e=Ow){const n=[];let r=t.slice();for(const s of t){const i=n.find(l=>l.agent===s.agent);if(i){if(i.dates.push(s.date),yh(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),yh(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Bw{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return S_()?C_().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Lw(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return mh(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return mh(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function yh(t){return il(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $w(t){al(new Ei("platform-logger",e=>new J_(e),"PRIVATE")),al(new Ei("heartbeat",e=>new zw(e),"PRIVATE")),Qr($c,hh,t),Qr($c,hh,"esm2017"),Qr("fire-js","")}$w("");var Uw="firebase",Gw="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qr(Uw,Gw,"app");var xh={};const vh="@firebase/database",_h="1.0.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tg="";function Vw(t){Tg=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Oe(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Ci(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yw{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return hn(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pg=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Hw(e)}}catch{}return new Yw},sr=Pg("localStorage"),Kw=Pg("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xr=new Sg("@firebase/database"),Qw=function(){let t=1;return function(){return t++}}(),Ig=function(t){const e=R_(t),n=new I_;n.update(e);const r=n.digest();return Xu.encodeByteArray(r)},$i=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=$i.apply(null,r):typeof r=="object"?e+=Oe(r):e+=r,e+=" "}return e};let ni=null,wh=!0;const Xw=function(t,e){z(!0,"Can't turn on custom loggers persistently."),Xr.logLevel=me.VERBOSE,ni=Xr.log.bind(Xr)},Ze=function(...t){if(wh===!0&&(wh=!1,ni===null&&Kw.get("logging_enabled")===!0&&Xw()),ni){const e=$i.apply(null,t);ni(e)}},Ui=function(t){return function(...e){Ze(t,...e)}},Vc=function(...t){const e="FIREBASE INTERNAL ERROR: "+$i(...t);Xr.error(e)},dn=function(...t){const e=`FIREBASE FATAL ERROR: ${$i(...t)}`;throw Xr.error(e),new Error(e)},mt=function(...t){const e="FIREBASE WARNING: "+$i(...t);Xr.warn(e)},qw=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&mt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Rg=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},Jw=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},os="[MIN_NAME]",hr="[MAX_NAME]",hs=function(t,e){if(t===e)return 0;if(t===os||e===hr)return-1;if(e===os||t===hr)return 1;{const n=kh(t),r=kh(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},Zw=function(t,e){return t===e?0:t<e?-1:1},Os=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Oe(e))},Zu=function(t){if(typeof t!="object"||t===null)return Oe(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=Oe(e[r]),n+=":",n+=Zu(t[e[r]]);return n+="}",n},Ag=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let s=0;s<n;s+=e)s+e>n?r.push(t.substring(s,n)):r.push(t.substring(s,s+e));return r};function gt(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const Dg=function(t){z(!Rg(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let s,i,l,a,c;t===0?(i=0,l=0,s=1/t===-1/0?1:0):(s=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),i=a+r,l=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(i=0,l=Math.round(t/Math.pow(2,1-r-n))));const u=[];for(c=n;c;c-=1)u.push(l%2?1:0),l=Math.floor(l/2);for(c=e;c;c-=1)u.push(i%2?1:0),i=Math.floor(i/2);u.push(s?1:0),u.reverse();const p=u.join("");let d="";for(c=0;c<64;c+=8){let h=parseInt(p.substr(c,8),2).toString(16);h.length===1&&(h="0"+h),d=d+h}return d.toLowerCase()},ek=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},tk=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function nk(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const rk=new RegExp("^-?(0*)\\d{1,10}$"),sk=-2147483648,ik=2147483647,kh=function(t){if(rk.test(t)){const e=Number(t);if(e>=sk&&e<=ik)return e}return null},ps=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw mt("Exception was thrown by user callback.",n),e},Math.floor(0))}},ok=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},ri=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lk{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){mt(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ak{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Ze("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',mt(e)}}class Ao{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Ao.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ed="5",Wg="v",Lg="s",Og="r",Mg="f",zg=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Fg="ls",Bg="p",Hc="ac",$g="websocket",Ug="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gg{constructor(e,n,r,s,i=!1,l="",a=!1,c=!1){this.secure=n,this.namespace=r,this.webSocketOnly=s,this.nodeAdmin=i,this.persistenceKey=l,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=sr.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&sr.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function ck(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function Vg(t,e,n){z(typeof e=="string","typeof type must == string"),z(typeof n=="object","typeof params must == object");let r;if(e===$g)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===Ug)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);ck(t)&&(n.ns=t.namespace);const s=[];return gt(n,(i,l)=>{s.push(i+"="+l)}),r+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uk{constructor(){this.counters_={}}incrementCounter(e,n=1){hn(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return d_(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aa={},Da={};function td(t){const e=t.toString();return Aa[e]||(Aa[e]=new uk),Aa[e]}function dk(t,e){const n=t.toString();return Da[n]||(Da[n]=e()),Da[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fk{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<r.length;++s)r[s]&&ps(()=>{this.onMessage_(r[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sh="start",hk="close",pk="pLPCommand",mk="pRTLPCB",Hg="id",Yg="pw",Kg="ser",gk="cb",yk="seg",xk="ts",vk="d",_k="dframe",Qg=1870,Xg=30,wk=Qg-Xg,kk=25e3,Sk=3e4;class $r{constructor(e,n,r,s,i,l,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.transportSessionId=l,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Ui(e),this.stats_=td(n),this.urlFn=c=>(this.appCheckToken&&(c[Hc]=this.appCheckToken),Vg(n,Ug,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new fk(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Sk)),Jw(()=>{if(this.isClosed_)return;this.scriptTagHolder=new nd((...i)=>{const[l,a,c,u,p]=i;if(this.incrementIncomingBytes_(i),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,l===Sh)this.id=a,this.password=c;else if(l===hk)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+l)},(...i)=>{const[l,a]=i;this.incrementIncomingBytes_(i),this.myPacketOrderer.handleResponse(l,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[Sh]="t",r[Kg]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[gk]=this.scriptTagHolder.uniqueCallbackIdentifier),r[Wg]=ed,this.transportSessionId&&(r[Lg]=this.transportSessionId),this.lastSessionId&&(r[Fg]=this.lastSessionId),this.applicationId&&(r[Bg]=this.applicationId),this.appCheckToken&&(r[Hc]=this.appCheckToken),typeof location<"u"&&location.hostname&&zg.test(location.hostname)&&(r[Og]=Mg);const s=this.urlFn(r);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){$r.forceAllow_=!0}static forceDisallow(){$r.forceDisallow_=!0}static isAvailable(){return $r.forceAllow_?!0:!$r.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!ek()&&!tk()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=Oe(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=gg(n),s=Ag(r,wk);for(let i=0;i<s.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[i]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[_k]="t",r[Hg]=e,r[Yg]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=Oe(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class nd{constructor(e,n,r,s){this.onDisconnect=r,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=Qw(),window[pk+this.uniqueCallbackIdentifier]=e,window[mk+this.uniqueCallbackIdentifier]=n,this.myIFrame=nd.createIFrame_();let i="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(i='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(a){Ze("frame writing exception"),a.stack&&Ze(a.stack),Ze(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Ze("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[Hg]=this.myID,e[Yg]=this.myPW,e[Kg]=this.currentSerial;let n=this.urlFn(e),r="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+Xg+r.length<=Qg;){const l=this.pendingSegs.shift();r=r+"&"+yk+s+"="+l.seg+"&"+xk+s+"="+l.ts+"&"+vk+s+"="+l.d,s++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},s=setTimeout(r,Math.floor(kk)),i=()=>{clearTimeout(s),r()};this.addTag(e,i)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const s=r.readyState;(!s||s==="loaded"||s==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Ze("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ck=16384,Ek=45e3;let cl=null;typeof MozWebSocket<"u"?cl=MozWebSocket:typeof WebSocket<"u"&&(cl=WebSocket);class Ot{constructor(e,n,r,s,i,l,a){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Ui(this.connId),this.stats_=td(n),this.connURL=Ot.connectionURL_(n,l,a,s,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,s,i){const l={};return l[Wg]=ed,typeof location<"u"&&location.hostname&&zg.test(location.hostname)&&(l[Og]=Mg),n&&(l[Lg]=n),r&&(l[Fg]=r),s&&(l[Hc]=s),i&&(l[Bg]=i),Vg(e,$g,l)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,sr.set("previous_websocket_failure",!0);try{let r;k_(),this.mySock=new cl(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){Ot.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&cl!==null&&!Ot.forceDisallow_}static previouslyFailed(){return sr.isInMemoryStorage||sr.get("previous_websocket_failure")===!0}markConnectionHealthy(){sr.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=Ci(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(z(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=Oe(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=Ag(n,Ck);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(Ek))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Ot.responsesRequiredToBeHealthy=2;Ot.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[$r,Ot]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=Ot&&Ot.isAvailable();let r=n&&!Ot.previouslyFailed();if(e.webSocketOnly&&(n||mt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Ot];else{const s=this.transports_=[];for(const i of Ni.ALL_TRANSPORTS)i&&i.isAvailable()&&s.push(i);Ni.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Ni.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bk=6e4,Nk=5e3,jk=10*1024,Tk=100*1024,Wa="t",Ch="d",Pk="s",Eh="r",Ik="e",bh="o",Nh="a",jh="n",Th="p",Rk="h";class Ak{constructor(e,n,r,s,i,l,a,c,u,p){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=s,this.authToken_=i,this.onMessage_=l,this.onReady_=a,this.onDisconnect_=c,this.onKill_=u,this.lastSessionId=p,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Ui("c:"+this.id+":"),this.transportManager_=new Ni(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=ri(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>Tk?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>jk?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Wa in e){const n=e[Wa];n===Nh?this.upgradeIfSecondaryHealthy_():n===Eh?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===bh&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Os("t",e),r=Os("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Th,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Nh,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:jh,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Os("t",e),r=Os("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Os(Wa,e);if(Ch in e){const r=e[Ch];if(n===Rk){const s=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(n===jh){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===Pk?this.onConnectionShutdown_(r):n===Eh?this.onReset_(r):n===Ik?Vc("Server Error: "+r):n===bh?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Vc("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),ed!==r&&mt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),ri(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(bk))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):ri(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(Nk))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Th,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(sr.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qg{put(e,n,r,s){}merge(e,n,r,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jg{constructor(e){this.allowedEvents_=e,this.listeners_={},z(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let s=0;s<r.length;s++)r[s].callback.apply(r[s].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const s=this.getInitialEvent(e);s&&n.apply(r,s)}off(e,n,r){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let i=0;i<s.length;i++)if(s[i].callback===n&&(!r||r===s[i].context)){s.splice(i,1);return}}validateEventType_(e){z(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul extends Jg{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!_g()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new ul}getInitialEvent(e){return z(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ph=32,Ih=768;class he{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[r]=this.pieces_[s],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function ce(){return new he("")}function ne(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function $n(t){return t.pieces_.length-t.pieceNum_}function ge(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new he(t.pieces_,e)}function Zg(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function Dk(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function ey(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function ty(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new he(e,0)}function Me(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof he)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let s=0;s<r.length;s++)r[s].length>0&&n.push(r[s])}return new he(n,0)}function se(t){return t.pieceNum_>=t.pieces_.length}function rt(t,e){const n=ne(t),r=ne(e);if(n===null)return e;if(n===r)return rt(ge(t),ge(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function rd(t,e){if($n(t)!==$n(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Mt(t,e){let n=t.pieceNum_,r=e.pieceNum_;if($n(t)>$n(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class Wk{constructor(e,n){this.errorPrefix_=n,this.parts_=ey(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=zl(this.parts_[r]);ny(this)}}function Lk(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=zl(e),ny(t)}function Ok(t){const e=t.parts_.pop();t.byteLength_-=zl(e),t.parts_.length>0&&(t.byteLength_-=1)}function ny(t){if(t.byteLength_>Ih)throw new Error(t.errorPrefix_+"has a key path longer than "+Ih+" bytes ("+t.byteLength_+").");if(t.parts_.length>Ph)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Ph+") or object contains a cycle "+er(t))}function er(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd extends Jg{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new sd}getInitialEvent(e){return z(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ms=1e3,Mk=60*5*1e3,Rh=30*1e3,zk=1.3,Fk=3e4,Bk="server_kill",Ah=3;class sn extends qg{constructor(e,n,r,s,i,l,a,c){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=i,this.authTokenProvider_=l,this.appCheckTokenProvider_=a,this.authOverride_=c,this.id=sn.nextPersistentConnectionId_++,this.log_=Ui("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Ms,this.maxReconnectDelay_=Mk,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");sd.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&ul.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const s=++this.requestNumber_,i={r:s,a:e,b:n};this.log_(Oe(i)),z(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();const n=new Ml,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:l=>{const a=l.d;l.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const i=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(i),n.promise}listen(e,n,r,s){this.initConnection_();const i=e._queryIdentifier,l=e._path.toString();this.log_("Listen called for "+l+" "+i),this.listens.has(l)||this.listens.set(l,new Map),z(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),z(!this.listens.get(l).has(i),"listen() called twice for same path/queryId.");const a={onComplete:s,hashFn:n,query:e,tag:r};this.listens.get(l).set(i,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),s=n._queryIdentifier;this.log_("Listen on "+r+" for "+s);const i={p:r},l="q";e.tag&&(i.q=n._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest(l,i,a=>{const c=a.d,u=a.s;sn.warnOnListenWarnings_(c,n),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",a),u!=="ok"&&this.removeListen_(r,s),e.onComplete&&e.onComplete(u,c))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&hn(e,"w")){const r=is(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+n._queryParams.getIndex().toString()+'"',i=n._path.toString();mt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${i} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||T_(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Rh)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=j_(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,s=>{const i=s.s,l=s.d||"error";this.authToken_===e&&(i==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(i,l))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),z(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,n)}sendUnlisten_(e,n,r,s){this.log_("Unlisten on "+e+" for "+n);const i={p:e},l="n";s&&(i.q=r,i.t=s),this.sendRequest(l,i)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,s){const i={p:n,d:r};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,l=>{s&&setTimeout(()=>{s(l.s,l.d)},Math.floor(0))})}put(e,n,r,s){this.putInternal("p",e,n,r,s)}merge(e,n,r,s){this.putInternal("m",e,n,r,s)}putInternal(e,n,r,s,i){this.initConnection_();const l={p:n,d:r};i!==void 0&&(l.h=i),this.outstandingPuts_.push({action:e,request:l,onComplete:s}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,i=>{this.log_(n+" response",i),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(i.s,i.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const i=r.d;this.log_("reportStats","Error sending stats: "+i)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Oe(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):Vc("Unrecognized action received from server: "+Oe(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){z(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ms,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Ms,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>Fk&&(this.reconnectDelay_=Ms),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*zk)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+sn.nextConnectionId_++,i=this.lastSessionId;let l=!1,a=null;const c=function(){a?a.close():(l=!0,r())},u=function(d){z(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(d)};this.realtime_={close:c,sendRequest:u};const p=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,h]=await Promise.all([this.authTokenProvider_.getToken(p),this.appCheckTokenProvider_.getToken(p)]);l?Ze("getToken() completed but was canceled"):(Ze("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=h&&h.token,a=new Ak(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,_=>{mt(_+" ("+this.repoInfo_.toString()+")"),this.interrupt(Bk)},i))}catch(d){this.log_("Failed to get token: "+d),l||(this.repoInfo_.nodeAdmin&&mt(d),c())}}}interrupt(e){Ze("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Ze("Resuming connection for reason: "+e),delete this.interruptReasons_[e],ah(this.interruptReasons_)&&(this.reconnectDelay_=Ms,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(i=>Zu(i)).join("$"):r="default";const s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,n){const r=new he(e).toString();let s;if(this.listens.has(r)){const i=this.listens.get(r);s=i.get(n),i.delete(n),i.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,n){Ze("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Ah&&(this.reconnectDelay_=Rh,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Ze("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Ah&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+Tg.replace(/\./g,"-")]=1,_g()?e["framework.cordova"]=1:w_()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=ul.getInstance().currentlyOnline();return ah(this.interruptReasons_)&&e}}sn.nextPersistentConnectionId_=0;sn.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new re(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new re(os,e),s=new re(os,n);return this.compare(r,s)!==0}minPost(){return re.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vo;class ry extends Fl{static get __EMPTY_NODE(){return vo}static set __EMPTY_NODE(e){vo=e}compare(e,n){return hs(e.name,n.name)}isDefinedOn(e){throw fs("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return re.MIN}maxPost(){return new re(hr,vo)}makePost(e,n){return z(typeof e=="string","KeyIndex indexValue must always be a string."),new re(e,vo)}toString(){return".key"}}const qr=new ry;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(e,n,r,s,i=null){this.isReverse_=s,this.resultGenerator_=i,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(e=e,l=n?r(e.key,n):1,s&&(l*=-1),l<0)this.isReverse_?e=e.left:e=e.right;else if(l===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Ue{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Ue.RED,this.left=s??dt.EMPTY_NODE,this.right=i??dt.EMPTY_NODE}copy(e,n,r,s,i){return new Ue(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return i<0?s=s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s=s.copy(null,n,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return dt.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,s;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return dt.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Ue.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Ue.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Ue.RED=!0;Ue.BLACK=!1;class $k{copy(e,n,r,s,i){return this}insert(e,n,r){return new Ue(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class dt{constructor(e,n=dt.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new dt(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Ue.BLACK,null,null))}remove(e){return new dt(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ue.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,s=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return s?s.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(s=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new _o(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new _o(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new _o(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new _o(this.root_,null,this.comparator_,!0,e)}}dt.EMPTY_NODE=new $k;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uk(t,e){return hs(t.name,e.name)}function id(t,e){return hs(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yc;function Gk(t){Yc=t}const sy=function(t){return typeof t=="number"?"number:"+Dg(t):"string:"+t},iy=function(t){if(t.isLeafNode()){const e=t.val();z(typeof e=="string"||typeof e=="number"||typeof e=="object"&&hn(e,".sv"),"Priority must be a string or number.")}else z(t===Yc||t.isEmpty(),"priority of unexpected type.");z(t===Yc||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dh;class Be{constructor(e,n=Be.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,z(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),iy(this.priorityNode_)}static set __childrenNodeConstructor(e){Dh=e}static get __childrenNodeConstructor(){return Dh}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Be(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Be.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return se(e)?this:ne(e)===".priority"?this.priorityNode_:Be.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:Be.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=ne(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(z(r!==".priority"||$n(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,Be.__childrenNodeConstructor.EMPTY_NODE.updateChild(ge(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+sy(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=Dg(this.value_):e+=this.value_,this.lazyHash_=Ig(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Be.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Be.__childrenNodeConstructor?-1:(z(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,s=Be.VALUE_TYPE_ORDER.indexOf(n),i=Be.VALUE_TYPE_ORDER.indexOf(r);return z(s>=0,"Unknown leaf type: "+n),z(i>=0,"Unknown leaf type: "+r),s===i?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Be.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oy,ly;function Vk(t){oy=t}function Hk(t){ly=t}class Yk extends Fl{compare(e,n){const r=e.node.getPriority(),s=n.node.getPriority(),i=r.compareTo(s);return i===0?hs(e.name,n.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return re.MIN}maxPost(){return new re(hr,new Be("[PRIORITY-POST]",ly))}makePost(e,n){const r=oy(e);return new re(n,new Be("[PRIORITY-POST]",r))}toString(){return".priority"}}const Ie=new Yk;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kk=Math.log(2);class Qk{constructor(e){const n=i=>parseInt(Math.log(i)/Kk,10),r=i=>parseInt(Array(i+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const s=r(this.count);this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const dl=function(t,e,n,r){t.sort(e);const s=function(c,u){const p=u-c;let d,h;if(p===0)return null;if(p===1)return d=t[c],h=n?n(d):d,new Ue(h,d.node,Ue.BLACK,null,null);{const _=parseInt(p/2,10)+c,w=s(c,_),T=s(_+1,u);return d=t[_],h=n?n(d):d,new Ue(h,d.node,Ue.BLACK,w,T)}},i=function(c){let u=null,p=null,d=t.length;const h=function(w,T){const E=d-w,v=d;d-=w;const y=s(E+1,v),k=t[E],m=n?n(k):k;_(new Ue(m,k.node,T,null,y))},_=function(w){u?(u.left=w,u=w):(p=w,u=w)};for(let w=0;w<c.count;++w){const T=c.nextBitIsOne(),E=Math.pow(2,c.count-(w+1));T?h(E,Ue.BLACK):(h(E,Ue.BLACK),h(E,Ue.RED))}return p},l=new Qk(t.length),a=i(l);return new dt(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let La;const Tr={};class nn{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return z(Tr&&Ie,"ChildrenNode.ts has not been loaded"),La=La||new nn({".priority":Tr},{".priority":Ie}),La}get(e){const n=is(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof dt?n:null}hasIndex(e){return hn(this.indexSet_,e.toString())}addIndex(e,n){z(e!==qr,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let s=!1;const i=n.getIterator(re.Wrap);let l=i.getNext();for(;l;)s=s||e.isDefinedOn(l.node),r.push(l),l=i.getNext();let a;s?a=dl(r,e.getCompare()):a=Tr;const c=e.toString(),u=Object.assign({},this.indexSet_);u[c]=e;const p=Object.assign({},this.indexes_);return p[c]=a,new nn(p,u)}addToIndexes(e,n){const r=ol(this.indexes_,(s,i)=>{const l=is(this.indexSet_,i);if(z(l,"Missing index implementation for "+i),s===Tr)if(l.isDefinedOn(e.node)){const a=[],c=n.getIterator(re.Wrap);let u=c.getNext();for(;u;)u.name!==e.name&&a.push(u),u=c.getNext();return a.push(e),dl(a,l.getCompare())}else return Tr;else{const a=n.get(e.name);let c=s;return a&&(c=c.remove(new re(e.name,a))),c.insert(e,e.node)}});return new nn(r,this.indexSet_)}removeFromIndexes(e,n){const r=ol(this.indexes_,s=>{if(s===Tr)return s;{const i=n.get(e.name);return i?s.remove(new re(e.name,i)):s}});return new nn(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zs;class Y{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&iy(this.priorityNode_),this.children_.isEmpty()&&z(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return zs||(zs=new Y(new dt(id),null,nn.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||zs}updatePriority(e){return this.children_.isEmpty()?this:new Y(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?zs:n}}getChild(e){const n=ne(e);return n===null?this:this.getImmediateChild(n).getChild(ge(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(z(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new re(e,n);let s,i;n.isEmpty()?(s=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,n),i=this.indexMap_.addToIndexes(r,this.children_));const l=s.isEmpty()?zs:this.priorityNode_;return new Y(s,l,i)}}updateChild(e,n){const r=ne(e);if(r===null)return n;{z(ne(e)!==".priority"||$n(e)===1,".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(ge(e),n);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,s=0,i=!0;if(this.forEachChild(Ie,(l,a)=>{n[l]=a.val(e),r++,i&&Y.INTEGER_REGEXP_.test(l)?s=Math.max(s,Number(l)):i=!1}),!e&&i&&s<2*r){const l=[];for(const a in n)l[a]=n[a];return l}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+sy(this.getPriority().val())+":"),this.forEachChild(Ie,(n,r)=>{const s=r.hash();s!==""&&(e+=":"+n+":"+s)}),this.lazyHash_=e===""?"":Ig(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const s=this.resolveIndex_(r);if(s){const i=s.getPredecessorKey(new re(e,n));return i?i.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new re(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new re(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>n(s.name,s.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,re.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)<0;)s.getNext(),i=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,re.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)>0;)s.getNext(),i=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Gi?-1:0}withIndex(e){if(e===qr||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new Y(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===qr||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(Ie),s=n.getIterator(Ie);let i=r.getNext(),l=s.getNext();for(;i&&l;){if(i.name!==l.name||!i.node.equals(l.node))return!1;i=r.getNext(),l=s.getNext()}return i===null&&l===null}else return!1;else return!1}}resolveIndex_(e){return e===qr?null:this.indexMap_.get(e.toString())}}Y.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class Xk extends Y{constructor(){super(new dt(id),Y.EMPTY_NODE,nn.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Y.EMPTY_NODE}isEmpty(){return!1}}const Gi=new Xk;Object.defineProperties(re,{MIN:{value:new re(os,Y.EMPTY_NODE)},MAX:{value:new re(hr,Gi)}});ry.__EMPTY_NODE=Y.EMPTY_NODE;Be.__childrenNodeConstructor=Y;Gk(Gi);Hk(Gi);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qk=!0;function Ge(t,e=null){if(t===null)return Y.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),z(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new Be(n,Ge(e))}if(!(t instanceof Array)&&qk){const n=[];let r=!1;if(gt(t,(l,a)=>{if(l.substring(0,1)!=="."){const c=Ge(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new re(l,c)))}}),n.length===0)return Y.EMPTY_NODE;const i=dl(n,Uk,l=>l.name,id);if(r){const l=dl(n,Ie.getCompare());return new Y(i,Ge(e),new nn({".priority":l},{".priority":Ie}))}else return new Y(i,Ge(e),nn.Default)}else{let n=Y.EMPTY_NODE;return gt(t,(r,s)=>{if(hn(t,r)&&r.substring(0,1)!=="."){const i=Ge(s);(i.isLeafNode()||!i.isEmpty())&&(n=n.updateImmediateChild(r,i))}}),n.updatePriority(Ge(e))}}Vk(Ge);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jk extends Fl{constructor(e){super(),this.indexPath_=e,z(!se(e)&&ne(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),s=this.extractChild(n.node),i=r.compareTo(s);return i===0?hs(e.name,n.name):i}makePost(e,n){const r=Ge(e),s=Y.EMPTY_NODE.updateChild(this.indexPath_,r);return new re(n,s)}maxPost(){const e=Y.EMPTY_NODE.updateChild(this.indexPath_,Gi);return new re(hr,e)}toString(){return ey(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zk extends Fl{compare(e,n){const r=e.node.compareTo(n.node);return r===0?hs(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return re.MIN}maxPost(){return re.MAX}makePost(e,n){const r=Ge(e);return new re(n,r)}toString(){return".value"}}const e1=new Zk;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ay(t){return{type:"value",snapshotNode:t}}function ls(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function ji(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Ti(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function t1(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(e){this.index_=e}updateChild(e,n,r,s,i,l){z(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(s).equals(r.getChild(s))&&a.isEmpty()===r.isEmpty()||(l!=null&&(r.isEmpty()?e.hasChild(n)?l.trackChildChange(ji(n,a)):z(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?l.trackChildChange(ls(n,r)):l.trackChildChange(Ti(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(Ie,(s,i)=>{n.hasChild(s)||r.trackChildChange(ji(s,i))}),n.isLeafNode()||n.forEachChild(Ie,(s,i)=>{if(e.hasChild(s)){const l=e.getImmediateChild(s);l.equals(i)||r.trackChildChange(Ti(s,i,l))}else r.trackChildChange(ls(s,i))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?Y.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(e){this.indexedFilter_=new od(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Pi.getStartPost_(e),this.endPost_=Pi.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,s,i,l){return this.matches(new re(n,r))||(r=Y.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,s,i,l)}updateFullNode(e,n,r){n.isLeafNode()&&(n=Y.EMPTY_NODE);let s=n.withIndex(this.index_);s=s.updatePriority(Y.EMPTY_NODE);const i=this;return n.forEachChild(Ie,(l,a)=>{i.matches(new re(l,a))||(s=s.updateImmediateChild(l,Y.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Pi(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,s,i,l){return this.rangedFilter_.matches(new re(n,r))||(r=Y.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,s,i,l):this.fullLimitUpdateChild_(e,n,r,i,l)}updateFullNode(e,n,r){let s;if(n.isLeafNode()||n.isEmpty())s=Y.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){s=Y.EMPTY_NODE.withIndex(this.index_);let i;this.reverse_?i=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):i=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let l=0;for(;i.hasNext()&&l<this.limit_;){const a=i.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))s=s.updateImmediateChild(a.name,a.node),l++;else break;else continue}}else{s=n.withIndex(this.index_),s=s.updatePriority(Y.EMPTY_NODE);let i;this.reverse_?i=s.getReverseIterator(this.index_):i=s.getIterator(this.index_);let l=0;for(;i.hasNext();){const a=i.getNext();l<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?l++:s=s.updateImmediateChild(a.name,Y.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,s,i){let l;if(this.reverse_){const d=this.index_.getCompare();l=(h,_)=>d(_,h)}else l=this.index_.getCompare();const a=e;z(a.numChildren()===this.limit_,"");const c=new re(n,r),u=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),p=this.rangedFilter_.matches(c);if(a.hasChild(n)){const d=a.getImmediateChild(n);let h=s.getChildAfterChild(this.index_,u,this.reverse_);for(;h!=null&&(h.name===n||a.hasChild(h.name));)h=s.getChildAfterChild(this.index_,h,this.reverse_);const _=h==null?1:l(h,c);if(p&&!r.isEmpty()&&_>=0)return i!=null&&i.trackChildChange(Ti(n,r,d)),a.updateImmediateChild(n,r);{i!=null&&i.trackChildChange(ji(n,d));const T=a.updateImmediateChild(n,Y.EMPTY_NODE);return h!=null&&this.rangedFilter_.matches(h)?(i!=null&&i.trackChildChange(ls(h.name,h.node)),T.updateImmediateChild(h.name,h.node)):T}}else return r.isEmpty()?e:p&&l(u,c)>=0?(i!=null&&(i.trackChildChange(ji(u.name,u.node)),i.trackChildChange(ls(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(u.name,Y.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ie}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return z(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return z(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:os}hasEnd(){return this.endSet_}getIndexEndValue(){return z(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return z(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:hr}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return z(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Ie}copy(){const e=new ld;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function r1(t){return t.loadsAllData()?new od(t.getIndex()):t.hasLimit()?new n1(t):new Pi(t)}function Wh(t){const e={};if(t.isDefault())return e;let n;if(t.index_===Ie?n="$priority":t.index_===e1?n="$value":t.index_===qr?n="$key":(z(t.index_ instanceof Jk,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Oe(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=Oe(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+Oe(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=Oe(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+Oe(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function Lh(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Ie&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl extends qg{constructor(e,n,r,s){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=s,this.log_=Ui("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(z(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,s){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const l=fl.getListenId_(e,r),a={};this.listens_[l]=a;const c=Wh(e._queryParams);this.restRequest_(i+".json",c,(u,p)=>{let d=p;if(u===404&&(d=null,u=null),u===null&&this.onDataUpdate_(i,d,!1,r),is(this.listens_,l)===a){let h;u?u===401?h="permission_denied":h="rest_error:"+u:h="ok",s(h,null)}})}unlisten(e,n){const r=fl.getListenId_(e,n);delete this.listens_[r]}get(e){const n=Wh(e._queryParams),r=e._path.toString(),s=new Ml;return this.restRequest_(r+".json",n,(i,l)=>{let a=l;i===404&&(a=null,i=null),i===null?(this.onDataUpdate_(r,a,!1,null),s.resolve(a)):s.reject(new Error(a))}),s.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,i])=>{s&&s.accessToken&&(n.auth=s.accessToken),i&&i.token&&(n.ac=i.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+P_(n);this.log_("Sending REST request for "+l);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+l+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=Ci(a.responseText)}catch{mt("Failed to parse JSON response for "+l+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&mt("Got unsuccessful REST response for "+l+" Status: "+a.status),r(a.status);r=null}},a.open("GET",l,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1{constructor(){this.rootNode_=Y.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hl(){return{value:null,children:new Map}}function cy(t,e,n){if(se(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=ne(e);t.children.has(r)||t.children.set(r,hl());const s=t.children.get(r);e=ge(e),cy(s,e,n)}}function Kc(t,e,n){t.value!==null?n(e,t.value):i1(t,(r,s)=>{const i=new he(e.toString()+"/"+r);Kc(s,i,n)})}function i1(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&gt(this.last_,(r,s)=>{n[r]=n[r]-s}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oh=10*1e3,l1=30*1e3,a1=5*60*1e3;class c1{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new o1(e);const r=Oh+(l1-Oh)*Math.random();ri(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;gt(e,(s,i)=>{i>0&&hn(this.statsToReport_,s)&&(n[s]=i,r=!0)}),r&&this.server_.reportStats(n),ri(this.reportStats_.bind(this),Math.floor(Math.random()*2*a1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zt;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(zt||(zt={}));function uy(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function ad(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function cd(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=zt.ACK_USER_WRITE,this.source=uy()}operationForChild(e){if(se(this.path)){if(this.affectedTree.value!=null)return z(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new he(e));return new pl(ce(),n,this.revert)}}else return z(ne(this.path)===e,"operationForChild called for unrelated child."),new pl(ge(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(e,n){this.source=e,this.path=n,this.type=zt.LISTEN_COMPLETE}operationForChild(e){return se(this.path)?new Ii(this.source,ce()):new Ii(this.source,ge(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=zt.OVERWRITE}operationForChild(e){return se(this.path)?new pr(this.source,ce(),this.snap.getImmediateChild(e)):new pr(this.source,ge(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=zt.MERGE}operationForChild(e){if(se(this.path)){const n=this.children.subtree(new he(e));return n.isEmpty()?null:n.value?new pr(this.source,ce(),n.value):new Ri(this.source,ce(),n)}else return z(ne(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Ri(this.source,ge(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(se(e))return this.isFullyInitialized()&&!this.filtered_;const n=ne(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u1{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function d1(t,e,n,r){const s=[],i=[];return e.forEach(l=>{l.type==="child_changed"&&t.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&i.push(t1(l.childName,l.snapshotNode))}),Fs(t,s,"child_removed",e,r,n),Fs(t,s,"child_added",e,r,n),Fs(t,s,"child_moved",i,r,n),Fs(t,s,"child_changed",e,r,n),Fs(t,s,"value",e,r,n),s}function Fs(t,e,n,r,s,i){const l=r.filter(a=>a.type===n);l.sort((a,c)=>h1(t,a,c)),l.forEach(a=>{const c=f1(t,a,i);s.forEach(u=>{u.respondsTo(a.type)&&e.push(u.createEvent(c,t.query_))})})}function f1(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function h1(t,e,n){if(e.childName==null||n.childName==null)throw fs("Should only compare child_ events.");const r=new re(e.childName,e.snapshotNode),s=new re(n.childName,n.snapshotNode);return t.index_.compare(r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bl(t,e){return{eventCache:t,serverCache:e}}function si(t,e,n,r){return Bl(new Un(e,n,r),t.serverCache)}function dy(t,e,n,r){return Bl(t.eventCache,new Un(e,n,r))}function ml(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function mr(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Oa;const p1=()=>(Oa||(Oa=new dt(Zw)),Oa);class _e{constructor(e,n=p1()){this.value=e,this.children=n}static fromObject(e){let n=new _e(null);return gt(e,(r,s)=>{n=n.set(new he(r),s)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:ce(),value:this.value};if(se(e))return null;{const r=ne(e),s=this.children.get(r);if(s!==null){const i=s.findRootMostMatchingPathAndValue(ge(e),n);return i!=null?{path:Me(new he(r),i.path),value:i.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(se(e))return this;{const n=ne(e),r=this.children.get(n);return r!==null?r.subtree(ge(e)):new _e(null)}}set(e,n){if(se(e))return new _e(n,this.children);{const r=ne(e),i=(this.children.get(r)||new _e(null)).set(ge(e),n),l=this.children.insert(r,i);return new _e(this.value,l)}}remove(e){if(se(e))return this.children.isEmpty()?new _e(null):new _e(null,this.children);{const n=ne(e),r=this.children.get(n);if(r){const s=r.remove(ge(e));let i;return s.isEmpty()?i=this.children.remove(n):i=this.children.insert(n,s),this.value===null&&i.isEmpty()?new _e(null):new _e(this.value,i)}else return this}}get(e){if(se(e))return this.value;{const n=ne(e),r=this.children.get(n);return r?r.get(ge(e)):null}}setTree(e,n){if(se(e))return n;{const r=ne(e),i=(this.children.get(r)||new _e(null)).setTree(ge(e),n);let l;return i.isEmpty()?l=this.children.remove(r):l=this.children.insert(r,i),new _e(this.value,l)}}fold(e){return this.fold_(ce(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((s,i)=>{r[s]=i.fold_(Me(e,s),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,ce(),n)}findOnPath_(e,n,r){const s=this.value?r(n,this.value):!1;if(s)return s;if(se(e))return null;{const i=ne(e),l=this.children.get(i);return l?l.findOnPath_(ge(e),Me(n,i),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,ce(),n)}foreachOnPath_(e,n,r){if(se(e))return this;{this.value&&r(n,this.value);const s=ne(e),i=this.children.get(s);return i?i.foreachOnPath_(ge(e),Me(n,s),r):new _e(null)}}foreach(e){this.foreach_(ce(),e)}foreach_(e,n){this.children.inorderTraversal((r,s)=>{s.foreach_(Me(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this.writeTree_=e}static empty(){return new $t(new _e(null))}}function ii(t,e,n){if(se(e))return new $t(new _e(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const s=r.path;let i=r.value;const l=rt(s,e);return i=i.updateChild(l,n),new $t(t.writeTree_.set(s,i))}else{const s=new _e(n),i=t.writeTree_.setTree(e,s);return new $t(i)}}}function Mh(t,e,n){let r=t;return gt(n,(s,i)=>{r=ii(r,Me(e,s),i)}),r}function zh(t,e){if(se(e))return $t.empty();{const n=t.writeTree_.setTree(e,new _e(null));return new $t(n)}}function Qc(t,e){return wr(t,e)!=null}function wr(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(rt(n.path,e)):null}function Fh(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Ie,(r,s)=>{e.push(new re(r,s))}):t.writeTree_.children.inorderTraversal((r,s)=>{s.value!=null&&e.push(new re(r,s.value))}),e}function Mn(t,e){if(se(e))return t;{const n=wr(t,e);return n!=null?new $t(new _e(n)):new $t(t.writeTree_.subtree(e))}}function Xc(t){return t.writeTree_.isEmpty()}function as(t,e){return fy(ce(),t.writeTree_,e)}function fy(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((s,i)=>{s===".priority"?(z(i.value!==null,"Priority writes must always be leaf nodes"),r=i.value):n=fy(Me(t,s),i,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(Me(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $l(t,e){return gy(e,t)}function m1(t,e,n,r,s){z(r>t.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:s}),s&&(t.visibleWrites=ii(t.visibleWrites,e,n)),t.lastWriteId=r}function g1(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function y1(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);z(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let s=r.visible,i=!1,l=t.allWrites.length-1;for(;s&&l>=0;){const a=t.allWrites[l];a.visible&&(l>=n&&x1(a,r.path)?s=!1:Mt(r.path,a.path)&&(i=!0)),l--}if(s){if(i)return v1(t),!0;if(r.snap)t.visibleWrites=zh(t.visibleWrites,r.path);else{const a=r.children;gt(a,c=>{t.visibleWrites=zh(t.visibleWrites,Me(r.path,c))})}return!0}else return!1}function x1(t,e){if(t.snap)return Mt(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Mt(Me(t.path,n),e))return!0;return!1}function v1(t){t.visibleWrites=hy(t.allWrites,_1,ce()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function _1(t){return t.visible}function hy(t,e,n){let r=$t.empty();for(let s=0;s<t.length;++s){const i=t[s];if(e(i)){const l=i.path;let a;if(i.snap)Mt(n,l)?(a=rt(n,l),r=ii(r,a,i.snap)):Mt(l,n)&&(a=rt(l,n),r=ii(r,ce(),i.snap.getChild(a)));else if(i.children){if(Mt(n,l))a=rt(n,l),r=Mh(r,a,i.children);else if(Mt(l,n))if(a=rt(l,n),se(a))r=Mh(r,ce(),i.children);else{const c=is(i.children,ne(a));if(c){const u=c.getChild(ge(a));r=ii(r,ce(),u)}}}else throw fs("WriteRecord should have .snap or .children")}}return r}function py(t,e,n,r,s){if(!r&&!s){const i=wr(t.visibleWrites,e);if(i!=null)return i;{const l=Mn(t.visibleWrites,e);if(Xc(l))return n;if(n==null&&!Qc(l,ce()))return null;{const a=n||Y.EMPTY_NODE;return as(l,a)}}}else{const i=Mn(t.visibleWrites,e);if(!s&&Xc(i))return n;if(!s&&n==null&&!Qc(i,ce()))return null;{const l=function(u){return(u.visible||s)&&(!r||!~r.indexOf(u.writeId))&&(Mt(u.path,e)||Mt(e,u.path))},a=hy(t.allWrites,l,e),c=n||Y.EMPTY_NODE;return as(a,c)}}}function w1(t,e,n){let r=Y.EMPTY_NODE;const s=wr(t.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(Ie,(i,l)=>{r=r.updateImmediateChild(i,l)}),r;if(n){const i=Mn(t.visibleWrites,e);return n.forEachChild(Ie,(l,a)=>{const c=as(Mn(i,new he(l)),a);r=r.updateImmediateChild(l,c)}),Fh(i).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}else{const i=Mn(t.visibleWrites,e);return Fh(i).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}}function k1(t,e,n,r,s){z(r||s,"Either existingEventSnap or existingServerSnap must exist");const i=Me(e,n);if(Qc(t.visibleWrites,i))return null;{const l=Mn(t.visibleWrites,i);return Xc(l)?s.getChild(n):as(l,s.getChild(n))}}function S1(t,e,n,r){const s=Me(e,n),i=wr(t.visibleWrites,s);if(i!=null)return i;if(r.isCompleteForChild(n)){const l=Mn(t.visibleWrites,s);return as(l,r.getNode().getImmediateChild(n))}else return null}function C1(t,e){return wr(t.visibleWrites,e)}function E1(t,e,n,r,s,i,l){let a;const c=Mn(t.visibleWrites,e),u=wr(c,ce());if(u!=null)a=u;else if(n!=null)a=as(c,n);else return[];if(a=a.withIndex(l),!a.isEmpty()&&!a.isLeafNode()){const p=[],d=l.getCompare(),h=i?a.getReverseIteratorFrom(r,l):a.getIteratorFrom(r,l);let _=h.getNext();for(;_&&p.length<s;)d(_,r)!==0&&p.push(_),_=h.getNext();return p}else return[]}function b1(){return{visibleWrites:$t.empty(),allWrites:[],lastWriteId:-1}}function gl(t,e,n,r){return py(t.writeTree,t.treePath,e,n,r)}function ud(t,e){return w1(t.writeTree,t.treePath,e)}function Bh(t,e,n,r){return k1(t.writeTree,t.treePath,e,n,r)}function yl(t,e){return C1(t.writeTree,Me(t.treePath,e))}function N1(t,e,n,r,s,i){return E1(t.writeTree,t.treePath,e,n,r,s,i)}function dd(t,e,n){return S1(t.writeTree,t.treePath,e,n)}function my(t,e){return gy(Me(t.treePath,e),t.writeTree)}function gy(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j1{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;z(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),z(r!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(r);if(s){const i=s.type;if(n==="child_added"&&i==="child_removed")this.changeMap.set(r,Ti(r,e.snapshotNode,s.snapshotNode));else if(n==="child_removed"&&i==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&i==="child_changed")this.changeMap.set(r,ji(r,s.oldSnap));else if(n==="child_changed"&&i==="child_added")this.changeMap.set(r,ls(r,e.snapshotNode));else if(n==="child_changed"&&i==="child_changed")this.changeMap.set(r,Ti(r,e.snapshotNode,s.oldSnap));else throw fs("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const yy=new T1;class fd{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new Un(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return dd(this.writes_,e,r)}}getChildAfterChild(e,n,r){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:mr(this.viewCache_),i=N1(this.writes_,s,n,1,r,e);return i.length===0?null:i[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P1(t){return{filter:t}}function I1(t,e){z(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),z(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function R1(t,e,n,r,s){const i=new j1;let l,a;if(n.type===zt.OVERWRITE){const u=n;u.source.fromUser?l=qc(t,e,u.path,u.snap,r,s,i):(z(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered()&&!se(u.path),l=xl(t,e,u.path,u.snap,r,s,a,i))}else if(n.type===zt.MERGE){const u=n;u.source.fromUser?l=D1(t,e,u.path,u.children,r,s,i):(z(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered(),l=Jc(t,e,u.path,u.children,r,s,a,i))}else if(n.type===zt.ACK_USER_WRITE){const u=n;u.revert?l=O1(t,e,u.path,r,s,i):l=W1(t,e,u.path,u.affectedTree,r,s,i)}else if(n.type===zt.LISTEN_COMPLETE)l=L1(t,e,n.path,r,i);else throw fs("Unknown operation type: "+n.type);const c=i.getChanges();return A1(e,l,c),{viewCache:l,changes:c}}function A1(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const s=r.getNode().isLeafNode()||r.getNode().isEmpty(),i=ml(t);(n.length>0||!t.eventCache.isFullyInitialized()||s&&!r.getNode().equals(i)||!r.getNode().getPriority().equals(i.getPriority()))&&n.push(ay(ml(e)))}}function xy(t,e,n,r,s,i){const l=e.eventCache;if(yl(r,n)!=null)return e;{let a,c;if(se(n))if(z(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const u=mr(e),p=u instanceof Y?u:Y.EMPTY_NODE,d=ud(r,p);a=t.filter.updateFullNode(e.eventCache.getNode(),d,i)}else{const u=gl(r,mr(e));a=t.filter.updateFullNode(e.eventCache.getNode(),u,i)}else{const u=ne(n);if(u===".priority"){z($n(n)===1,"Can't have a priority with additional path components");const p=l.getNode();c=e.serverCache.getNode();const d=Bh(r,n,p,c);d!=null?a=t.filter.updatePriority(p,d):a=l.getNode()}else{const p=ge(n);let d;if(l.isCompleteForChild(u)){c=e.serverCache.getNode();const h=Bh(r,n,l.getNode(),c);h!=null?d=l.getNode().getImmediateChild(u).updateChild(p,h):d=l.getNode().getImmediateChild(u)}else d=dd(r,u,e.serverCache);d!=null?a=t.filter.updateChild(l.getNode(),u,d,p,s,i):a=l.getNode()}}return si(e,a,l.isFullyInitialized()||se(n),t.filter.filtersNodes())}}function xl(t,e,n,r,s,i,l,a){const c=e.serverCache;let u;const p=l?t.filter:t.filter.getIndexedFilter();if(se(n))u=p.updateFullNode(c.getNode(),r,null);else if(p.filtersNodes()&&!c.isFiltered()){const _=c.getNode().updateChild(n,r);u=p.updateFullNode(c.getNode(),_,null)}else{const _=ne(n);if(!c.isCompleteForPath(n)&&$n(n)>1)return e;const w=ge(n),E=c.getNode().getImmediateChild(_).updateChild(w,r);_===".priority"?u=p.updatePriority(c.getNode(),E):u=p.updateChild(c.getNode(),_,E,w,yy,null)}const d=dy(e,u,c.isFullyInitialized()||se(n),p.filtersNodes()),h=new fd(s,d,i);return xy(t,d,n,s,h,a)}function qc(t,e,n,r,s,i,l){const a=e.eventCache;let c,u;const p=new fd(s,e,i);if(se(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,l),c=si(e,u,!0,t.filter.filtersNodes());else{const d=ne(n);if(d===".priority")u=t.filter.updatePriority(e.eventCache.getNode(),r),c=si(e,u,a.isFullyInitialized(),a.isFiltered());else{const h=ge(n),_=a.getNode().getImmediateChild(d);let w;if(se(h))w=r;else{const T=p.getCompleteChild(d);T!=null?Zg(h)===".priority"&&T.getChild(ty(h)).isEmpty()?w=T:w=T.updateChild(h,r):w=Y.EMPTY_NODE}if(_.equals(w))c=e;else{const T=t.filter.updateChild(a.getNode(),d,w,h,p,l);c=si(e,T,a.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function $h(t,e){return t.eventCache.isCompleteForChild(e)}function D1(t,e,n,r,s,i,l){let a=e;return r.foreach((c,u)=>{const p=Me(n,c);$h(e,ne(p))&&(a=qc(t,a,p,u,s,i,l))}),r.foreach((c,u)=>{const p=Me(n,c);$h(e,ne(p))||(a=qc(t,a,p,u,s,i,l))}),a}function Uh(t,e,n){return n.foreach((r,s)=>{e=e.updateChild(r,s)}),e}function Jc(t,e,n,r,s,i,l,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,u;se(n)?u=r:u=new _e(null).setTree(n,r);const p=e.serverCache.getNode();return u.children.inorderTraversal((d,h)=>{if(p.hasChild(d)){const _=e.serverCache.getNode().getImmediateChild(d),w=Uh(t,_,h);c=xl(t,c,new he(d),w,s,i,l,a)}}),u.children.inorderTraversal((d,h)=>{const _=!e.serverCache.isCompleteForChild(d)&&h.value===null;if(!p.hasChild(d)&&!_){const w=e.serverCache.getNode().getImmediateChild(d),T=Uh(t,w,h);c=xl(t,c,new he(d),T,s,i,l,a)}}),c}function W1(t,e,n,r,s,i,l){if(yl(s,n)!=null)return e;const a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(se(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return xl(t,e,n,c.getNode().getChild(n),s,i,a,l);if(se(n)){let u=new _e(null);return c.getNode().forEachChild(qr,(p,d)=>{u=u.set(new he(p),d)}),Jc(t,e,n,u,s,i,a,l)}else return e}else{let u=new _e(null);return r.foreach((p,d)=>{const h=Me(n,p);c.isCompleteForPath(h)&&(u=u.set(p,c.getNode().getChild(h)))}),Jc(t,e,n,u,s,i,a,l)}}function L1(t,e,n,r,s){const i=e.serverCache,l=dy(e,i.getNode(),i.isFullyInitialized()||se(n),i.isFiltered());return xy(t,l,n,r,yy,s)}function O1(t,e,n,r,s,i){let l;if(yl(r,n)!=null)return e;{const a=new fd(r,e,s),c=e.eventCache.getNode();let u;if(se(n)||ne(n)===".priority"){let p;if(e.serverCache.isFullyInitialized())p=gl(r,mr(e));else{const d=e.serverCache.getNode();z(d instanceof Y,"serverChildren would be complete if leaf node"),p=ud(r,d)}p=p,u=t.filter.updateFullNode(c,p,i)}else{const p=ne(n);let d=dd(r,p,e.serverCache);d==null&&e.serverCache.isCompleteForChild(p)&&(d=c.getImmediateChild(p)),d!=null?u=t.filter.updateChild(c,p,d,ge(n),a,i):e.eventCache.getNode().hasChild(p)?u=t.filter.updateChild(c,p,Y.EMPTY_NODE,ge(n),a,i):u=c,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=gl(r,mr(e)),l.isLeafNode()&&(u=t.filter.updateFullNode(u,l,i)))}return l=e.serverCache.isFullyInitialized()||yl(r,ce())!=null,si(e,u,l,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,s=new od(r.getIndex()),i=r1(r);this.processor_=P1(i);const l=n.serverCache,a=n.eventCache,c=s.updateFullNode(Y.EMPTY_NODE,l.getNode(),null),u=i.updateFullNode(Y.EMPTY_NODE,a.getNode(),null),p=new Un(c,l.isFullyInitialized(),s.filtersNodes()),d=new Un(u,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=Bl(d,p),this.eventGenerator_=new u1(this.query_)}get query(){return this.query_}}function z1(t){return t.viewCache_.serverCache.getNode()}function F1(t){return ml(t.viewCache_)}function B1(t,e){const n=mr(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!se(e)&&!n.getImmediateChild(ne(e)).isEmpty())?n.getChild(e):null}function Gh(t){return t.eventRegistrations_.length===0}function $1(t,e){t.eventRegistrations_.push(e)}function Vh(t,e,n){const r=[];if(n){z(e==null,"A cancel should cancel all event registrations.");const s=t.query._path;t.eventRegistrations_.forEach(i=>{const l=i.createCancelEvent(n,s);l&&r.push(l)})}if(e){let s=[];for(let i=0;i<t.eventRegistrations_.length;++i){const l=t.eventRegistrations_[i];if(!l.matches(e))s.push(l);else if(e.hasAnyCallback()){s=s.concat(t.eventRegistrations_.slice(i+1));break}}t.eventRegistrations_=s}else t.eventRegistrations_=[];return r}function Hh(t,e,n,r){e.type===zt.MERGE&&e.source.queryId!==null&&(z(mr(t.viewCache_),"We should always have a full cache before handling merges"),z(ml(t.viewCache_),"Missing event cache, even though we have a server cache"));const s=t.viewCache_,i=R1(t.processor_,s,e,n,r);return I1(t.processor_,i.viewCache),z(i.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=i.viewCache,vy(t,i.changes,i.viewCache.eventCache.getNode(),null)}function U1(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Ie,(i,l)=>{r.push(ls(i,l))}),n.isFullyInitialized()&&r.push(ay(n.getNode())),vy(t,r,n.getNode(),e)}function vy(t,e,n,r){const s=r?[r]:t.eventRegistrations_;return d1(t.eventGenerator_,e,n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vl;class _y{constructor(){this.views=new Map}}function G1(t){z(!vl,"__referenceConstructor has already been defined"),vl=t}function V1(){return z(vl,"Reference.ts has not been loaded"),vl}function H1(t){return t.views.size===0}function hd(t,e,n,r){const s=e.source.queryId;if(s!==null){const i=t.views.get(s);return z(i!=null,"SyncTree gave us an op for an invalid query."),Hh(i,e,n,r)}else{let i=[];for(const l of t.views.values())i=i.concat(Hh(l,e,n,r));return i}}function wy(t,e,n,r,s){const i=e._queryIdentifier,l=t.views.get(i);if(!l){let a=gl(n,s?r:null),c=!1;a?c=!0:r instanceof Y?(a=ud(n,r),c=!1):(a=Y.EMPTY_NODE,c=!1);const u=Bl(new Un(a,c,!1),new Un(r,s,!1));return new M1(e,u)}return l}function Y1(t,e,n,r,s,i){const l=wy(t,e,r,s,i);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,l),$1(l,n),U1(l,n)}function K1(t,e,n,r){const s=e._queryIdentifier,i=[];let l=[];const a=Gn(t);if(s==="default")for(const[c,u]of t.views.entries())l=l.concat(Vh(u,n,r)),Gh(u)&&(t.views.delete(c),u.query._queryParams.loadsAllData()||i.push(u.query));else{const c=t.views.get(s);c&&(l=l.concat(Vh(c,n,r)),Gh(c)&&(t.views.delete(s),c.query._queryParams.loadsAllData()||i.push(c.query)))}return a&&!Gn(t)&&i.push(new(V1())(e._repo,e._path)),{removed:i,events:l}}function ky(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function zn(t,e){let n=null;for(const r of t.views.values())n=n||B1(r,e);return n}function Sy(t,e){if(e._queryParams.loadsAllData())return Ul(t);{const r=e._queryIdentifier;return t.views.get(r)}}function Cy(t,e){return Sy(t,e)!=null}function Gn(t){return Ul(t)!=null}function Ul(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _l;function Q1(t){z(!_l,"__referenceConstructor has already been defined"),_l=t}function X1(){return z(_l,"Reference.ts has not been loaded"),_l}let q1=1;class Yh{constructor(e){this.listenProvider_=e,this.syncPointTree_=new _e(null),this.pendingWriteTree_=b1(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Ey(t,e,n,r,s){return m1(t.pendingWriteTree_,e,n,r,s),s?Hi(t,new pr(uy(),e,n)):[]}function ir(t,e,n=!1){const r=g1(t.pendingWriteTree_,e);if(y1(t.pendingWriteTree_,e)){let i=new _e(null);return r.snap!=null?i=i.set(ce(),!0):gt(r.children,l=>{i=i.set(new he(l),!0)}),Hi(t,new pl(r.path,i,n))}else return[]}function Vi(t,e,n){return Hi(t,new pr(ad(),e,n))}function J1(t,e,n){const r=_e.fromObject(n);return Hi(t,new Ri(ad(),e,r))}function Z1(t,e){return Hi(t,new Ii(ad(),e))}function eS(t,e,n){const r=md(t,n);if(r){const s=gd(r),i=s.path,l=s.queryId,a=rt(i,e),c=new Ii(cd(l),a);return yd(t,i,c)}else return[]}function wl(t,e,n,r,s=!1){const i=e._path,l=t.syncPointTree_.get(i);let a=[];if(l&&(e._queryIdentifier==="default"||Cy(l,e))){const c=K1(l,e,n,r);H1(l)&&(t.syncPointTree_=t.syncPointTree_.remove(i));const u=c.removed;if(a=c.events,!s){const p=u.findIndex(h=>h._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(i,(h,_)=>Gn(_));if(p&&!d){const h=t.syncPointTree_.subtree(i);if(!h.isEmpty()){const _=rS(h);for(let w=0;w<_.length;++w){const T=_[w],E=T.query,v=Ty(t,T);t.listenProvider_.startListening(oi(E),Ai(t,E),v.hashFn,v.onComplete)}}}!d&&u.length>0&&!r&&(p?t.listenProvider_.stopListening(oi(e),null):u.forEach(h=>{const _=t.queryToTagMap.get(Gl(h));t.listenProvider_.stopListening(oi(h),_)}))}sS(t,u)}return a}function by(t,e,n,r){const s=md(t,r);if(s!=null){const i=gd(s),l=i.path,a=i.queryId,c=rt(l,e),u=new pr(cd(a),c,n);return yd(t,l,u)}else return[]}function tS(t,e,n,r){const s=md(t,r);if(s){const i=gd(s),l=i.path,a=i.queryId,c=rt(l,e),u=_e.fromObject(n),p=new Ri(cd(a),c,u);return yd(t,l,p)}else return[]}function Zc(t,e,n,r=!1){const s=e._path;let i=null,l=!1;t.syncPointTree_.foreachOnPath(s,(h,_)=>{const w=rt(h,s);i=i||zn(_,w),l=l||Gn(_)});let a=t.syncPointTree_.get(s);a?(l=l||Gn(a),i=i||zn(a,ce())):(a=new _y,t.syncPointTree_=t.syncPointTree_.set(s,a));let c;i!=null?c=!0:(c=!1,i=Y.EMPTY_NODE,t.syncPointTree_.subtree(s).foreachChild((_,w)=>{const T=zn(w,ce());T&&(i=i.updateImmediateChild(_,T))}));const u=Cy(a,e);if(!u&&!e._queryParams.loadsAllData()){const h=Gl(e);z(!t.queryToTagMap.has(h),"View does not exist, but we have a tag");const _=iS();t.queryToTagMap.set(h,_),t.tagToQueryMap.set(_,h)}const p=$l(t.pendingWriteTree_,s);let d=Y1(a,e,n,p,i,c);if(!u&&!l&&!r){const h=Sy(a,e);d=d.concat(oS(t,e,h))}return d}function pd(t,e,n){const s=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,(l,a)=>{const c=rt(l,e),u=zn(a,c);if(u)return u});return py(s,e,i,n,!0)}function nS(t,e){const n=e._path;let r=null;t.syncPointTree_.foreachOnPath(n,(u,p)=>{const d=rt(u,n);r=r||zn(p,d)});let s=t.syncPointTree_.get(n);s?r=r||zn(s,ce()):(s=new _y,t.syncPointTree_=t.syncPointTree_.set(n,s));const i=r!=null,l=i?new Un(r,!0,!1):null,a=$l(t.pendingWriteTree_,e._path),c=wy(s,e,a,i?l.getNode():Y.EMPTY_NODE,i);return F1(c)}function Hi(t,e){return Ny(e,t.syncPointTree_,null,$l(t.pendingWriteTree_,ce()))}function Ny(t,e,n,r){if(se(t.path))return jy(t,e,n,r);{const s=e.get(ce());n==null&&s!=null&&(n=zn(s,ce()));let i=[];const l=ne(t.path),a=t.operationForChild(l),c=e.children.get(l);if(c&&a){const u=n?n.getImmediateChild(l):null,p=my(r,l);i=i.concat(Ny(a,c,u,p))}return s&&(i=i.concat(hd(s,t,r,n))),i}}function jy(t,e,n,r){const s=e.get(ce());n==null&&s!=null&&(n=zn(s,ce()));let i=[];return e.children.inorderTraversal((l,a)=>{const c=n?n.getImmediateChild(l):null,u=my(r,l),p=t.operationForChild(l);p&&(i=i.concat(jy(p,a,c,u)))}),s&&(i=i.concat(hd(s,t,r,n))),i}function Ty(t,e){const n=e.query,r=Ai(t,n);return{hashFn:()=>(z1(e)||Y.EMPTY_NODE).hash(),onComplete:s=>{if(s==="ok")return r?eS(t,n._path,r):Z1(t,n._path);{const i=nk(s,n);return wl(t,n,null,i)}}}}function Ai(t,e){const n=Gl(e);return t.queryToTagMap.get(n)}function Gl(t){return t._path.toString()+"$"+t._queryIdentifier}function md(t,e){return t.tagToQueryMap.get(e)}function gd(t){const e=t.indexOf("$");return z(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new he(t.substr(0,e))}}function yd(t,e,n){const r=t.syncPointTree_.get(e);z(r,"Missing sync point for query tag that we're tracking");const s=$l(t.pendingWriteTree_,e);return hd(r,n,s,null)}function rS(t){return t.fold((e,n,r)=>{if(n&&Gn(n))return[Ul(n)];{let s=[];return n&&(s=ky(n)),gt(r,(i,l)=>{s=s.concat(l)}),s}})}function oi(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(X1())(t._repo,t._path):t}function sS(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const s=Gl(r),i=t.queryToTagMap.get(s);t.queryToTagMap.delete(s),t.tagToQueryMap.delete(i)}}}function iS(){return q1++}function oS(t,e,n){const r=e._path,s=Ai(t,e),i=Ty(t,n),l=t.listenProvider_.startListening(oi(e),s,i.hashFn,i.onComplete),a=t.syncPointTree_.subtree(r);if(s)z(!Gn(a.value),"If we're adding a query, it shouldn't be shadowed");else{const c=a.fold((u,p,d)=>{if(!se(u)&&p&&Gn(p))return[Ul(p).query];{let h=[];return p&&(h=h.concat(ky(p).map(_=>_.query))),gt(d,(_,w)=>{h=h.concat(w)}),h}});for(let u=0;u<c.length;++u){const p=c[u];t.listenProvider_.stopListening(oi(p),Ai(t,p))}}return l}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new xd(n)}node(){return this.node_}}class vd{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=Me(this.path_,e);return new vd(this.syncTree_,n)}node(){return pd(this.syncTree_,this.path_)}}const lS=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},Kh=function(t,e,n){if(!t||typeof t!="object")return t;if(z(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return aS(t[".sv"],e,n);if(typeof t[".sv"]=="object")return cS(t[".sv"],e);z(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},aS=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:z(!1,"Unexpected server value: "+t)}},cS=function(t,e,n){t.hasOwnProperty("increment")||z(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&z(!1,"Unexpected increment value: "+r);const s=e.node();if(z(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return r;const l=s.getValue();return typeof l!="number"?r:l+r},uS=function(t,e,n,r){return _d(e,new vd(n,t),r)},Py=function(t,e,n){return _d(t,new xd(e),n)};function _d(t,e,n){const r=t.getPriority().val(),s=Kh(r,e.getImmediateChild(".priority"),n);let i;if(t.isLeafNode()){const l=t,a=Kh(l.getValue(),e,n);return a!==l.getValue()||s!==l.getPriority().val()?new Be(a,Ge(s)):t}else{const l=t;return i=l,s!==l.getPriority().val()&&(i=i.updatePriority(new Be(s))),l.forEachChild(Ie,(a,c)=>{const u=_d(c,e.getImmediateChild(a),n);u!==c&&(i=i.updateImmediateChild(a,u))}),i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function kd(t,e){let n=e instanceof he?e:new he(e),r=t,s=ne(n);for(;s!==null;){const i=is(r.node.children,s)||{children:{},childCount:0};r=new wd(s,r,i),n=ge(n),s=ne(n)}return r}function ms(t){return t.node.value}function Iy(t,e){t.node.value=e,eu(t)}function Ry(t){return t.node.childCount>0}function dS(t){return ms(t)===void 0&&!Ry(t)}function Vl(t,e){gt(t.node.children,(n,r)=>{e(new wd(n,t,r))})}function Ay(t,e,n,r){n&&e(t),Vl(t,s=>{Ay(s,e,!0)})}function fS(t,e,n){let r=t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Yi(t){return new he(t.parent===null?t.name:Yi(t.parent)+"/"+t.name)}function eu(t){t.parent!==null&&hS(t.parent,t.name,t)}function hS(t,e,n){const r=dS(n),s=hn(t.node.children,e);r&&s?(delete t.node.children[e],t.node.childCount--,eu(t)):!r&&!s&&(t.node.children[e]=n.node,t.node.childCount++,eu(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pS=/[\[\].#$\/\u0000-\u001F\u007F]/,mS=/[\[\].#$\u0000-\u001F\u007F]/,Ma=10*1024*1024,Dy=function(t){return typeof t=="string"&&t.length!==0&&!pS.test(t)},Wy=function(t){return typeof t=="string"&&t.length!==0&&!mS.test(t)},gS=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Wy(t)},Ly=function(t,e,n,r){r&&e===void 0||Sd(qu(t,"value"),e,n)},Sd=function(t,e,n){const r=n instanceof he?new Wk(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+er(r));if(typeof e=="function")throw new Error(t+"contains a function "+er(r)+" with contents = "+e.toString());if(Rg(e))throw new Error(t+"contains "+e.toString()+" "+er(r));if(typeof e=="string"&&e.length>Ma/3&&zl(e)>Ma)throw new Error(t+"contains a string greater than "+Ma+" utf8 bytes "+er(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,i=!1;if(gt(e,(l,a)=>{if(l===".value")s=!0;else if(l!==".priority"&&l!==".sv"&&(i=!0,!Dy(l)))throw new Error(t+" contains an invalid key ("+l+") "+er(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);Lk(r,l),Sd(t,a,r),Ok(r)}),s&&i)throw new Error(t+' contains ".value" child '+er(r)+" in addition to actual children.")}},Oy=function(t,e,n,r){if(!Wy(n))throw new Error(qu(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},yS=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Oy(t,e,n)},Cd=function(t,e){if(ne(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},xS=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Dy(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!gS(n))throw new Error(qu(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vS{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Ed(t,e){let n=null;for(let r=0;r<e.length;r++){const s=e[r],i=s.getPath();n!==null&&!rd(i,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:i}),n.events.push(s)}n&&t.eventLists_.push(n)}function My(t,e,n){Ed(t,n),zy(t,r=>rd(r,e))}function qt(t,e,n){Ed(t,n),zy(t,r=>Mt(r,e)||Mt(e,r))}function zy(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const s=t.eventLists_[r];if(s){const i=s.path;e(i)?(_S(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function _S(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();ni&&Ze("event: "+n.toString()),ps(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wS="repo_interrupt",kS=25;class SS{constructor(e,n,r,s){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new vS,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=hl(),this.transactionQueueTree_=new wd,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function CS(t,e,n){if(t.stats_=td(t.repoInfo_),t.forceRestClient_||ok())t.server_=new fl(t.repoInfo_,(r,s,i,l)=>{Qh(t,r,s,i,l)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>Xh(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Oe(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new sn(t.repoInfo_,e,(r,s,i,l)=>{Qh(t,r,s,i,l)},r=>{Xh(t,r)},r=>{ES(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=dk(t.repoInfo_,()=>new c1(t.stats_,t.server_)),t.infoData_=new s1,t.infoSyncTree_=new Yh({startListening:(r,s,i,l)=>{let a=[];const c=t.infoData_.getNode(r._path);return c.isEmpty()||(a=Vi(t.infoSyncTree_,r._path,c),setTimeout(()=>{l("ok")},0)),a},stopListening:()=>{}}),Nd(t,"connected",!1),t.serverSyncTree_=new Yh({startListening:(r,s,i,l)=>(t.server_.listen(r,i,s,(a,c)=>{const u=l(a,c);qt(t.eventQueue_,r._path,u)}),[]),stopListening:(r,s)=>{t.server_.unlisten(r,s)}})}function Fy(t){const n=t.infoData_.getNode(new he(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function bd(t){return lS({timestamp:Fy(t)})}function Qh(t,e,n,r,s){t.dataUpdateCount++;const i=new he(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let l=[];if(s)if(r){const c=ol(n,u=>Ge(u));l=tS(t.serverSyncTree_,i,c,s)}else{const c=Ge(n);l=by(t.serverSyncTree_,i,c,s)}else if(r){const c=ol(n,u=>Ge(u));l=J1(t.serverSyncTree_,i,c)}else{const c=Ge(n);l=Vi(t.serverSyncTree_,i,c)}let a=i;l.length>0&&(a=Yl(t,i)),qt(t.eventQueue_,a,l)}function Xh(t,e){Nd(t,"connected",e),e===!1&&jS(t)}function ES(t,e){gt(e,(n,r)=>{Nd(t,n,r)})}function Nd(t,e,n){const r=new he("/.info/"+e),s=Ge(n);t.infoData_.updateSnapshot(r,s);const i=Vi(t.infoSyncTree_,r,s);qt(t.eventQueue_,r,i)}function By(t){return t.nextWriteId_++}function bS(t,e,n){const r=nS(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(s=>{const i=Ge(s).withIndex(e._queryParams.getIndex());Zc(t.serverSyncTree_,e,n,!0);let l;if(e._queryParams.loadsAllData())l=Vi(t.serverSyncTree_,e._path,i);else{const a=Ai(t.serverSyncTree_,e);l=by(t.serverSyncTree_,e._path,i,a)}return qt(t.eventQueue_,e._path,l),wl(t.serverSyncTree_,e,n,null,!0),i},s=>(Hl(t,"get for query "+Oe(e)+" failed: "+s),Promise.reject(new Error(s))))}function NS(t,e,n,r,s){Hl(t,"set",{path:e.toString(),value:n,priority:r});const i=bd(t),l=Ge(n,r),a=pd(t.serverSyncTree_,e),c=Py(l,a,i),u=By(t),p=Ey(t.serverSyncTree_,e,c,u,!0);Ed(t.eventQueue_,p),t.server_.put(e.toString(),l.val(!0),(h,_)=>{const w=h==="ok";w||mt("set at "+e+" failed: "+h);const T=ir(t.serverSyncTree_,u,!w);qt(t.eventQueue_,e,T),IS(t,s,h,_)});const d=Hy(t,e);Yl(t,d),qt(t.eventQueue_,d,[])}function jS(t){Hl(t,"onDisconnectEvents");const e=bd(t),n=hl();Kc(t.onDisconnect_,ce(),(s,i)=>{const l=uS(s,i,t.serverSyncTree_,e);cy(n,s,l)});let r=[];Kc(n,ce(),(s,i)=>{r=r.concat(Vi(t.serverSyncTree_,s,i));const l=Hy(t,s);Yl(t,l)}),t.onDisconnect_=hl(),qt(t.eventQueue_,ce(),r)}function TS(t,e,n){let r;ne(e._path)===".info"?r=Zc(t.infoSyncTree_,e,n):r=Zc(t.serverSyncTree_,e,n),My(t.eventQueue_,e._path,r)}function qh(t,e,n){let r;ne(e._path)===".info"?r=wl(t.infoSyncTree_,e,n):r=wl(t.serverSyncTree_,e,n),My(t.eventQueue_,e._path,r)}function PS(t){t.persistentConnection_&&t.persistentConnection_.interrupt(wS)}function Hl(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Ze(n,...e)}function IS(t,e,n,r){e&&ps(()=>{if(n==="ok")e(null);else{const s=(n||"error").toUpperCase();let i=s;r&&(i+=": "+r);const l=new Error(i);l.code=s,e(l)}})}function $y(t,e,n){return pd(t.serverSyncTree_,e,n)||Y.EMPTY_NODE}function jd(t,e=t.transactionQueueTree_){if(e||Kl(t,e),ms(e)){const n=Gy(t,e);z(n.length>0,"Sending zero length transaction queue"),n.every(s=>s.status===0)&&RS(t,Yi(e),n)}else Ry(e)&&Vl(e,n=>{jd(t,n)})}function RS(t,e,n){const r=n.map(u=>u.currentWriteId),s=$y(t,e,r);let i=s;const l=s.hash();for(let u=0;u<n.length;u++){const p=n[u];z(p.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),p.status=1,p.retryCount++;const d=rt(e,p.path);i=i.updateChild(d,p.currentOutputSnapshotRaw)}const a=i.val(!0),c=e;t.server_.put(c.toString(),a,u=>{Hl(t,"transaction put response",{path:c.toString(),status:u});let p=[];if(u==="ok"){const d=[];for(let h=0;h<n.length;h++)n[h].status=2,p=p.concat(ir(t.serverSyncTree_,n[h].currentWriteId)),n[h].onComplete&&d.push(()=>n[h].onComplete(null,!0,n[h].currentOutputSnapshotResolved)),n[h].unwatcher();Kl(t,kd(t.transactionQueueTree_,e)),jd(t,t.transactionQueueTree_),qt(t.eventQueue_,e,p);for(let h=0;h<d.length;h++)ps(d[h])}else{if(u==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{mt("transaction at "+c.toString()+" failed: "+u);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=u}Yl(t,e)}},l)}function Yl(t,e){const n=Uy(t,e),r=Yi(n),s=Gy(t,n);return AS(t,s,r),r}function AS(t,e,n){if(e.length===0)return;const r=[];let s=[];const l=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const c=e[a],u=rt(n,c.path);let p=!1,d;if(z(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)p=!0,d=c.abortReason,s=s.concat(ir(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=kS)p=!0,d="maxretry",s=s.concat(ir(t.serverSyncTree_,c.currentWriteId,!0));else{const h=$y(t,c.path,l);c.currentInputSnapshot=h;const _=e[a].update(h.val());if(_!==void 0){Sd("transaction failed: Data returned ",_,c.path);let w=Ge(_);typeof _=="object"&&_!=null&&hn(_,".priority")||(w=w.updatePriority(h.getPriority()));const E=c.currentWriteId,v=bd(t),y=Py(w,h,v);c.currentOutputSnapshotRaw=w,c.currentOutputSnapshotResolved=y,c.currentWriteId=By(t),l.splice(l.indexOf(E),1),s=s.concat(Ey(t.serverSyncTree_,c.path,y,c.currentWriteId,c.applyLocally)),s=s.concat(ir(t.serverSyncTree_,E,!0))}else p=!0,d="nodata",s=s.concat(ir(t.serverSyncTree_,c.currentWriteId,!0))}qt(t.eventQueue_,n,s),s=[],p&&(e[a].status=2,function(h){setTimeout(h,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(d),!1,null))))}Kl(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)ps(r[a]);jd(t,t.transactionQueueTree_)}function Uy(t,e){let n,r=t.transactionQueueTree_;for(n=ne(e);n!==null&&ms(r)===void 0;)r=kd(r,n),e=ge(e),n=ne(e);return r}function Gy(t,e){const n=[];return Vy(t,e,n),n.sort((r,s)=>r.order-s.order),n}function Vy(t,e,n){const r=ms(e);if(r)for(let s=0;s<r.length;s++)n.push(r[s]);Vl(e,s=>{Vy(t,s,n)})}function Kl(t,e){const n=ms(e);if(n){let r=0;for(let s=0;s<n.length;s++)n[s].status!==2&&(n[r]=n[s],r++);n.length=r,Iy(e,n.length>0?n:void 0)}Vl(e,r=>{Kl(t,r)})}function Hy(t,e){const n=Yi(Uy(t,e)),r=kd(t.transactionQueueTree_,e);return fS(r,s=>{za(t,s)}),za(t,r),Ay(r,s=>{za(t,s)}),n}function za(t,e){const n=ms(e);if(n){const r=[];let s=[],i=-1;for(let l=0;l<n.length;l++)n[l].status===3||(n[l].status===1?(z(i===l-1,"All SENT items should be at beginning of queue."),i=l,n[l].status=3,n[l].abortReason="set"):(z(n[l].status===0,"Unexpected transaction status in abort"),n[l].unwatcher(),s=s.concat(ir(t.serverSyncTree_,n[l].currentWriteId,!0)),n[l].onComplete&&r.push(n[l].onComplete.bind(null,new Error("set"),!1,null))));i===-1?Iy(e,void 0):n.length=i+1,qt(t.eventQueue_,Yi(e),s);for(let l=0;l<r.length;l++)ps(r[l])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DS(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let s=n[r];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}function WS(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):mt(`Invalid query segment '${n}' in query '${t}'`)}return e}const Jh=function(t,e){const n=LS(t),r=n.namespace;n.domain==="firebase.com"&&dn(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&dn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||qw();const s=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new Gg(n.host,n.secure,r,s,e,"",r!==n.subdomain),path:new he(n.pathString)}},LS=function(t){let e="",n="",r="",s="",i="",l=!0,a="https",c=443;if(typeof t=="string"){let u=t.indexOf("//");u>=0&&(a=t.substring(0,u-1),t=t.substring(u+2));let p=t.indexOf("/");p===-1&&(p=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(p,d)),p<d&&(s=DS(t.substring(p,d)));const h=WS(t.substring(Math.min(t.length,d)));u=e.indexOf(":"),u>=0?(l=a==="https"||a==="wss",c=parseInt(e.substring(u+1),10)):u=e.length;const _=e.slice(0,u);if(_.toLowerCase()==="localhost")n="localhost";else if(_.split(".").length<=2)n=_;else{const w=e.indexOf(".");r=e.substring(0,w).toLowerCase(),n=e.substring(w+1),i=r}"ns"in h&&(i=h.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:l,scheme:a,pathString:s,namespace:i}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zh="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",OS=function(){let t=0;const e=[];return function(n){const r=n===t;t=n;let s;const i=new Array(8);for(s=7;s>=0;s--)i[s]=Zh.charAt(n%64),n=Math.floor(n/64);z(n===0,"Cannot push at time == 0");let l=i.join("");if(r){for(s=11;s>=0&&e[s]===63;s--)e[s]=0;e[s]++}else for(s=0;s<12;s++)e[s]=Math.floor(Math.random()*64);for(s=0;s<12;s++)l+=Zh.charAt(e[s]);return z(l.length===20,"nextPushId: Length should be 20."),l}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MS{constructor(e,n,r,s){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=s}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Oe(this.snapshot.exportVal())}}class zS{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yy{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return z(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{constructor(e,n,r,s){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=s}get key(){return se(this._path)?null:Zg(this._path)}get ref(){return new pn(this._repo,this._path)}get _queryIdentifier(){const e=Lh(this._queryParams),n=Zu(e);return n==="{}"?"default":n}get _queryObject(){return Lh(this._queryParams)}isEqual(e){if(e=_r(e),!(e instanceof Td))return!1;const n=this._repo===e._repo,r=rd(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return n&&r&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+Dk(this._path)}}class pn extends Td{constructor(e,n){super(e,n,new ld,!1)}get parent(){const e=ty(this._path);return e===null?null:new pn(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Di{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new he(e),r=Wi(this.ref,e);return new Di(this._node.getChild(n),r,Ie)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,s)=>e(new Di(s,Wi(this.ref,r),Ie)))}hasChild(e){const n=new he(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function K(t,e){return t=_r(t),t._checkNotDeleted("ref"),e!==void 0?Wi(t._root,e):t._root}function Wi(t,e){return t=_r(t),ne(t._path)===null?yS("child","path",e):Oy("child","path",e),new pn(t._repo,Me(t._path,e))}function Do(t,e){t=_r(t),Cd("push",t._path),Ly("push",e,t._path,!0);const n=Fy(t._repo),r=OS(n),s=Wi(t,r),i=Wi(t,r);let l;return e!=null?l=pe(i,e).then(()=>i):l=Promise.resolve(i),s.then=l.then.bind(l),s.catch=l.then.bind(l,void 0),s}function ep(t){return Cd("remove",t._path),pe(t,null)}function pe(t,e){t=_r(t),Cd("set",t._path),Ly("set",e,t._path,!1);const n=new Ml;return NS(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function Bs(t){t=_r(t);const e=new Yy(()=>{}),n=new Ql(e);return bS(t._repo,t,n).then(r=>new Di(r,new pn(t._repo,t._path),t._queryParams.getIndex()))}class Ql{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new MS("value",this,new Di(e.snapshotNode,new pn(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new zS(this,e,n):null}matches(e){return e instanceof Ql?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function FS(t,e,n,r,s){let i;if(typeof r=="object"&&(i=void 0,s=r),typeof r=="function"&&(i=r),s&&s.onlyOnce){const c=n,u=(p,d)=>{qh(t._repo,t,a),c(p,d)};u.userCallback=n.userCallback,u.context=n.context,n=u}const l=new Yy(n,i||void 0),a=new Ql(l);return TS(t._repo,t,a),()=>qh(t._repo,t,a)}function xt(t,e,n,r){return FS(t,"value",e,n,r)}G1(pn);Q1(pn);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BS="FIREBASE_DATABASE_EMULATOR_HOST",tu={};let $S=!1;function US(t,e,n,r){t.repoInfo_=new Gg(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function GS(t,e,n,r,s){let i=r||t.options.databaseURL;i===void 0&&(t.options.projectId||dn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ze("Using default host for project ",t.options.projectId),i=`${t.options.projectId}-default-rtdb.firebaseio.com`);let l=Jh(i,s),a=l.repoInfo,c;typeof process<"u"&&xh&&(c=xh[BS]),c?(i=`http://${c}?ns=${a.namespace}`,l=Jh(i,s),a=l.repoInfo):l.repoInfo.secure;const u=new ak(t.name,t.options,e);xS("Invalid Firebase Database URL",l),se(l.path)||dn("Database URL must point to the root of a Firebase Database (not including a child path).");const p=HS(a,t,u,new lk(t.name,n));return new YS(p,t)}function VS(t,e){const n=tu[e];(!n||n[t.key]!==t)&&dn(`Database ${e}(${t.repoInfo_}) has already been deleted.`),PS(t),delete n[t.key]}function HS(t,e,n,r){let s=tu[e.name];s||(s={},tu[e.name]=s);let i=s[t.toURLString()];return i&&dn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new SS(t,$S,n,r),s[t.toURLString()]=i,i}class YS{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(CS(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new pn(this._repo,ce())),this._rootInternal}_delete(){return this._rootInternal!==null&&(VS(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&dn("Cannot call "+e+" on a deleted database.")}}function Pd(t=Aw(),e){const n=Tw(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=x_("database");r&&KS(n,...r)}return n}function KS(t,e,n,r={}){t=_r(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&dn("Cannot call useEmulator() after instance has already been initialized.");const s=t._repoInternal;let i;if(s.repoInfo_.nodeAdmin)r.mockUserToken&&dn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),i=new Ao(Ao.OWNER);else if(r.mockUserToken){const l=typeof r.mockUserToken=="string"?r.mockUserToken:v_(r.mockUserToken,t.app.options.projectId);i=new Ao(l)}US(s,e,n,i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QS(t){Vw(Rw),al(new Ei("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return GS(r,s,i,n)},"PUBLIC").setMultipleInstances(!0)),Qr(vh,_h,t),Qr(vh,_h,"esm2017")}sn.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};sn.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};QS();function XS({allPicks:t,actualScores:e,currentWeek:n,playerName:r,playerCode:s,isPoolManager:i,prizePool:l,officialWinners:a,onLogout:c}){const[u,p]=O.useState({"Week 1":!0,"Week 2":!1,"Week 3":!1,"Week 4":!1,"Grand Prizes":!1}),d=m=>{p(C=>({...C,[m]:!C[m]}))},h=()=>{p({"Week 1":!0,"Week 2":!0,"Week 3":!0,"Week 4":!0,"Grand Prizes":!0})},_=()=>{p({"Week 1":!1,"Week 2":!1,"Week 3":!1,"Week 4":!1,"Grand Prizes":!1})},w=(m,C,b)=>{if(!m||!C||!C[b])return 0;let P=0;const A=C[b];return Object.keys(m).forEach(R=>{const D=m[R],W=A[R];if(!D||!W)return;const V=parseInt(D.team1),ee=parseInt(D.team2),Ce=parseInt(W.team1),lt=parseInt(W.team2);if(isNaN(V)||isNaN(ee)||isNaN(Ce)||isNaN(lt))return;const H=V>ee?"team1":ee>V?"team2":"tie",Ae=Ce>lt?"team1":lt>Ce?"team2":"tie";H===Ae&&Ae!=="tie"&&P++}),P},T=(m,C,b)=>{if(!m||!C||!C[b])return null;let P=0,A=0;const R=C[b];return Object.keys(m).forEach(D=>{const W=m[D],V=R[D];if(!W||!V)return;const ee=parseInt(W.team1),Ce=parseInt(W.team2),lt=parseInt(V.team1),H=parseInt(V.team2);isNaN(ee)||isNaN(Ce)||isNaN(lt)||isNaN(H)||(P+=ee+Ce,A+=lt+H)}),Math.abs(P-A)},E=(m,C,b)=>{let P=0,A=0;return b.forEach(R=>{const D=m[R];if(D){P+=w(D,C,R);const W=T(D,C,R);W!==null&&(A+=W)}}),{correctWinners:P,pointsDifference:A}},v={wildcard:"Week 1",divisional:"Week 2",conference:"Week 3",superbowl:"Week 4"},y=O.useMemo(()=>{const m={};return t.forEach(C=>{const b=C.playerName;m[b]||(m[b]={wildcard:null,divisional:null,conference:null,superbowl:null}),m[b][C.week]=C.predictions}),m},[t]),k=O.useMemo(()=>{const m=[],C=["wildcard","divisional","conference","superbowl"];C.slice(0,3).forEach((W,V)=>{const ee=v[W],Ce=Object.entries(y).map(([H,Ae])=>({playerName:H,score:w(Ae[W],e,W)})).filter(H=>H.score>0).sort((H,Ae)=>Ae.score-H.score);m.push({prizeNumber:V*2+1,name:`${ee} - Most Correct Predictions`,week:W,type:"correctWinners",leaders:Ce.slice(0,5)});const lt=Object.entries(y).map(([H,Ae])=>({playerName:H,score:T(Ae[W],e,W)})).filter(H=>H.score!==null).sort((H,Ae)=>H.score-Ae.score);m.push({prizeNumber:V*2+2,name:`${ee} - Closest Total Points`,week:W,type:"pointsDifference",leaders:lt.slice(0,5)})});const b="superbowl",P=Object.entries(y).map(([W,V])=>({playerName:W,score:w(V[b],e,b)})).filter(W=>W.score>0).sort((W,V)=>V.score-W.score);m.push({prizeNumber:7,name:"Week 4 - Most Correct Predictions",week:b,type:"correctWinners",leaders:P.slice(0,5)});const A=Object.entries(y).map(([W,V])=>({playerName:W,score:T(V[b],e,b)})).filter(W=>W.score!==null).sort((W,V)=>W.score-V.score);m.push({prizeNumber:8,name:"Week 4 - Closest Total Points",week:b,type:"pointsDifference",leaders:A.slice(0,5)});const R=Object.entries(y).map(([W,V])=>{const ee=E(V,e,C);return{playerName:W,score:ee.correctWinners}}).filter(W=>W.score>0).sort((W,V)=>V.score-W.score);m.push({prizeNumber:9,name:"Cumulative (All 4 Weeks) - Most Correct Predictions",week:"all",type:"correctWinners",leaders:R.slice(0,5)});const D=Object.entries(y).map(([W,V])=>{const ee=E(V,e,C);return{playerName:W,score:ee.pointsDifference}}).filter(W=>W.score!==null&&W.score>=0).sort((W,V)=>W.score-V.score);return m.push({prizeNumber:10,name:"Cumulative (All 4 Weeks) - Closest Total Points",week:"all",type:"pointsDifference",leaders:D.slice(0,5)}),m},[y,e]);return o.jsx("div",{className:"standings-page",children:o.jsxs("div",{className:"container",children:[o.jsxs("div",{style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:"20px",borderRadius:"8px",marginBottom:"20px",color:"white"},children:[o.jsx("div",{style:{fontSize:"0.9rem",marginBottom:"5px"},children:" VERIFIED"}),o.jsxs("div",{style:{fontSize:"1.2rem",fontWeight:"bold",marginBottom:"5px"},children:["Viewing as: ",r]}),i&&o.jsx("div",{style:{fontSize:"0.9rem",marginBottom:"10px",color:"#ffd700",fontWeight:"600"},children:" POOL MANAGER"}),o.jsx("button",{onClick:()=>{console.log(" STANDINGS: Logout button clicked"),console.log(" STANDINGS: onLogout function:",c),console.log(" STANDINGS: Calling onLogout..."),c(),console.log(" STANDINGS: onLogout called")},style:{background:"white",color:"#764ba2",border:"none",padding:"10px 20px",borderRadius:"6px",fontSize:"0.95rem",fontWeight:"600",cursor:"pointer",marginTop:"10px",boxShadow:"0 2px 4px rgba(0,0,0,0.2)"},children:" Logout / Switch Entry"}),o.jsx("p",{style:{fontSize:"0.85rem",marginTop:"10px",opacity:.9,fontStyle:"italic"},children:" Playing with multiple entries? Logout to switch between your codes."})]}),o.jsx("h1",{className:"standings-title",children:" Standings & Prize Leaders"}),l&&l.totalFees>0&&o.jsxs("div",{style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",padding:"25px",borderRadius:"12px",marginBottom:"30px",boxShadow:"0 4px 6px rgba(0,0,0,0.1)"},children:[o.jsx("h2",{style:{margin:"0 0 20px 0",fontSize:"1.5rem"},children:" Prize Pool Information"}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"20px",marginBottom:"15px"},children:[o.jsxs("div",{style:{background:"rgba(255,255,255,0.2)",padding:"15px",borderRadius:"8px"},children:[o.jsx("div",{style:{fontSize:"0.9rem",opacity:.9,marginBottom:"5px"},children:"Total Pool Fees"}),o.jsxs("div",{style:{fontSize:"2rem",fontWeight:"bold"},children:["$",l.totalFees.toFixed(2)]})]}),o.jsxs("div",{style:{background:"rgba(255,255,255,0.2)",padding:"15px",borderRadius:"8px"},children:[o.jsx("div",{style:{fontSize:"0.9rem",opacity:.9,marginBottom:"5px"},children:"Number of Players"}),o.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold"},children:l.numberOfPlayers})]}),o.jsxs("div",{style:{background:"rgba(255,255,255,0.2)",padding:"15px",borderRadius:"8px"},children:[o.jsx("div",{style:{fontSize:"0.9rem",opacity:.9,marginBottom:"5px"},children:"Entry Fee"}),o.jsxs("div",{style:{fontSize:"2rem",fontWeight:"bold"},children:["$",l.entryFee]})]}),o.jsxs("div",{style:{background:"rgba(255,255,255,0.2)",padding:"15px",borderRadius:"8px"},children:[o.jsx("div",{style:{fontSize:"0.9rem",opacity:.9,marginBottom:"5px"},children:"Each Prize (10%)"}),o.jsxs("div",{style:{fontSize:"2rem",fontWeight:"bold"},children:["$",l.prizeValue.toFixed(2)]})]})]}),o.jsx("div",{style:{fontSize:"0.9rem",opacity:.9},children:" 10 prizes total  Equal 10% distribution  Ties split equally"})]}),a&&Object.keys(a).length>0&&o.jsxs("div",{style:{background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)",color:"white",padding:"25px",borderRadius:"12px",marginBottom:"30px",boxShadow:"0 4px 6px rgba(0,0,0,0.1)"},children:[o.jsx("h2",{style:{margin:"0 0 5px 0",fontSize:"1.5rem"},children:" OFFICIAL PRIZE AWARDS"}),o.jsx("div",{style:{fontSize:"0.9rem",opacity:.9,marginBottom:"20px",fontStyle:"italic"},children:"Declared by Pool Manager"}),o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"20px"},children:Object.entries(a).sort((m,C)=>m[1].prizeNumber-C[1].prizeNumber).map(([m,C])=>o.jsxs("div",{style:{background:"rgba(255,255,255,0.95)",color:"#333",padding:"20px",borderRadius:"10px",boxShadow:"0 2px 8px rgba(0,0,0,0.15)"},children:[o.jsxs("div",{style:{fontWeight:"bold",fontSize:"1.1rem",marginBottom:"8px",color:"#f5576c"},children:["Prize #",C.prizeNumber]}),o.jsx("div",{style:{fontSize:"0.9rem",color:"#666",marginBottom:"12px"},children:C.prizeName.replace(`Prize #${C.prizeNumber} - `,"")}),o.jsxs("div",{style:{fontSize:"0.85rem",fontWeight:"600",color:"#999",marginBottom:"12px"},children:["Prize Value: $",C.prizeValue.toFixed(2)]}),o.jsx("div",{style:{borderTop:"2px solid #f093fb",paddingTop:"12px"},children:C.winners.map((b,P)=>o.jsxs("div",{style:{padding:"8px 0",borderBottom:P<C.winners.length-1?"1px solid #eee":"none"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"10px"},children:[o.jsxs("div",{style:{fontWeight:"700",fontSize:"1rem",color:"#333"},children:[" ",b.playerName]}),o.jsxs("div",{style:{fontSize:"0.95rem",fontWeight:"600",color:"#f5576c"},children:["$",b.amount.toFixed(2)]})]}),o.jsxs("div",{style:{fontSize:"0.8rem",color:"#888",marginTop:"2px"},children:[b.percentage.toFixed(2),"% of prize"]})]},P))})]},m))})]}),o.jsx("div",{style:{background:"linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)",color:"white",padding:"20px 25px",borderRadius:"12px",marginBottom:"25px",boxShadow:"0 4px 6px rgba(0,0,0,0.1)",border:"2px solid rgba(255,255,255,0.3)"},children:o.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"15px"},children:[o.jsx("div",{style:{fontSize:"2rem",lineHeight:"1"},children:""}),o.jsxs("div",{style:{flex:1},children:[o.jsx("h3",{style:{margin:"0 0 10px 0",fontSize:"1.2rem",fontWeight:"700"},children:"How Prize Leaders Work"}),o.jsxs("div",{style:{fontSize:"0.95rem",lineHeight:"1.6",opacity:.95},children:[o.jsxs("p",{style:{margin:"0 0 10px 0"},children:["This page shows ",o.jsx("strong",{children:"current leaders"})," for each prize category based on games scored so far."]}),o.jsxs("p",{style:{margin:"0 0 10px 0"},children:[o.jsx("strong",{children:" These are NOT final results!"})," Rankings will change as more games are scored throughout the playoffs."]}),o.jsxs("p",{style:{margin:"0"},children:[o.jsx("strong",{children:"Official prize awards"})," will be declared by the Pool Manager after all games are completed and verified."]})]})]})]})}),o.jsxs("div",{style:{display:"flex",gap:"15px",justifyContent:"center",margin:"20px 0"},children:[o.jsx("button",{onClick:h,style:{padding:"10px 20px",background:"#667eea",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"0.95rem",fontWeight:"600",transition:"all 0.2s"},onMouseOver:m=>m.target.style.background="#5568d3",onMouseOut:m=>m.target.style.background="#667eea",children:" Expand All Weeks"}),o.jsx("button",{onClick:_,style:{padding:"10px 20px",background:"#667eea",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"0.95rem",fontWeight:"600",transition:"all 0.2s"},onMouseOver:m=>m.target.style.background="#5568d3",onMouseOut:m=>m.target.style.background="#667eea",children:" Collapse All Weeks"})]}),o.jsxs("div",{style:{marginBottom:"20px"},children:[o.jsxs("h3",{onClick:()=>d("Week 1"),style:{cursor:"pointer",userSelect:"none",display:"flex",alignItems:"center",gap:"10px",padding:"15px 20px",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",borderRadius:"8px",transition:"all 0.3s",marginBottom:u["Week 1"]?"20px":"0",borderBottomLeftRadius:u["Week 1"]?"0":"8px",borderBottomRightRadius:u["Week 1"]?"0":"8px"},onMouseEnter:m=>{m.currentTarget.style.transform="translateX(5px)",m.currentTarget.style.boxShadow="0 4px 15px rgba(102, 126, 234, 0.4)"},onMouseLeave:m=>{m.currentTarget.style.transform="translateX(0)",m.currentTarget.style.boxShadow="none"},children:[o.jsx("span",{style:{fontSize:"1.2rem",transition:"transform 0.3s"},children:u["Week 1"]?"":""}),"Week 1 Prizes (Wild Card Round)"]}),u["Week 1"]&&o.jsx("div",{className:"prizes-grid",children:k.filter(m=>m.prizeNumber>=1&&m.prizeNumber<=2).map(m=>{const C=m.type==="correctWinners"?"Players who correctly predicted the most game outcomes (which team won)":"Players whose predicted total scores were closest to the actual combined scores";return o.jsxs("div",{className:"prize-card",children:[o.jsxs("div",{className:"prize-header",children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"5px"},children:[o.jsxs("div",{className:"prize-number",children:["PRIZE #",m.prizeNumber]}),o.jsx("div",{title:C,style:{cursor:"help",fontSize:"1.1rem",opacity:.7,transition:"opacity 0.2s"},onMouseOver:b=>b.target.style.opacity="1",onMouseOut:b=>b.target.style.opacity="0.7",children:""})]}),o.jsx("div",{className:"prize-name",children:m.name}),o.jsx("div",{style:{fontSize:"0.85rem",color:"#666",fontWeight:"600",marginTop:"5px",fontStyle:"italic"},children:"Current Leaders"})]}),o.jsx("div",{className:"prize-leaders",children:m.leaders.length===0?o.jsx("div",{className:"no-data",children:"No data available yet"}):o.jsxs("table",{className:"leaders-table",children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{children:"Rank"}),o.jsx("th",{children:"Player"}),o.jsx("th",{children:m.type==="correctWinners"?"Correct":"Difference"})]})}),o.jsx("tbody",{children:m.leaders.map((b,P)=>{const A=P>0&&b.score===m.leaders[P-1].score,R=A?"=":P+1,D=P===0&&!A;return o.jsxs("tr",{className:D?"leader-first":"",children:[o.jsxs("td",{className:"rank",children:[R,D&&o.jsx("span",{style:{marginLeft:"5px",fontSize:"0.8em"},children:""})]}),o.jsxs("td",{className:"player-name",children:[b.playerName,D&&o.jsx("span",{style:{marginLeft:"8px",fontSize:"0.7rem",background:"#4facfe",color:"white",padding:"2px 6px",borderRadius:"4px",fontWeight:"600"},children:"LEADING"})]}),o.jsx("td",{className:"score",children:m.type==="correctWinners"?`${b.score} correct`:`${b.score} pts`})]},P)})})]})})]},m.prizeNumber)})})]}),o.jsxs("div",{style:{marginBottom:"20px"},children:[o.jsxs("h3",{onClick:()=>d("Week 2"),style:{cursor:"pointer",userSelect:"none",display:"flex",alignItems:"center",gap:"10px",padding:"15px 20px",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",borderRadius:"8px",transition:"all 0.3s",marginBottom:u["Week 2"]?"20px":"0",borderBottomLeftRadius:u["Week 2"]?"0":"8px",borderBottomRightRadius:u["Week 2"]?"0":"8px"},onMouseEnter:m=>{m.currentTarget.style.transform="translateX(5px)",m.currentTarget.style.boxShadow="0 4px 15px rgba(102, 126, 234, 0.4)"},onMouseLeave:m=>{m.currentTarget.style.transform="translateX(0)",m.currentTarget.style.boxShadow="none"},children:[o.jsx("span",{style:{fontSize:"1.2rem",transition:"transform 0.3s"},children:u["Week 2"]?"":""}),"Week 2 Prizes (Divisional Round)"]}),u["Week 2"]&&o.jsx("div",{className:"prizes-grid",children:k.filter(m=>m.prizeNumber>=3&&m.prizeNumber<=4).map(m=>{const C=m.type==="correctWinners"?"Players who correctly predicted the most game outcomes (which team won)":"Players whose predicted total scores were closest to the actual combined scores";return o.jsxs("div",{className:"prize-card",children:[o.jsxs("div",{className:"prize-header",children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"5px"},children:[o.jsxs("div",{className:"prize-number",children:["PRIZE #",m.prizeNumber]}),o.jsx("div",{title:C,style:{cursor:"help",fontSize:"1.1rem",opacity:.7,transition:"opacity 0.2s"},onMouseOver:b=>b.target.style.opacity="1",onMouseOut:b=>b.target.style.opacity="0.7",children:""})]}),o.jsx("div",{className:"prize-name",children:m.name}),o.jsx("div",{style:{fontSize:"0.85rem",color:"#666",fontWeight:"600",marginTop:"5px",fontStyle:"italic"},children:"Current Leaders"})]}),o.jsx("div",{className:"prize-leaders",children:m.leaders.length===0?o.jsx("div",{className:"no-data",children:"No data available yet"}):o.jsxs("table",{className:"leaders-table",children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{children:"Rank"}),o.jsx("th",{children:"Player"}),o.jsx("th",{children:m.type==="correctWinners"?"Correct":"Difference"})]})}),o.jsx("tbody",{children:m.leaders.map((b,P)=>{const A=P>0&&b.score===m.leaders[P-1].score,R=A?"=":P+1,D=P===0&&!A;return o.jsxs("tr",{className:D?"leader-first":"",children:[o.jsxs("td",{className:"rank",children:[R,D&&o.jsx("span",{style:{marginLeft:"5px",fontSize:"0.8em"},children:""})]}),o.jsxs("td",{className:"player-name",children:[b.playerName,D&&o.jsx("span",{style:{marginLeft:"8px",fontSize:"0.7rem",background:"#4facfe",color:"white",padding:"2px 6px",borderRadius:"4px",fontWeight:"600"},children:"LEADING"})]}),o.jsx("td",{className:"score",children:m.type==="correctWinners"?`${b.score} correct`:`${b.score} pts`})]},P)})})]})})]},m.prizeNumber)})})]}),o.jsxs("div",{style:{marginBottom:"20px"},children:[o.jsxs("h3",{onClick:()=>d("Week 3"),style:{cursor:"pointer",userSelect:"none",display:"flex",alignItems:"center",gap:"10px",padding:"15px 20px",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",borderRadius:"8px",transition:"all 0.3s",marginBottom:u["Week 3"]?"20px":"0",borderBottomLeftRadius:u["Week 3"]?"0":"8px",borderBottomRightRadius:u["Week 3"]?"0":"8px"},onMouseEnter:m=>{m.currentTarget.style.transform="translateX(5px)",m.currentTarget.style.boxShadow="0 4px 15px rgba(102, 126, 234, 0.4)"},onMouseLeave:m=>{m.currentTarget.style.transform="translateX(0)",m.currentTarget.style.boxShadow="none"},children:[o.jsx("span",{style:{fontSize:"1.2rem",transition:"transform 0.3s"},children:u["Week 3"]?"":""}),"Week 3 Prizes (Conference Championships)"]}),u["Week 3"]&&o.jsx("div",{className:"prizes-grid",children:k.filter(m=>m.prizeNumber>=5&&m.prizeNumber<=6).map(m=>{const C=m.type==="correctWinners"?"Players who correctly predicted the most game outcomes (which team won)":"Players whose predicted total scores were closest to the actual combined scores";return o.jsxs("div",{className:"prize-card",children:[o.jsxs("div",{className:"prize-header",children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"5px"},children:[o.jsxs("div",{className:"prize-number",children:["PRIZE #",m.prizeNumber]}),o.jsx("div",{title:C,style:{cursor:"help",fontSize:"1.1rem",opacity:.7,transition:"opacity 0.2s"},onMouseOver:b=>b.target.style.opacity="1",onMouseOut:b=>b.target.style.opacity="0.7",children:""})]}),o.jsx("div",{className:"prize-name",children:m.name}),o.jsx("div",{style:{fontSize:"0.85rem",color:"#666",fontWeight:"600",marginTop:"5px",fontStyle:"italic"},children:"Current Leaders"})]}),o.jsx("div",{className:"prize-leaders",children:m.leaders.length===0?o.jsx("div",{className:"no-data",children:"No data available yet"}):o.jsxs("table",{className:"leaders-table",children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{children:"Rank"}),o.jsx("th",{children:"Player"}),o.jsx("th",{children:m.type==="correctWinners"?"Correct":"Difference"})]})}),o.jsx("tbody",{children:m.leaders.map((b,P)=>{const A=P>0&&b.score===m.leaders[P-1].score,R=A?"=":P+1,D=P===0&&!A;return o.jsxs("tr",{className:D?"leader-first":"",children:[o.jsxs("td",{className:"rank",children:[R,D&&o.jsx("span",{style:{marginLeft:"5px",fontSize:"0.8em"},children:""})]}),o.jsxs("td",{className:"player-name",children:[b.playerName,D&&o.jsx("span",{style:{marginLeft:"8px",fontSize:"0.7rem",background:"#4facfe",color:"white",padding:"2px 6px",borderRadius:"4px",fontWeight:"600"},children:"LEADING"})]}),o.jsx("td",{className:"score",children:m.type==="correctWinners"?`${b.score} correct`:`${b.score} pts`})]},P)})})]})})]},m.prizeNumber)})})]}),o.jsxs("div",{style:{marginBottom:"20px"},children:[o.jsxs("h3",{onClick:()=>d("Week 4"),style:{cursor:"pointer",userSelect:"none",display:"flex",alignItems:"center",gap:"10px",padding:"15px 20px",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",borderRadius:"8px",transition:"all 0.3s",marginBottom:u["Week 4"]?"20px":"0",borderBottomLeftRadius:u["Week 4"]?"0":"8px",borderBottomRightRadius:u["Week 4"]?"0":"8px"},onMouseEnter:m=>{m.currentTarget.style.transform="translateX(5px)",m.currentTarget.style.boxShadow="0 4px 15px rgba(102, 126, 234, 0.4)"},onMouseLeave:m=>{m.currentTarget.style.transform="translateX(0)",m.currentTarget.style.boxShadow="none"},children:[o.jsx("span",{style:{fontSize:"1.2rem",transition:"transform 0.3s"},children:u["Week 4"]?"":""}),"Week 4 Prizes (Super Bowl)"]}),u["Week 4"]&&o.jsx("div",{className:"prizes-grid",children:k.filter(m=>m.prizeNumber>=7&&m.prizeNumber<=8).map(m=>{const C=m.type==="correctWinners"?"Players who correctly predicted the most game outcomes (which team won)":"Players whose predicted total scores were closest to the actual combined scores";return o.jsxs("div",{className:"prize-card",children:[o.jsxs("div",{className:"prize-header",children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"5px"},children:[o.jsxs("div",{className:"prize-number",children:["PRIZE #",m.prizeNumber]}),o.jsx("div",{title:C,style:{cursor:"help",fontSize:"1.1rem",opacity:.7,transition:"opacity 0.2s"},onMouseOver:b=>b.target.style.opacity="1",onMouseOut:b=>b.target.style.opacity="0.7",children:""})]}),o.jsx("div",{className:"prize-name",children:m.name}),o.jsx("div",{style:{fontSize:"0.85rem",color:"#666",fontWeight:"600",marginTop:"5px",fontStyle:"italic"},children:"Current Leaders"})]}),o.jsx("div",{className:"prize-leaders",children:m.leaders.length===0?o.jsx("div",{className:"no-data",children:"No data available yet"}):o.jsxs("table",{className:"leaders-table",children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{children:"Rank"}),o.jsx("th",{children:"Player"}),o.jsx("th",{children:m.type==="correctWinners"?"Correct":"Difference"})]})}),o.jsx("tbody",{children:m.leaders.map((b,P)=>{const A=P>0&&b.score===m.leaders[P-1].score,R=A?"=":P+1,D=P===0&&!A;return o.jsxs("tr",{className:D?"leader-first":"",children:[o.jsxs("td",{className:"rank",children:[R,D&&o.jsx("span",{style:{marginLeft:"5px",fontSize:"0.8em"},children:""})]}),o.jsxs("td",{className:"player-name",children:[b.playerName,D&&o.jsx("span",{style:{marginLeft:"8px",fontSize:"0.7rem",background:"#4facfe",color:"white",padding:"2px 6px",borderRadius:"4px",fontWeight:"600"},children:"LEADING"})]}),o.jsx("td",{className:"score",children:m.type==="correctWinners"?`${b.score} correct`:`${b.score} pts`})]},P)})})]})})]},m.prizeNumber)})})]}),o.jsxs("div",{style:{marginBottom:"20px"},children:[o.jsxs("h3",{onClick:()=>d("Grand Prizes"),style:{cursor:"pointer",userSelect:"none",display:"flex",alignItems:"center",gap:"10px",padding:"15px 20px",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",borderRadius:"8px",transition:"all 0.3s",marginBottom:u["Grand Prizes"]?"20px":"0",borderBottomLeftRadius:u["Grand Prizes"]?"0":"8px",borderBottomRightRadius:u["Grand Prizes"]?"0":"8px"},onMouseEnter:m=>{m.currentTarget.style.transform="translateX(5px)",m.currentTarget.style.boxShadow="0 4px 15px rgba(102, 126, 234, 0.4)"},onMouseLeave:m=>{m.currentTarget.style.transform="translateX(0)",m.currentTarget.style.boxShadow="none"},children:[o.jsx("span",{style:{fontSize:"1.2rem",transition:"transform 0.3s"},children:u["Grand Prizes"]?"":""}),"Grand Prizes (All Weeks Combined)"]}),u["Grand Prizes"]&&o.jsx("div",{className:"prizes-grid",children:k.filter(m=>m.prizeNumber>=9&&m.prizeNumber<=10).map(m=>{const C=m.type==="correctWinners"?"Players who correctly predicted the most game outcomes (which team won)":"Players whose predicted total scores were closest to the actual combined scores";return o.jsxs("div",{className:"prize-card",children:[o.jsxs("div",{className:"prize-header",children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"5px"},children:[o.jsxs("div",{className:"prize-number",children:["PRIZE #",m.prizeNumber]}),o.jsx("div",{title:C,style:{cursor:"help",fontSize:"1.1rem",opacity:.7,transition:"opacity 0.2s"},onMouseOver:b=>b.target.style.opacity="1",onMouseOut:b=>b.target.style.opacity="0.7",children:""})]}),o.jsx("div",{className:"prize-name",children:m.name}),o.jsx("div",{style:{fontSize:"0.85rem",color:"#666",fontWeight:"600",marginTop:"5px",fontStyle:"italic"},children:"Current Leaders"})]}),o.jsx("div",{className:"prize-leaders",children:m.leaders.length===0?o.jsx("div",{className:"no-data",children:"No data available yet"}):o.jsxs("table",{className:"leaders-table",children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{children:"Rank"}),o.jsx("th",{children:"Player"}),o.jsx("th",{children:m.type==="correctWinners"?"Correct":"Difference"})]})}),o.jsx("tbody",{children:m.leaders.map((b,P)=>{const A=P>0&&b.score===m.leaders[P-1].score,R=A?"=":P+1,D=P===0&&!A;return o.jsxs("tr",{className:D?"leader-first":"",children:[o.jsxs("td",{className:"rank",children:[R,D&&o.jsx("span",{style:{marginLeft:"5px",fontSize:"0.8em"},children:""})]}),o.jsxs("td",{className:"player-name",children:[b.playerName,D&&o.jsx("span",{style:{marginLeft:"8px",fontSize:"0.7rem",background:"#4facfe",color:"white",padding:"2px 6px",borderRadius:"4px",fontWeight:"600"},children:"LEADING"})]}),o.jsx("td",{className:"score",children:m.type==="correctWinners"?`${b.score} correct`:`${b.score} pts`})]},P)})})]})})]},m.prizeNumber)})})]}),o.jsx("div",{className:"standings-note",children:o.jsxs("p",{children:[o.jsx("strong",{children:"Note:"}),' Tied players are shown with "=" rank. Pool Manager will resolve ties and declare official prize awards after all games are completed.']})})]})})}function qS({currentWeek:t,games:e,actualScores:n,teamCodes:r,onScoresFetched:s,onGameLockToggle:i,gameLocks:l,espnAutoRefresh:a}){const[c,u]=O.useState(!1),[p,d]=O.useState(null),[h,_]=O.useState(null),[w,T]=O.useState(!1),[E,v]=O.useState(!1),y=async()=>{if(!(c||E)){u(!0),_({type:"loading",message:"Fetching scores from ESPN..."});try{await s(),d(new Date),_({type:"success",message:"Scores updated successfully!"}),setTimeout(()=>_(null),3e3)}catch(P){_({type:"error",message:`Error: ${P.message}`})}finally{u(!1)}}},k=()=>{w?(a.stop(),T(!1),_({type:"info",message:"Auto-refresh stopped"})):(a.start(),T(!0),_({type:"info",message:"Auto-refresh started (every 5 minutes)"})),setTimeout(()=>_(null),3e3)},m=()=>{E?(v(!1),_({type:"info",message:"API resumed - fetching enabled"})):(v(!0),w&&(a.stop(),T(!1)),_({type:"warning",message:"API paused - all fetching disabled"})),setTimeout(()=>_(null),3e3)},C=P=>{var A;return((A=l==null?void 0:l[t])==null?void 0:A[P])===!0},b=P=>{var A,R;return((R=(A=n==null?void 0:n[t])==null?void 0:A[P])==null?void 0:R.source)==="espn"};return o.jsxs("div",{className:"espn-controls",children:[o.jsxs("div",{className:"espn-header",children:[o.jsx("h3",{children:" ESPN API Controls"}),o.jsxs("div",{className:"espn-status-badges",children:[E&&o.jsx("span",{className:"status-badge paused",children:" API PAUSED"}),w&&!E&&o.jsx("span",{className:"status-badge active",children:" AUTO-REFRESH ON"}),p&&o.jsxs("span",{className:"status-badge info",children:["Last fetch: ",p.toLocaleTimeString()]})]})]}),o.jsxs("div",{className:"espn-global-controls",children:[o.jsx("button",{className:"espn-btn fetch-now",onClick:y,disabled:c||E,children:c?" Fetching...":" Fetch Scores Now"}),o.jsx("button",{className:`espn-btn auto-refresh ${w?"active":""}`,onClick:k,disabled:E,children:w?" Stop Auto-Refresh":" Start Auto-Refresh (5 min)"}),o.jsx("button",{className:`espn-btn pause-api ${E?"paused":""}`,onClick:m,children:E?" Resume API":" Pause API"})]}),h&&o.jsx("div",{className:`fetch-status ${h.type}`,children:h.message}),o.jsxs("div",{className:"game-overrides",children:[o.jsx("h4",{children:"Game Override Controls"}),o.jsxs("p",{className:"override-info",children:[" Lock = Manual entry only (ignore API)",o.jsx("br",{})," Unlock = Auto-update from ESPN API"]}),o.jsx("div",{className:"game-override-list",children:e.map(P=>{var ee,Ce,lt,H,Ae;const A=C(P.id),R=b(P.id),D=(ee=n==null?void 0:n[t])==null?void 0:ee[P.id],W=((lt=(Ce=r==null?void 0:r[t])==null?void 0:Ce[P.id])==null?void 0:lt.team1)||P.team1,V=((Ae=(H=r==null?void 0:r[t])==null?void 0:H[P.id])==null?void 0:Ae.team2)||P.team2;return o.jsxs("div",{className:"game-override-item",children:[o.jsxs("div",{className:"game-info",children:[o.jsxs("span",{className:"game-matchup",children:[W," vs ",V]}),D&&o.jsxs("span",{className:"game-scores",children:[n[t][P.id].team1," - ",n[t][P.id].team2]})]}),o.jsxs("div",{className:"game-status-badges",children:[R&&!A&&o.jsx("span",{className:"game-badge api",children:" From API"}),A&&o.jsx("span",{className:"game-badge manual",children:" Manual Entry"}),!D&&o.jsx("span",{className:"game-badge no-score",children:"No Score"})]}),o.jsx("button",{className:`lock-btn ${A?"locked":"unlocked"}`,onClick:()=>i(P.id),title:A?"Unlock to allow API updates":"Lock to prevent API updates",children:A?" Locked":" Unlocked"})]},P.id)})})]}),o.jsxs("div",{className:"espn-help",children:[o.jsx("h4",{children:" How It Works:"}),o.jsxs("ul",{children:[o.jsxs("li",{children:[o.jsx("strong",{children:"Fetch Now:"})," Manually fetch latest scores from ESPN"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Auto-Refresh:"})," Automatically fetch every 5 minutes"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Pause API:"})," Stop all API fetching (use manual entry only)"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Lock Game:"})," Prevent API from overwriting your manual score for that game"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Unlock Game:"})," Allow API to update score automatically"]})]}),o.jsxs("p",{className:"help-note",children:[o.jsx("strong",{children:"Tip:"})," Lock a game if you need to manually correct a score that ESPN has wrong."]})]})]})}const JS="https://site.api.espn.com/apis/site/v2/sports/football/nfl";async function ZS(){try{const t=await fetch(`${JS}/scoreboard`);if(!t.ok)throw new Error(`ESPN API error: ${t.status}`);const e=await t.json();return eC(e)}catch(t){return console.error("Error fetching ESPN scores:",t),{success:!1,error:t.message,games:[]}}}function eC(t){return!t.events||t.events.length===0?{success:!0,games:[],message:"No games currently available"}:{success:!0,games:t.events.map(n=>{const r=n.competitions[0],s=r.status,i=r.competitors,l=i.find(w=>w.homeAway==="away"),a=i.find(w=>w.homeAway==="home"),c=l.team.abbreviation,u=a.team.abbreviation,p=parseInt(l.score)||0,d=parseInt(a.score)||0,h=tC(s);return{espnGameId:n.id,awayTeam:{abbreviation:c,fullName:l.team.displayName,score:p},homeTeam:{abbreviation:u,fullName:a.team.displayName,score:d},status:h.status,statusText:h.text,period:h.period,clock:h.clock,isFinal:h.isFinal,isLive:h.isLive,isScheduled:h.isScheduled,startTime:n.date,lastUpdated:new Date().toISOString()}}),fetchedAt:new Date().toISOString()}}function tC(t){const e=t.type.name,n=t.period,r=t.displayClock,s=t.type.detail;let i="scheduled",l=s,a=!1,c=!1,u=!1;return e==="STATUS_SCHEDULED"?(i="scheduled",l="Scheduled",u=!0):e==="STATUS_IN_PROGRESS"?(i="live",a=!0,n===1?l=`1st Quarter - ${r}`:n===2?l=`2nd Quarter - ${r}`:n===3?l=`3rd Quarter - ${r}`:n===4?l=`4th Quarter - ${r}`:n>4&&(l=`OT ${n-4} - ${r}`)):e==="STATUS_HALFTIME"?(i="halftime",l="Halftime",a=!0):e==="STATUS_END_PERIOD"?(i="live",l=`End of ${n===1?"1st":n===2?"2nd":n===3?"3rd":"4th"} Quarter`,a=!0):(e==="STATUS_FINAL"||e==="STATUS_FINAL_OVERTIME")&&(i="final",c=!0,e==="STATUS_FINAL_OVERTIME"?l=n>4?`Final/OT${n-4}`:"Final/OT":l="Final"),{status:i,text:l,period:n,clock:r||"",isLive:a,isFinal:c,isScheduled:u}}function nC(t,e,n,r){if(!r||!r[n])return null;const s=e[n].games,i=r[n];for(const l of s){const a=i[l.id];if(!a)continue;const c=a.team1===t.awayTeam.abbreviation||a.team1===t.homeTeam.abbreviation,u=a.team2===t.awayTeam.abbreviation||a.team2===t.homeTeam.abbreviation;if(c&&u){const p=a.team1===t.awayTeam.abbreviation;return{gameId:l.id,team1Score:p?t.awayTeam.score:t.homeTeam.score,team2Score:p?t.homeTeam.score:t.awayTeam.score,status:t.status,statusText:t.statusText,period:t.period,clock:t.clock,isFinal:t.isFinal,isLive:t.isLive,espnGameId:t.espnGameId}}}return null}class rC{constructor(e,n=5){this.onFetch=e,this.intervalMinutes=n,this.intervalId=null,this.isRunning=!1}start(){if(this.isRunning){console.log("Auto-refresh already running");return}console.log(`Starting auto-refresh every ${this.intervalMinutes} minutes`),this.isRunning=!0,this.onFetch(),this.intervalId=setInterval(()=>{console.log("Auto-fetching ESPN scores..."),this.onFetch()},this.intervalMinutes*60*1e3)}stop(){if(!this.isRunning){console.log("Auto-refresh not running");return}console.log("Stopping auto-refresh"),clearInterval(this.intervalId),this.intervalId=null,this.isRunning=!1}isActive(){return this.isRunning}setInterval(e){this.intervalMinutes=e,this.isRunning&&(this.stop(),this.start())}}const sC={wildcard:{name:"Week 1 - Wildcard Round",shortName:"Wildcard",deadline:"Fri Jan 9, 11:59 PM PST",number:1},divisional:{name:"Week 2 - Divisional Round",shortName:"Divisional",deadline:"Fri Jan 16, 11:59 PM PST",number:2},conference:{name:"Week 3 - Conference Championships",shortName:"Conference",deadline:"Fri Jan 23, 11:59 PM PST",number:3},superbowl:{name:"Week 4 - Super Bowl LIX",shortName:"Super Bowl",deadline:"Fri Feb 6, 11:59 PM PST",number:4}};function iC(t,e,n,r){return n?{icon:"",text:"LOCKED",color:"gray",className:"locked"}:r?{icon:"",text:"EDITING NOW",color:"purple",className:"editing"}:e&&e.complete?{icon:"",text:"ALL PICKS SAVED",color:"green",className:"saved"}:{icon:"",text:"READY TO PICK",color:"blue",className:"ready"}}function oC({currentWeek:t,onWeekChange:e,weekPicks:n={},weekLockStatus:r={},hasUnsavedChanges:s=!1}){const i=l=>{l!==t&&e(l)};return o.jsxs("div",{className:"week-selector-container",children:[o.jsxs("div",{className:"week-selector-header",children:[o.jsx("h2",{children:" SELECT WEEK TO MAKE/EDIT YOUR PICKS"}),s&&o.jsx("div",{className:"unsaved-indicator",children:" You have unsaved changes"})]}),o.jsx("div",{className:"week-cards",children:Object.entries(sC).map(([l,a])=>{var h;const c=l===t,u=((h=r[l])==null?void 0:h.locked)||!1,p=n[l],d=iC(l,p,u,c);return o.jsxs("div",{className:`week-card ${d.className} ${c?"current":""}`,onClick:()=>i(l),role:"button",tabIndex:0,onKeyPress:_=>{(_.key==="Enter"||_.key===" ")&&i(l)},children:[o.jsxs("div",{className:"week-card-header",children:[o.jsxs("div",{className:"week-number",children:["WEEK ",a.number]}),c&&o.jsx("div",{className:"current-indicator",children:" YOU ARE HERE "})]}),o.jsxs("div",{className:"week-card-title",children:[l==="superbowl"?"":""," ",a.shortName]}),o.jsxs("div",{className:"week-card-deadline",children:[l==="superbowl"?"Game Day: ":"Deadline: ",a.deadline]}),o.jsxs("div",{className:`week-card-status status-${d.className}`,children:[o.jsx("span",{className:"status-icon",children:d.icon}),o.jsx("span",{className:"status-text",children:d.text})]}),u&&o.jsx("div",{className:"locked-overlay",children:o.jsx("div",{className:"locked-message",children:" Cannot Edit"})})]},l)})}),o.jsx("div",{className:"week-selector-footer",children:o.jsx("p",{className:"info-text",children:" You can make picks for all weeks in advance, even if teams aren't known yet."})})]})}function lC({currentWeek:t,onDiscard:e,onSaveAndSwitch:n,onCancel:r}){const s={wildcard:"Week 1",divisional:"Week 2",conference:"Week 3",superbowl:"Week 4"};return o.jsx("div",{className:"popup-overlay",children:o.jsxs("div",{className:"popup-container warning-popup",children:[o.jsxs("div",{className:"popup-header warning",children:[o.jsx("span",{className:"popup-icon",children:""}),o.jsx("h3",{children:"UNSAVED CHANGES"})]}),o.jsxs("div",{className:"popup-body",children:[o.jsxs("p",{children:["You have unsaved changes for ",s[t],"."]}),o.jsx("p",{children:"What would you like to do?"})]}),o.jsxs("div",{className:"popup-buttons",children:[o.jsx("button",{className:"popup-btn btn-secondary",onClick:e,children:"Discard Changes"}),o.jsx("button",{className:"popup-btn btn-primary",onClick:n,children:"Save & Switch"}),o.jsx("button",{className:"popup-btn btn-neutral",onClick:r,children:"Cancel"})]})]})})}function aC({onKeepEditing:t,onDiscard:e}){return o.jsx("div",{className:"popup-overlay",children:o.jsxs("div",{className:"popup-container warning-popup",children:[o.jsxs("div",{className:"popup-header warning",children:[o.jsx("span",{className:"popup-icon",children:""}),o.jsx("h3",{children:"DISCARD CHANGES?"})]}),o.jsxs("div",{className:"popup-body",children:[o.jsx("p",{children:"Your changes will not be saved."}),o.jsx("p",{children:"Your previously saved picks will remain unchanged in the system."})]}),o.jsxs("div",{className:"popup-buttons",children:[o.jsx("button",{className:"popup-btn btn-primary",onClick:t,children:"Keep Editing"}),o.jsx("button",{className:"popup-btn btn-danger",onClick:e,children:"Discard Changes"})]})]})})}function cC({missingGames:t,totalGames:e,onClose:n}){return o.jsx("div",{className:"popup-overlay",children:o.jsxs("div",{className:"popup-container error-popup",children:[o.jsxs("div",{className:"popup-header error",children:[o.jsx("span",{className:"popup-icon",children:""}),o.jsx("h3",{children:"CANNOT SAVE - INCOMPLETE ENTRY"})]}),o.jsxs("div",{className:"popup-body",children:[o.jsx("p",{children:"You must predict scores for ALL games."}),o.jsxs("p",{className:"count-text",children:["Completed: ",o.jsx("strong",{children:e-t.length})," of ",o.jsx("strong",{children:e})," games "]}),o.jsxs("div",{className:"missing-games-list",children:[o.jsx("p",{children:o.jsx("strong",{children:"Missing scores for:"})}),o.jsx("ul",{children:t.map((r,s)=>o.jsxs("li",{children:[" Game ",s+1,": ",r.team1," vs ",r.team2]},s))})]}),o.jsx("p",{className:"instruction-text",children:"Please fill in all games before saving."})]}),o.jsx("div",{className:"popup-buttons",children:o.jsx("button",{className:"popup-btn btn-primary",onClick:n,children:"OK - Go Back and Complete"})})]})})}function uC({invalidScores:t,onClose:e}){return o.jsx("div",{className:"popup-overlay",children:o.jsxs("div",{className:"popup-container error-popup",children:[o.jsxs("div",{className:"popup-header error",children:[o.jsx("span",{className:"popup-icon",children:""}),o.jsx("h3",{children:"INVALID SCORES"})]}),o.jsxs("div",{className:"popup-body",children:[o.jsx("p",{children:"All scores must be between 10 and 50."}),o.jsxs("div",{className:"invalid-scores-list",children:[o.jsx("p",{children:o.jsx("strong",{children:"Invalid scores:"})}),o.jsx("ul",{children:t.map((n,r)=>o.jsxs("li",{children:[" Game ",r+1," (",n.team,"): ",o.jsx("strong",{children:n.score})," (",n.score<10?"too low":"too high",")"]},r))})]}),o.jsx("p",{className:"instruction-text",children:"Please fix these scores."})]}),o.jsx("div",{className:"popup-buttons",children:o.jsx("button",{className:"popup-btn btn-primary",onClick:e,children:"OK - Go Back and Fix"})})]})})}function dC({weekName:t,deadline:e,onClose:n}){return o.jsx("div",{className:"popup-overlay",children:o.jsxs("div",{className:"popup-container success-popup",children:[o.jsxs("div",{className:"popup-header success",children:[o.jsx("span",{className:"popup-icon",children:""}),o.jsx("h3",{children:"PICKS SAVED SUCCESSFULLY!"})]}),o.jsxs("div",{className:"popup-body",children:[o.jsxs("p",{children:["Your ",t," picks have been saved."]}),o.jsx("p",{children:"You can edit them anytime before the deadline:"}),o.jsx("p",{className:"deadline-text",children:o.jsx("strong",{children:e})})]}),o.jsx("div",{className:"popup-buttons",children:o.jsx("button",{className:"popup-btn btn-success",onClick:n,children:"OK"})})]})})}function fC({onClose:t}){return o.jsx("div",{className:"popup-overlay",children:o.jsxs("div",{className:"popup-container info-popup",children:[o.jsxs("div",{className:"popup-header info",children:[o.jsx("span",{className:"popup-icon",children:""}),o.jsx("h3",{children:"NO CHANGES TO SAVE"})]}),o.jsxs("div",{className:"popup-body",children:[o.jsx("p",{children:"You haven't made any changes to your picks."}),o.jsx("p",{children:"Your picks are already saved."})]}),o.jsx("div",{className:"popup-buttons",children:o.jsx("button",{className:"popup-btn btn-primary",onClick:t,children:"OK"})})]})})}function hC({tiedGames:t,gameData:e,onClose:n}){return o.jsx("div",{className:"popup-overlay",children:o.jsxs("div",{className:"popup-container error-popup",children:[o.jsxs("div",{className:"popup-header error",children:[o.jsx("span",{className:"popup-icon",children:""}),o.jsx("h3",{children:"PLAYOFF GAMES CANNOT END IN A TIE!"})]}),o.jsxs("div",{className:"popup-body",children:[o.jsx("p",{style:{fontWeight:"bold",marginBottom:"15px"},children:"The following game(s) have tied scores:"}),o.jsx("ul",{style:{listStyle:"none",padding:0,marginBottom:"15px"},children:t.map(r=>{const s=e.find(i=>i.id===r);return o.jsxs("li",{style:{padding:"8px",background:"#ffebee",border:"1px solid #ef5350",borderRadius:"4px",marginBottom:"8px",color:"#c62828"},children:[" ",s.team1," vs. ",s.team2]},r)})}),o.jsx("p",{style:{fontStyle:"italic",color:"#666"},children:"NFL Playoff games go to overtime until there's a winner!"}),o.jsx("p",{style:{fontWeight:"bold"},children:"Please change the scores so one team wins."})]}),o.jsx("div",{className:"popup-buttons",children:o.jsx("button",{className:"popup-btn btn-primary",onClick:n,children:"Fix Scores"})})]})})}const Ky={1:{name:"Most Correct Predictions",week:"wildcard",weekName:"Week 1"},2:{name:"Closest Total Points",week:"wildcard",weekName:"Week 1"},3:{name:"Most Correct Predictions",week:"divisional",weekName:"Week 2"},4:{name:"Closest Total Points",week:"divisional",weekName:"Week 2"},5:{name:"Most Correct Predictions",week:"conference",weekName:"Week 3"},6:{name:"Closest Total Points",week:"conference",weekName:"Week 3"},7:{name:"Most Correct Predictions",week:"superbowl",weekName:"Week 4"},8:{name:"Closest Total Points",week:"superbowl",weekName:"Week 4"},9:{name:"Overall Most Correct Predictions",week:"all",weekName:"All Weeks"},10:{name:"Overall Closest Total Points",week:"all",weekName:"All Weeks"}};function pC(t,e,n){var r;if(t.week==="all"){let s=0,i=0;return Object.keys(n).forEach(l=>{const a=n[l].games;s+=a.length,a.forEach(c=>{var p;const u=(p=e[l])==null?void 0:p[c.id];if(u){const d=parseInt(u.team1),h=parseInt(u.team2);!isNaN(d)&&!isNaN(h)&&i++}})}),i===0?{status:"NOT_STARTED",gamesCompleted:0,totalGames:s,message:"First game Saturday, January 10, 2026! Standings will update as games finish."}:i<s?{status:"LIVE",gamesCompleted:i,totalGames:s,message:`LIVE NOW! ${i} of ${s} playoff games completed. Standings updating in real-time!`}:{status:"COMPLETE",gamesCompleted:i,totalGames:s,message:"Playoffs complete! Final standings shown above."}}else{const s=((r=n[t.week])==null?void 0:r.games)||[],i=s.length;let l=0;return s.forEach(a=>{var u;const c=(u=e[t.week])==null?void 0:u[a.id];if(c){const p=parseInt(c.team1),d=parseInt(c.team2);!isNaN(p)&&!isNaN(d)&&l++}}),l===0?{status:"NOT_STARTED",gamesCompleted:0,totalGames:i,message:"Games not started yet. Standings will update as games finish!"}:l<i?{status:"LIVE",gamesCompleted:l,totalGames:i,message:`LIVE NOW! ${l} of ${i} games completed. Standings changing in real-time!`}:{status:"COMPLETE",gamesCompleted:l,totalGames:i,message:"All games complete! Final standings shown above."}}}function mC(t,e,n,r){var u,p,d;const s=Ky[t],i=[1,3,5,7,9].includes(t);let l=[],a={},c=[];if(s.week==="all"){l=e,a=n,Object.keys(r).forEach(_=>{c=c.concat(r[_].games.map(w=>({...w,week:_})))});const h={};l.forEach(_=>{h[_.playerCode]||(h[_.playerCode]={playerCode:_.playerCode,playerName:_.playerName,weeklyPicks:[]}),h[_.playerCode].weeklyPicks.push(_)}),l=Object.values(h)}else l=e.filter(h=>h.week===s.week),a=n[s.week]||{},c=((u=r[s.week])==null?void 0:u.games)||[];if(l.length===0)return{leaders:[],allPlayers:[],hasTie:!1,tieCount:0};if(i){let h=0;c.forEach(E=>{var y;const v=s.week==="all"?(y=n[E.week])==null?void 0:y[E.id]:a[E.id];v&&(h+=(parseInt(v.team1)||0)+(parseInt(v.team2)||0))});const _=l.map(E=>{let v=0;return(E.weeklyPicks||[E]).forEach(k=>{c.forEach(m=>{var ee,Ce;const C=(ee=k.predictions)==null?void 0:ee[m.id],b=s.week==="all"?(Ce=n[m.week])==null?void 0:Ce[m.id]:a[m.id];if(!C||!b)return;const P=parseInt(b.team1),A=parseInt(b.team2),R=parseInt(C.team1),D=parseInt(C.team2);if(isNaN(P)||isNaN(A)||isNaN(R)||isNaN(D))return;const W=R>D?"team1":D>R?"team2":"tie",V=P>A?"team1":A>P?"team2":"tie";W!=="tie"&&V!=="tie"&&W===V&&v++})}),{playerCode:E.playerCode,playerName:E.playerName,score:v,actualTotal:h}});_.sort((E,v)=>v.score-E.score);const w=((p=_[0])==null?void 0:p.score)||0,T=_.filter(E=>E.score===w);return{leaders:T,allPlayers:_,hasTie:T.length>1,tieCount:T.length,actualTotal:h}}else{let h=0;c.forEach(E=>{var y;const v=s.week==="all"?(y=n[E.week])==null?void 0:y[E.id]:a[E.id];v&&(h+=(parseInt(v.team1)||0)+(parseInt(v.team2)||0))});const _=l.map(E=>{let v=0;(E.weeklyPicks||[E]).forEach(m=>{c.forEach(C=>{var P;const b=(P=m.predictions)==null?void 0:P[C.id];b&&(v+=(parseInt(b.team1)||0)+(parseInt(b.team2)||0))})});const k=Math.abs(v-h);return{playerCode:E.playerCode,playerName:E.playerName,score:v,actualTotal:h,difference:k}});_.sort((E,v)=>E.difference-v.difference);const w=((d=_[0])==null?void 0:d.difference)||0,T=_.filter(E=>E.difference===w);return{leaders:T,allPlayers:_,hasTie:T.length>1,tieCount:T.length,actualTotal:h}}}function $s({prizeNumber:t,allPicks:e,actualScores:n,weekData:r,officialWinner:s=null}){const[i,l]=O.useState(null),[a,c]=O.useState(!0),u=Ky[t],p=[1,3,5,7,9].includes(t);if(O.useEffect(()=>{try{const E=mC(t,e,n,r);l(E),c(!1)}catch(E){console.error(`Error calculating leaders for Prize ${t}:`,E),c(!1)}},[t,e,n,r]),a)return o.jsxs("div",{className:"leader-card loading",children:[o.jsx("div",{className:"leader-card-header",children:o.jsxs("h3",{children:["Prize #",t," - ",u.name]})}),o.jsx("div",{className:"leader-card-body",children:o.jsx("p",{children:"Calculating leaders..."})})]});if(!i||i.allPlayers.length===0)return o.jsxs("div",{className:"leader-card no-data",children:[o.jsxs("div",{className:"leader-card-header",children:[o.jsxs("h3",{children:["Prize #",t," - ",u.name]}),o.jsx("span",{className:"prize-week",children:u.weekName})]}),o.jsx("div",{className:"leader-card-body",children:o.jsx("p",{children:"No picks available yet."})})]});const{leaders:d,allPlayers:h,hasTie:_,tieCount:w}=i,T=pC(u,n,r);return o.jsxs("div",{className:`leader-card ${_?"has-tie":""}`,children:[o.jsxs("div",{className:"leader-card-header",children:[o.jsxs("h3",{children:["Prize #",t," - ",u.name]}),o.jsx("span",{className:"prize-week",children:u.weekName})]}),o.jsxs("div",{className:"leader-card-body",children:[o.jsxs("div",{className:`game-status ${T.status.toLowerCase()}`,children:[o.jsxs("div",{className:"status-badge",children:[T.status==="NOT_STARTED"&&" NOT STARTED",T.status==="LIVE"&&" LIVE",T.status==="COMPLETE"&&" COMPLETE"]}),o.jsx("div",{className:"status-details",children:T.status!=="NOT_STARTED"&&o.jsxs("span",{className:"games-count",children:[T.gamesCompleted," of ",T.totalGames," games"]})}),o.jsx("p",{className:"status-message",children:T.message})]}),_&&o.jsxs("div",{className:"tie-warning",children:[" ",w,"-WAY TIE FOR 1ST PLACE!"]}),_&&o.jsxs("div",{className:"tied-leaders-section",children:[o.jsx("h4",{children:" TIED FOR 1ST PLACE:"}),o.jsx("div",{className:"leaders-list",children:d.map((E,v)=>o.jsxs("div",{className:`leader-item ${(s==null?void 0:s.playerCode)===E.playerCode?"official-winner":"tied-leader"}`,children:[o.jsxs("span",{className:"leader-rank",children:[v+1,"."]}),o.jsxs("span",{className:"leader-name",children:[E.playerName,(s==null?void 0:s.playerCode)===E.playerCode?o.jsx("span",{className:"official-badge",style:{marginLeft:"8px"},children:" OFFICIAL WINNER"}):o.jsx("span",{className:"leading-badge",style:{marginLeft:"8px"},children:" LEADING"})]}),o.jsx("span",{className:"leader-score",children:p?`${E.score} correct`:`${E.score} pts  Actual: ${E.actualTotal||0} pts  Off by: ${E.difference} pts`})]},v))})]}),_&&h.length>w&&o.jsxs("div",{className:"next-in-line-section",children:[o.jsx("h4",{children:" NEXT IN LINE:"}),o.jsx("div",{className:"leaders-list",children:h.slice(w,w+10).map((E,v)=>o.jsxs("div",{className:"leader-item",children:[o.jsxs("span",{className:"leader-rank",children:[w+v+1,"."]}),o.jsx("span",{className:"leader-name",children:E.playerName}),o.jsx("span",{className:"leader-score",children:p?`${E.score} correct`:`${E.score} pts  Actual: ${E.actualTotal||0} pts  Off by: ${E.difference} pts`})]},v))})]}),!_&&o.jsxs("div",{className:"all-players-section",children:[o.jsx("h4",{children:" ALL PLAYERS RANKED:"}),o.jsx("div",{className:"leaders-list",children:h.map((E,v)=>o.jsxs("div",{className:`leader-item ${v===0&&(s==null?void 0:s.playerCode)===E.playerCode?"official-winner":""}`,children:[o.jsxs("span",{className:"leader-rank",children:[v+1,"."]}),o.jsxs("span",{className:"leader-name",children:[E.playerName,v===0&&((s==null?void 0:s.playerCode)===E.playerCode?o.jsx("span",{className:"official-badge",style:{marginLeft:"8px"},children:" OFFICIAL WINNER"}):o.jsx("span",{className:"leading-badge",style:{marginLeft:"8px"},children:" LEADING"}))]}),o.jsx("span",{className:"leader-score",children:p?`${E.score} correct`:`${E.score} pts  Actual: ${E.actualTotal||0} pts  Off by: ${E.difference} pts`})]},v))})]}),!s&&o.jsx("div",{className:"no-official-winner",children:o.jsx("em",{children:"No official winner declared yet"})})]})]})}function gC({allPicks:t,actualScores:e,games:n,officialWinners:r,weekData:s}){const[i,l]=O.useState({"Week 1":!0,"Week 2":!1,"Week 3":!1,"Week 4":!1,"Grand Prizes":!1}),a=d=>{l(h=>({...h,[d]:!h[d]}))},c=()=>{l({"Week 1":!0,"Week 2":!0,"Week 3":!0,"Week 4":!0,"Grand Prizes":!0})},u=()=>{l({"Week 1":!1,"Week 2":!1,"Week 3":!1,"Week 4":!1,"Grand Prizes":!1})},p=d=>({cursor:"pointer",userSelect:"none",display:"flex",alignItems:"center",gap:"10px",padding:"15px 20px",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",borderRadius:"8px",transition:"all 0.3s",marginBottom:d?"20px":"0",borderBottomLeftRadius:d?"0":"8px",borderBottomRightRadius:d?"0":"8px"});return o.jsxs("div",{className:"leaders-section",children:[o.jsx("h2",{children:" Prize Leaders"}),o.jsx("p",{className:"leaders-description",children:"Current standings for all 10 prizes. Winners will be officially announced by the Pool Manager."}),o.jsxs("div",{style:{display:"flex",gap:"15px",justifyContent:"center",margin:"20px 0"},children:[o.jsx("button",{onClick:c,style:{padding:"10px 20px",background:"#667eea",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"0.95rem",fontWeight:"600",transition:"all 0.2s"},onMouseOver:d=>d.target.style.background="#5568d3",onMouseOut:d=>d.target.style.background="#667eea",children:" Expand All Weeks"}),o.jsx("button",{onClick:u,style:{padding:"10px 20px",background:"#667eea",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"0.95rem",fontWeight:"600",transition:"all 0.2s"},onMouseOver:d=>d.target.style.background="#5568d3",onMouseOut:d=>d.target.style.background="#667eea",children:" Collapse All Weeks"})]}),o.jsxs("div",{style:{marginBottom:"20px"},children:[o.jsxs("h3",{onClick:()=>a("Week 1"),style:p(i["Week 1"]),onMouseEnter:d=>{d.currentTarget.style.transform="translateX(5px)",d.currentTarget.style.boxShadow="0 4px 15px rgba(102, 126, 234, 0.4)"},onMouseLeave:d=>{d.currentTarget.style.transform="translateX(0)",d.currentTarget.style.boxShadow="none"},children:[o.jsx("span",{style:{fontSize:"1.2rem"},children:i["Week 1"]?"":""}),"Week 1 Prizes (Wild Card Round)"]}),i["Week 1"]&&o.jsx("div",{className:"prize-grid",children:[1,2].map(d=>o.jsx($s,{prizeNumber:d,allPicks:t,actualScores:e,weekData:s,officialWinner:r==null?void 0:r[d]},d))})]}),o.jsxs("div",{style:{marginBottom:"20px"},children:[o.jsxs("h3",{onClick:()=>a("Week 2"),style:p(i["Week 2"]),onMouseEnter:d=>{d.currentTarget.style.transform="translateX(5px)",d.currentTarget.style.boxShadow="0 4px 15px rgba(102, 126, 234, 0.4)"},onMouseLeave:d=>{d.currentTarget.style.transform="translateX(0)",d.currentTarget.style.boxShadow="none"},children:[o.jsx("span",{style:{fontSize:"1.2rem"},children:i["Week 2"]?"":""}),"Week 2 Prizes (Divisional Round)"]}),i["Week 2"]&&o.jsx("div",{className:"prize-grid",children:[3,4].map(d=>o.jsx($s,{prizeNumber:d,allPicks:t,actualScores:e,weekData:s,officialWinner:r==null?void 0:r[d]},d))})]}),o.jsxs("div",{style:{marginBottom:"20px"},children:[o.jsxs("h3",{onClick:()=>a("Week 3"),style:p(i["Week 3"]),onMouseEnter:d=>{d.currentTarget.style.transform="translateX(5px)",d.currentTarget.style.boxShadow="0 4px 15px rgba(102, 126, 234, 0.4)"},onMouseLeave:d=>{d.currentTarget.style.transform="translateX(0)",d.currentTarget.style.boxShadow="none"},children:[o.jsx("span",{style:{fontSize:"1.2rem"},children:i["Week 3"]?"":""}),"Week 3 Prizes (Conference Championships)"]}),i["Week 3"]&&o.jsx("div",{className:"prize-grid",children:[5,6].map(d=>o.jsx($s,{prizeNumber:d,allPicks:t,actualScores:e,weekData:s,officialWinner:r==null?void 0:r[d]},d))})]}),o.jsxs("div",{style:{marginBottom:"20px"},children:[o.jsxs("h3",{onClick:()=>a("Week 4"),style:p(i["Week 4"]),onMouseEnter:d=>{d.currentTarget.style.transform="translateX(5px)",d.currentTarget.style.boxShadow="0 4px 15px rgba(102, 126, 234, 0.4)"},onMouseLeave:d=>{d.currentTarget.style.transform="translateX(0)",d.currentTarget.style.boxShadow="none"},children:[o.jsx("span",{style:{fontSize:"1.2rem"},children:i["Week 4"]?"":""}),"Week 4 Prizes (Super Bowl)"]}),i["Week 4"]&&o.jsx("div",{className:"prize-grid",children:[7,8].map(d=>o.jsx($s,{prizeNumber:d,allPicks:t,actualScores:e,weekData:s,officialWinner:r==null?void 0:r[d]},d))})]}),o.jsxs("div",{style:{marginBottom:"20px"},children:[o.jsxs("h3",{onClick:()=>a("Grand Prizes"),style:p(i["Grand Prizes"]),onMouseEnter:d=>{d.currentTarget.style.transform="translateX(5px)",d.currentTarget.style.boxShadow="0 4px 15px rgba(102, 126, 234, 0.4)"},onMouseLeave:d=>{d.currentTarget.style.transform="translateX(0)",d.currentTarget.style.boxShadow="none"},children:[o.jsx("span",{style:{fontSize:"1.2rem"},children:i["Grand Prizes"]?"":""}),"Grand Prizes (All Weeks Combined)"]}),i["Grand Prizes"]&&o.jsx("div",{className:"prize-grid",children:[9,10].map(d=>o.jsx($s,{prizeNumber:d,allPicks:t,actualScores:e,weekData:s,officialWinner:r==null?void 0:r[d]},d))})]})]})}const yC=({isPoolManager:t,playerCodes:e})=>{const[n,r]=O.useState([]),[s,i]=O.useState(!0),[l,a]=O.useState(null),[c,u]=O.useState("all"),[p,d]=O.useState(""),[h,_]=O.useState("newest");O.useEffect(()=>{if(!t){i(!1);return}try{const v=Pd(),y=K(v,"loginLogs"),k=xt(y,m=>{const C=m.val();if(console.log(" Login logs data:",C),C){const b=Object.keys(C).map(P=>({id:P,...C[P]}));console.log(" Parsed logs array:",b),r(b)}else console.log(" No login logs data found"),r([]);i(!1),a(null)},m=>{console.error(" Error fetching login logs:",m),a("Failed to load login logs. Check console for details."),i(!1)});return()=>{k&&k()}}catch(v){console.error(" Error setting up Firebase listener:",v),a("Failed to initialize Firebase. Check console for details."),i(!1)}},[t]);const w=n.filter(v=>{var y,k;if(c==="success"&&!v.success||c==="failed"&&v.success)return!1;if(p){const m=p.toLowerCase(),C=(y=v.playerCode)==null?void 0:y.toLowerCase().includes(m),b=(k=v.playerName)==null?void 0:k.toLowerCase().includes(m);return C||b}return!0}).sort((v,y)=>h==="newest"?y.timestamp-v.timestamp:v.timestamp-y.timestamp),T=()=>{if(w.length===0){alert("No logs to export!");return}const v=["Timestamp","Date/Time","Player Code","Player Name","Status","Error Message","Browser","Device"],y=w.map(P=>[P.timestamp,new Date(P.timestamp).toLocaleString(),P.playerCode||"",P.playerName||"",P.success?"Success":"Failed",P.errorMessage||"",P.browser||"",P.device||""]),k=[v.join(","),...y.map(P=>P.map(A=>`"${A}"`).join(","))].join(`
`),m=new Blob([k],{type:"text/csv;charset=utf-8;"}),C=document.createElement("a"),b=URL.createObjectURL(m);C.setAttribute("href",b),C.setAttribute("download",`login-logs-${new Date().toISOString().split("T")[0]}.csv`),C.style.visibility="hidden",document.body.appendChild(C),C.click(),document.body.removeChild(C),window.URL.revokeObjectURL(b)},E={total:n.length,successful:n.filter(v=>v.success).length,failed:n.filter(v=>v.success===!1).length,uniquePlayers:new Set(n.filter(v=>v.success).map(v=>v.playerCode)).size};return t?s?o.jsx("div",{style:{padding:"60px",textAlign:"center"},children:o.jsxs("div",{style:{display:"inline-block",padding:"20px 40px",background:"#f0f4f8",borderRadius:"10px",boxShadow:"0 2px 10px rgba(0,0,0,0.1)"},children:[o.jsx("p",{style:{fontSize:"1.2rem",margin:"0 0 10px 0",color:"#000"},children:" Loading login logs..."}),o.jsx("p",{style:{fontSize:"0.9rem",color:"#666",margin:0},children:"Connecting to Firebase..."})]})}):l?o.jsx("div",{style:{padding:"60px",textAlign:"center"},children:o.jsxs("div",{style:{display:"inline-block",padding:"30px",background:"#fff3cd",border:"2px solid #ffc107",borderRadius:"10px",boxShadow:"0 2px 10px rgba(0,0,0,0.1)",maxWidth:"600px"},children:[o.jsx("h3",{style:{margin:"0 0 15px 0",color:"#856404"},children:" Error Loading Logs"}),o.jsx("p",{style:{color:"#856404",margin:"0 0 15px 0"},children:l}),o.jsx("button",{onClick:()=>window.location.reload(),style:{marginTop:"20px",padding:"12px 24px",background:"#667eea",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"1rem",fontWeight:"600"},children:" Reload Page"})]})}):o.jsxs("div",{style:{margin:"40px auto",maxWidth:"1400px",padding:"0 20px"},children:[o.jsxs("div",{style:{marginBottom:"30px"},children:[o.jsxs("h1",{style:{fontSize:"2rem",margin:"0 0 10px 0",color:"#000",display:"flex",alignItems:"center",gap:"10px"},children:[" Login Activity Log",o.jsx("span",{style:{fontSize:"0.7rem",padding:"4px 12px",background:"#667eea",color:"white",borderRadius:"20px",fontWeight:"500"},children:"Pool Manager Only"})]}),o.jsx("p",{style:{color:"#666",margin:0},children:"Monitor all login attempts to the NFL Playoff Pool"})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"20px",marginBottom:"30px"},children:[o.jsxs("div",{style:{background:"linear-gradient(135deg, #84fab0 0%, #8fd3f4 100%)",padding:"25px",borderRadius:"12px",boxShadow:"0 4px 15px rgba(0,0,0,0.1)",color:"#000"},children:[o.jsx("div",{style:{fontSize:"2.5rem",fontWeight:"bold",marginBottom:"5px"},children:E.successful}),o.jsx("div",{style:{fontSize:"1rem",fontWeight:"500"},children:"Successful Logins"})]}),o.jsxs("div",{style:{background:"linear-gradient(135deg, #fa709a 0%, #fee140 100%)",padding:"25px",borderRadius:"12px",boxShadow:"0 4px 15px rgba(0,0,0,0.1)",color:"#000"},children:[o.jsx("div",{style:{fontSize:"2.5rem",fontWeight:"bold",marginBottom:"5px"},children:E.failed}),o.jsx("div",{style:{fontSize:"1rem",fontWeight:"500"},children:"Failed Attempts"})]}),o.jsxs("div",{style:{background:"linear-gradient(135deg, #a8edea 0%, #fed6e3 100%)",padding:"25px",borderRadius:"12px",boxShadow:"0 4px 15px rgba(0,0,0,0.1)",color:"#000"},children:[o.jsx("div",{style:{fontSize:"2.5rem",fontWeight:"bold",marginBottom:"5px"},children:E.uniquePlayers}),o.jsx("div",{style:{fontSize:"1rem",fontWeight:"500"},children:"Unique Players"})]}),o.jsxs("div",{style:{background:"linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%)",padding:"25px",borderRadius:"12px",boxShadow:"0 4px 15px rgba(0,0,0,0.1)",color:"#000"},children:[o.jsx("div",{style:{fontSize:"2.5rem",fontWeight:"bold",marginBottom:"5px"},children:E.total}),o.jsx("div",{style:{fontSize:"1rem",fontWeight:"500"},children:"Total Attempts"})]})]}),o.jsxs("div",{style:{background:"white",padding:"20px",borderRadius:"10px",marginBottom:"20px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",display:"flex",flexWrap:"wrap",gap:"15px",alignItems:"center"},children:[o.jsxs("div",{style:{display:"flex",gap:"10px",flexWrap:"wrap"},children:[o.jsxs("button",{onClick:()=>u("all"),style:{padding:"10px 20px",background:c==="all"?"#667eea":"#f0f0f0",color:c==="all"?"white":"#333",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:"600",fontSize:"0.9rem"},children:["All (",E.total,")"]}),o.jsxs("button",{onClick:()=>u("success"),style:{padding:"10px 20px",background:c==="success"?"#4caf50":"#f0f0f0",color:c==="success"?"white":"#333",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:"600",fontSize:"0.9rem"},children:[" Success (",E.successful,")"]}),o.jsxs("button",{onClick:()=>u("failed"),style:{padding:"10px 20px",background:c==="failed"?"#f44336":"#f0f0f0",color:c==="failed"?"white":"#333",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:"600",fontSize:"0.9rem"},children:[" Failed (",E.failed,")"]})]}),o.jsx("input",{type:"text",placeholder:"Search by code or name...",value:p,onChange:v=>d(v.target.value),style:{padding:"10px 15px",border:"2px solid #e0e0e0",borderRadius:"6px",fontSize:"0.9rem",flex:"1",minWidth:"200px",color:"#000"}}),o.jsxs("select",{value:h,onChange:v=>_(v.target.value),style:{padding:"10px 15px",border:"2px solid #e0e0e0",borderRadius:"6px",fontSize:"0.9rem",cursor:"pointer",background:"white",color:"#000"},children:[o.jsx("option",{value:"newest",children:"Newest First"}),o.jsx("option",{value:"oldest",children:"Oldest First"})]}),o.jsx("button",{onClick:T,style:{padding:"10px 20px",background:"#4caf50",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:"600",fontSize:"0.9rem",display:"flex",alignItems:"center",gap:"8px"},children:" Export CSV"})]}),w.length===0?o.jsx("div",{style:{background:"white",padding:"60px 40px",borderRadius:"10px",textAlign:"center",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:p?o.jsx("p",{style:{fontSize:"1.2rem",margin:0,color:"#666"},children:" No logs match your search"}):o.jsxs(o.Fragment,{children:[o.jsx("p",{style:{fontSize:"1.5rem",margin:"0 0 20px 0",color:"#333"},children:" No login attempts logged yet"}),o.jsxs("div",{style:{background:"#f8f9fa",padding:"25px",borderRadius:"8px",maxWidth:"600px",margin:"0 auto",textAlign:"left"},children:[o.jsx("p",{style:{margin:"0 0 15px 0",fontSize:"1rem",color:"#666"},children:o.jsx("strong",{children:"To test login tracking:"})}),o.jsxs("ol",{style:{margin:0,paddingLeft:"20px",color:"#666",lineHeight:"2"},children:[o.jsx("li",{children:'Logout (click " Logout" button)'}),o.jsx("li",{children:'Try logging in with a WRONG code (e.g., "ABC123")'}),o.jsx("li",{children:"See the failed attempt appear here"}),o.jsx("li",{children:"Login with your correct code"}),o.jsx("li",{children:"See the successful login appear here"})]})]})]})}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{style:{padding:"15px 20px",background:"#f8f9fa",borderRadius:"8px",marginBottom:"15px",display:"flex",alignItems:"center",gap:"10px"},children:[o.jsx("span",{style:{fontSize:"1.2rem"},children:""}),o.jsxs("span",{style:{fontWeight:"600",color:"#000"},children:["Showing: ",w.length," of ",n.length," total attempts"]})]}),o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"15px"},children:w.map((v,y)=>o.jsxs("div",{style:{padding:"20px",background:v.success?"#e8f5e9":"#ffebee",border:`3px solid ${v.success?"#4caf50":"#f44336"}`,borderRadius:"12px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",transition:"transform 0.2s",cursor:"default"},onMouseEnter:k=>k.currentTarget.style.transform="scale(1.01)",onMouseLeave:k=>k.currentTarget.style.transform="scale(1)",children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px",flexWrap:"wrap",gap:"10px"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[o.jsxs("span",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#000"},children:["#",w.length-y]}),o.jsx("span",{style:{padding:"8px 16px",background:v.success?"#4caf50":"#f44336",color:"white",borderRadius:"20px",fontWeight:"bold",fontSize:"0.9rem"},children:v.success?" SUCCESS":" FAILED"})]}),o.jsx("div",{style:{fontSize:"0.95rem",color:"#666",fontWeight:"500"},children:new Date(v.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"})})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"15px"},children:[o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"0.85rem",color:"#666",marginBottom:"5px",fontWeight:"500"},children:"Player Code"}),o.jsx("div",{style:{fontSize:"1.1rem",fontWeight:"bold",color:"#000",fontFamily:"monospace"},children:v.playerCode||"N/A"})]}),o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"0.85rem",color:"#666",marginBottom:"5px",fontWeight:"500"},children:"Player Name"}),o.jsx("div",{style:{fontSize:"1.1rem",fontWeight:"bold",color:"#000"},children:v.playerName||"N/A"})]}),o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"0.85rem",color:"#666",marginBottom:"5px",fontWeight:"500"},children:"Browser"}),o.jsx("div",{style:{fontSize:"1.1rem",fontWeight:"bold",color:"#000"},children:v.browser||"N/A"})]}),o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"0.85rem",color:"#666",marginBottom:"5px",fontWeight:"500"},children:"Device"}),o.jsx("div",{style:{fontSize:"1.1rem",fontWeight:"bold",color:"#000"},children:v.device||"N/A"})]})]}),!v.success&&v.errorMessage&&o.jsxs("div",{style:{marginTop:"15px",padding:"12px",background:"#fff",borderLeft:"4px solid #f44336",borderRadius:"4px"},children:[o.jsx("div",{style:{fontSize:"0.85rem",color:"#666",marginBottom:"5px",fontWeight:"500"},children:"Error Message"}),o.jsx("div",{style:{fontSize:"1rem",color:"#d32f2f",fontWeight:"600",fontStyle:"italic"},children:v.errorMessage})]})]},v.id))})]}),o.jsx("div",{style:{marginTop:"30px",padding:"20px",background:"#f8f9fa",borderRadius:"8px",textAlign:"center"},children:o.jsx("p",{style:{margin:0,color:"#666",fontSize:"0.9rem",fontStyle:"italic"},children:" Logs update in real-time. Failed attempts help identify players who need assistance with their codes."})})]}):o.jsx("div",{style:{padding:"40px",textAlign:"center",color:"#999"},children:o.jsx("p",{children:" This feature is only available to Pool Managers"})})},xC=()=>{const t=navigator.userAgent;let e="Unknown";if(t.indexOf("Firefox")>-1){const n=t.match(/Firefox\/(\d+)/);e=n?`Firefox ${n[1]}`:"Firefox"}else if(t.indexOf("SamsungBrowser")>-1)e="Samsung Internet";else if(t.indexOf("Opera")>-1||t.indexOf("OPR")>-1)e="Opera";else if(t.indexOf("Trident")>-1)e="Internet Explorer";else if(t.indexOf("Edge")>-1)e="Edge";else if(t.indexOf("Chrome")>-1){const n=t.match(/Chrome\/(\d+)/);e=n?`Chrome ${n[1]}`:"Chrome"}else if(t.indexOf("Safari")>-1){const n=t.match(/Version\/(\d+)/);e=n?`Safari ${n[1]}`:"Safari"}return e},vC=()=>{const t=navigator.userAgent;return/(tablet|ipad|playbook|silk)|(android(?!.*mobi))/i.test(t)?"Tablet":/Mobile|iP(hone|od)|Android|BlackBerry|IEMobile|Kindle|Silk-Accelerated|(hpw|web)OS|Opera M(obi|ini)/.test(t)?"Mobile":"Desktop"},Qy=async({playerCode:t,playerName:e=null,success:n,errorMessage:r=null})=>{try{const s=Pd(),i=K(s,"loginLogs"),l={timestamp:Date.now(),playerCode:t||"EMPTY",playerName:e||null,success:n,errorMessage:r||null,browser:xC(),device:vC(),userAgent:navigator.userAgent};await Do(i,l),console.log(" Login attempt logged:",{code:t,success:n,browser:l.browser,device:l.device})}catch(s){console.error(" Failed to log login attempt:",s)}},_C=async(t,e)=>Qy({playerCode:t,playerName:e,success:!0,errorMessage:null}),Fa=async(t,e)=>Qy({playerCode:t,playerName:null,success:!1,errorMessage:e});function gr(t,e){if(!t||!t[e])return 0;let n=0;const r=t[e];return Object.keys(r).forEach(s=>{const i=r[s];i&&i.team1!==void 0&&i.team2!==void 0&&(n+=parseInt(i.team1)+parseInt(i.team2))}),n}function yr(t,e){if(!t||!t[e])return 0;let n=0;const r=t[e];return Object.keys(r).forEach(s=>{const i=r[s];i&&i.team1!==void 0&&i.team2!==void 0&&(n+=parseInt(i.team1)+parseInt(i.team2))}),n}function Id(t,e){if(!t||!t[e])return{};const n={},r=t[e];return Object.keys(r).forEach(s=>{const i=r[s];if(i&&i.team1!==void 0&&i.team2!==void 0){const l=parseInt(i.team1),a=parseInt(i.team2);l>a?n[s]="team1":a>l&&(n[s]="team2")}}),n}function Xy(t,e,n){if(!t||!t[n])return 0;let r=0;const s=t[n];return Object.keys(e).forEach(i=>{const l=e[i],a=s[i];if(a&&a.team1!==void 0&&a.team2!==void 0){const c=parseInt(a.team1),u=parseInt(a.team2);let p=null;c>u?p="team1":u>c&&(p="team2"),p===l&&r++}}),r}function Vn(t,e){return Math.abs(t-e)}function Ba(t,e,n){const r=Id(e,n);if(Object.keys(r).length===0)return{status:"not_scored",winner:null,message:"Waiting for game results"};const s=yr(e,n),i=[];if(Object.keys(t).forEach(d=>{const h=t[d],_=h.name,w=h.picks;if(!w||!w[n])return;const T=Xy(w,r,n),E=gr(w,n),v=Vn(E,s);i.push({name:_,code:d,correctWinners:T,predictedTotal:E,difference:v})}),i.length===0)return{status:"no_picks",winner:null,message:"No picks submitted for this week"};const l=Math.max(...i.map(d=>d.correctWinners)),a=i.filter(d=>d.correctWinners===l);if(a.length===1)return{status:"calculated",winner:a[0].name,winnerCode:a[0].code,correctWinners:l,tiebreakerUsed:!1,isTrueTie:!1,tiedPlayers:null,allPlayerResults:i.sort((d,h)=>h.correctWinners-d.correctWinners)};const c=Math.min(...a.map(d=>d.difference)),u=a.filter(d=>d.difference===c),p=u.length>1;return{status:"calculated",winner:p?u.map(d=>d.name):u[0].name,winnerCode:p?u.map(d=>d.code):u[0].code,correctWinners:l,actualTotal:s,predictedTotal:u[0].predictedTotal,difference:u[0].difference,tiebreakerUsed:!0,tiebreakerLevel:`${n} Total Points`,isTrueTie:p,tiedPlayers:a.map(d=>d.name),tiedPlayersDetails:a.map(d=>({name:d.name,correctWinners:d.correctWinners,predictedTotal:d.predictedTotal,difference:d.difference})),allPlayerResults:i.sort((d,h)=>h.correctWinners-d.correctWinners)}}function $a(t,e,n){const r=yr(e,n);if(r===0)return{status:"not_scored",winner:null,message:"Waiting for game results"};const s=[];if(Object.keys(t).forEach(c=>{const u=t[c],p=u.name,d=u.picks;if(!d||!d[n])return;const h=gr(d,n),_=Vn(h,r);s.push({name:p,code:c,predictedTotal:h,difference:_})}),s.length===0)return{status:"no_picks",winner:null,message:"No picks submitted for this week"};const i=Math.min(...s.map(c=>c.difference)),l=s.filter(c=>c.difference===i);if(l.length===0)return{status:"no_picks",winner:null,message:"No valid picks submitted for this week"};const a=l.length>1;return{status:"calculated",winner:a?l.map(c=>c.name):l[0].name,winnerCode:a?l.map(c=>c.code):l[0].code,actualTotal:r,predictedTotal:l[0].predictedTotal,difference:i,tiebreakerUsed:!1,isTrueTie:a,tiedPlayers:a?l.map(c=>c.name):null,allPlayerResults:s.sort((c,u)=>c.difference-u.difference)}}function wC(t,e){const n="superbowl",r=Id(e,n);if(Object.keys(r).length===0)return{status:"not_scored",winner:null,message:"Waiting for Super Bowl results"};const s=r[13];if(!s)return{status:"not_scored",winner:null,message:"Super Bowl winner not determined"};const i=[];if(Object.keys(t).forEach(p=>{const d=t[p],h=d.name,_=d.picks;if(!_||!_[n]||!_[n][13])return;const w=_[n][13],T=parseInt(w.team1),E=parseInt(w.team2);let v=null;T>E?v="team1":E>T&&(v="team2"),v===s&&i.push({name:h,code:p,picks:_})}),i.length===0)return{status:"no_winner",winner:null,message:"No players picked the correct Super Bowl winner"};if(i.length===1)return{status:"calculated",winner:i[0].name,winnerCode:i[0].code,pickedCorrectWinner:!0,eligiblePlayers:1,eliminatedPlayers:Object.keys(t).length-1,tiebreakerUsed:!1,isTrueTie:!1,steps:[{level:"Correct Super Bowl Winner",remaining:1,winner:i[0].name}]};const l=[{key:"superbowl",name:"Week 4"},{key:"conference",name:"Week 3"},{key:"divisional",name:"Week 2"},{key:"wildcard",name:"Week 1"}];let a=[...i];const c=[{level:"Correct Super Bowl Winner",remaining:i.length,tied:i.map(p=>p.name)}];for(const p of l){if(a.length===1)break;const d=yr(e,p.key),h=a.map(w=>{const T=gr(w.picks,p.key),E=Vn(T,d);return{...w,predictedTotal:T,difference:E,actualTotal:d}}),_=Math.min(...h.map(w=>w.difference));if(a=h.filter(w=>w.difference===_),c.push({level:`${p.name} Total Points`,actualTotal:d,remaining:a.length,tied:a.map(w=>w.name),minDifference:_,details:h.map(w=>({name:w.name,predictedTotal:w.predictedTotal,difference:w.difference}))}),a.length===1)break}const u=a.length>1;return{status:"calculated",winner:u?a.map(p=>p.name):a[0].name,winnerCode:u?a.map(p=>p.code):a[0].code,pickedCorrectWinner:!0,eligiblePlayers:i.length,eliminatedPlayers:Object.keys(t).length-i.length,tiebreakerUsed:c.length>1,isTrueTie:u,steps:c}}function kC(t,e){const n="superbowl",r=yr(e,n);if(r===0)return{status:"not_scored",winner:null,message:"Waiting for Super Bowl results"};const s=[];if(Object.keys(t).forEach(p=>{const d=t[p],h=d.name,_=d.picks;if(!_||!_[n])return;const w=gr(_,n),T=Vn(w,r);s.push({name:h,code:p,picks:_,predictedTotal:w,difference:T})}),s.length===0)return{status:"no_picks",winner:null,message:"No picks submitted for Super Bowl"};const i=Math.min(...s.map(p=>p.difference));let l=s.filter(p=>p.difference===i);if(l.length===1)return{status:"calculated",winner:l[0].name,winnerCode:l[0].code,actualTotal:r,predictedTotal:l[0].predictedTotal,difference:i,tiebreakerUsed:!1,isTrueTie:!1,steps:[{level:"Week 4 Total Points",actualTotal:r,remaining:1,winner:l[0].name,minDifference:i}]};const a=[{key:"conference",name:"Week 3"},{key:"divisional",name:"Week 2"},{key:"wildcard",name:"Week 1"}],c=[{level:"Week 4 Total Points",actualTotal:r,remaining:l.length,tied:l.map(p=>p.name),minDifference:i,details:l.map(p=>({name:p.name,predictedTotal:p.predictedTotal,difference:p.difference}))}];for(const p of a){if(l.length===1)break;const d=yr(e,p.key),h=l.map(w=>{const T=gr(w.picks,p.key),E=Vn(T,d);return{...w,weekPredictedTotal:T,weekDifference:E,weekActualTotal:d}}),_=Math.min(...h.map(w=>w.weekDifference));if(l=h.filter(w=>w.weekDifference===_),c.push({level:`${p.name} Total Points`,actualTotal:d,remaining:l.length,tied:l.map(w=>w.name),minDifference:_,details:h.map(w=>({name:w.name,predictedTotal:w.weekPredictedTotal,difference:w.weekDifference}))}),l.length===1)break}if(l.length===0)return{status:"no_picks",winner:null,message:"No valid picks for tiebreaker weeks"};const u=l.length>1;return{status:"calculated",winner:u?l.map(p=>p.name):l[0].name,winnerCode:u?l.map(p=>p.code):l[0].code,actualTotal:r,predictedTotal:l[0].predictedTotal,difference:l[0].difference,tiebreakerUsed:c.length>1,isTrueTie:u,steps:c,allPlayerResults:s.sort((p,d)=>p.difference-d.difference)}}function SC(t,e){const n=[{key:"wildcard",name:"Week 1"},{key:"divisional",name:"Week 2"},{key:"conference",name:"Week 3"},{key:"superbowl",name:"Week 4"}],r={};if(n.forEach(d=>{r[d.key]=Id(e,d.key)}),!n.every(d=>Object.keys(r[d.key]).length>0))return{status:"not_scored",winner:null,message:"Waiting for all playoff rounds to complete"};const i=[];if(Object.keys(t).forEach(d=>{const h=t[d],_=h.name,w=h.picks;let T=0;const E={};n.forEach(v=>{const y=Xy(w,r[v.key],v.key);E[v.key]=y,T+=y}),i.push({name:_,code:d,picks:w,totalCorrect:T,weeklyCorrect:E})}),i.length===0)return{status:"no_picks",winner:null,message:"No picks submitted"};const l=Math.max(...i.map(d=>d.totalCorrect));let a=i.filter(d=>d.totalCorrect===l);if(a.length===1)return{status:"calculated",winner:a[0].name,winnerCode:a[0].code,correctWinners:l,tiebreakerUsed:!1,isTrueTie:!1,steps:[{layer:0,type:"Overall Correct Winners",remaining:1,winner:a[0].name,correctWinners:l}]};const c=[{layer:0,type:"Overall Correct Winners",remaining:a.length,tied:a.map(d=>d.name),correctWinners:l}],u=[...n].reverse();for(const d of u){if(a.length===1)break;const h=Math.max(...a.map(w=>w.weeklyCorrect[d.key])),_=a.length;if(a=a.filter(w=>w.weeklyCorrect[d.key]===h),c.push({layer:1,type:"Correct Winners",level:`${d.name} Winners`,remaining:a.length,tied:a.map(w=>w.name),maxCorrect:h,eliminated:_-a.length}),a.length===1)break}if(a.length===1)return{status:"calculated",winner:a[0].name,winnerCode:a[0].code,correctWinners:l,tiebreakerUsed:!0,isTrueTie:!1,steps:c};for(const d of u){if(a.length===1)break;const h=yr(e,d.key),_=a.map(E=>{const v=gr(E.picks,d.key),y=Vn(v,h);return{...E,weekPredictedTotal:v,weekDifference:y}}),w=Math.min(..._.map(E=>E.weekDifference)),T=a.length;if(a=_.filter(E=>E.weekDifference===w),c.push({layer:2,type:"Closest to Totals",level:`${d.name} Total Points`,actualTotal:h,remaining:a.length,tied:a.map(E=>E.name),minDifference:w,eliminated:T-a.length,details:_.map(E=>({name:E.name,predictedTotal:E.weekPredictedTotal,difference:E.weekDifference}))}),a.length===1)break}if(a.length===0)return{status:"no_picks",winner:null,message:"No valid picks for tiebreaker weeks"};const p=a.length>1;return{status:"calculated",winner:p?a.map(d=>d.name):a[0].name,winnerCode:p?a.map(d=>d.code):a[0].code,correctWinners:l,tiebreakerUsed:!0,isTrueTie:p,steps:c,allPlayerResults:i.sort((d,h)=>h.totalCorrect-d.totalCorrect)}}function CC(t,e){const n=[{key:"wildcard",name:"Week 1"},{key:"divisional",name:"Week 2"},{key:"conference",name:"Week 3"},{key:"superbowl",name:"Week 4"}],r={};let s=0;if(n.forEach(d=>{const h=yr(e,d.key);r[d.key]=h,s+=h}),s===0)return{status:"not_scored",winner:null,message:"Waiting for all playoff rounds to complete"};const i=[];if(Object.keys(t).forEach(d=>{const h=t[d],_=h.name,w=h.picks;let T=0;const E={};n.forEach(y=>{const k=gr(w,y.key);E[y.key]=k,T+=k});const v=Vn(T,s);i.push({name:_,code:d,picks:w,overallPredictedTotal:T,overallDifference:v,weeklyPredictedTotals:E})}),i.length===0)return{status:"no_picks",winner:null,message:"No picks submitted"};const l=Math.min(...i.map(d=>d.overallDifference));let a=i.filter(d=>d.overallDifference===l);if(a.length===1)return{status:"calculated",winner:a[0].name,winnerCode:a[0].code,overallActualTotal:s,overallPredictedTotal:a[0].overallPredictedTotal,difference:l,tiebreakerUsed:!1,isTrueTie:!1,steps:[{level:"Overall Total Points",actualTotal:s,remaining:1,winner:a[0].name,minDifference:l}],allPlayerResults:i.sort((d,h)=>d.overallDifference-h.overallDifference)};const c=[{level:"Overall Total Points",actualTotal:s,remaining:a.length,tied:a.map(d=>d.name),minDifference:l,details:a.map(d=>({name:d.name,predictedTotal:d.overallPredictedTotal,difference:d.overallDifference}))}],u=[...n].reverse();for(const d of u){if(a.length===1)break;const h=r[d.key],_=a.map(E=>{const v=E.weeklyPredictedTotals[d.key],y=Vn(v,h);return{...E,weekPredictedTotal:v,weekDifference:y}}),w=Math.min(..._.map(E=>E.weekDifference)),T=a.length;if(a=_.filter(E=>E.weekDifference===w),c.push({level:`${d.name} Total Points`,actualTotal:h,remaining:a.length,tied:a.map(E=>E.name),minDifference:w,eliminated:T-a.length,details:_.map(E=>({name:E.name,predictedTotal:E.weekPredictedTotal,difference:E.weekDifference}))}),a.length===1)break}if(a.length===0)return{status:"no_picks",winner:null,message:"No valid picks for tiebreaker weeks"};const p=a.length>1;return{status:"calculated",winner:p?a.map(d=>d.name):a[0].name,winnerCode:p?a.map(d=>d.code):a[0].code,overallActualTotal:s,overallPredictedTotal:a[0].overallPredictedTotal,difference:a[0].overallDifference,tiebreakerUsed:c.length>1,isTrueTie:p,steps:c,allPlayerResults:i.sort((d,h)=>d.overallDifference-h.overallDifference)}}const EC=({calculatedWinners:t,publishedWinners:e,isPoolManager:n,onPublishPrize:r,onUnpublishPrize:s})=>{const[i,l]=O.useState({"Week 1":!0,"Week 2":!1,"Week 3":!1,"Week 4":!1,"Grand Prize":!1}),[a,c]=O.useState({}),u=m=>{l(C=>({...C,[m]:!C[m]}))},p=m=>{c(C=>({...C,[m]:!C[m]}))},d=()=>{l({"Week 1":!0,"Week 2":!0,"Week 3":!0,"Week 4":!0,"Grand Prize":!0})},h=()=>{l({"Week 1":!1,"Week 2":!1,"Week 3":!1,"Week 4":!1,"Grand Prize":!1})},_=[{week:"Week 1",title:"Most Correct Winners",amount:"$50",icon:"",calcKey:"week1.prize1",pubKey:"week1_prize1"},{week:"Week 1",title:"Closest Total Points",amount:"$50",icon:"",calcKey:"week1.prize2",pubKey:"week1_prize2"},{week:"Week 2",title:"Most Correct Winners",amount:"$50",icon:"",calcKey:"week2.prize1",pubKey:"week2_prize1"},{week:"Week 2",title:"Closest Total Points",amount:"$50",icon:"",calcKey:"week2.prize2",pubKey:"week2_prize2"},{week:"Week 3",title:"Most Correct Winners",amount:"$50",icon:"",calcKey:"week3.prize1",pubKey:"week3_prize1"},{week:"Week 3",title:"Closest Total Points",amount:"$50",icon:"",calcKey:"week3.prize2",pubKey:"week3_prize2"},{week:"Week 4",title:"Correct Winner",amount:"$50",icon:"",calcKey:"week4.prize1",pubKey:"week4_prize1"},{week:"Week 4",title:"Closest Total Points",amount:"$50",icon:"",calcKey:"week4.prize2",pubKey:"week4_prize2"},{week:"Grand Prize",title:"Most Correct Winners",amount:"$120",icon:"",calcKey:"grandPrize.prize1",pubKey:"grand_prize1"},{week:"Grand Prize",title:"Closest Total Points",amount:"$80",icon:"",calcKey:"grandPrize.prize2",pubKey:"grand_prize2"}],w=m=>{const C=m.split(".");let b=t;for(const P of C)if(b=b==null?void 0:b[P],!b)return null;return b},T=m=>(e==null?void 0:e[m])===!0,E=(m,C)=>{r&&r(m.pubKey,m,C)},v=(m,C)=>{const b=C.steps&&C.steps.length>0,P=C.tiebreakerUsed&&C.tiedPlayersDetails&&C.tiedPlayersDetails.length>0;if(!b&&!P)return o.jsxs("div",{className:"expanded-view",children:[o.jsx("div",{className:"breakdown-header",children:" FULL BREAKDOWN "}),o.jsx("p",{children:"Winner determined without tiebreakers."})]});if(b)return o.jsxs("div",{className:"expanded-view",children:[o.jsx("div",{className:"breakdown-header",children:" FULL TIEBREAKER BREAKDOWN "}),C.steps.map((A,R)=>o.jsxs("div",{className:"breakdown-step",children:[o.jsxs("div",{className:"step-header",children:[A.layer!==void 0&&o.jsxs("span",{className:"layer-badge",children:["Layer ",A.layer]}),"STEP ",R+1,": ",A.level]}),A.actualTotal!==void 0&&o.jsxs("div",{className:"step-detail",children:["Actual total: ",A.actualTotal," points"]}),A.remaining!==void 0&&o.jsxs("div",{className:"step-detail",children:[A.remaining," player",A.remaining!==1?"s":""," remain",A.remaining===1?"s":""]}),A.tied&&A.tied.length>1&&o.jsxs("div",{className:"step-detail tied-players",children:[" Tied: ",A.tied.join(", ")]}),A.winner&&o.jsxs("div",{className:"step-detail winner",children:[" Winner: ",o.jsx("strong",{children:A.winner})]}),A.eliminated>0&&o.jsxs("div",{className:"step-detail eliminated",children:[" ",A.eliminated," player",A.eliminated!==1?"s":""," eliminated"]}),A.details&&A.details.length>0&&o.jsx("div",{className:"player-details",children:A.details.map((D,W)=>o.jsxs("div",{className:"player-row",children:[o.jsxs("span",{className:"player-name",children:[D.name,":"]}),o.jsxs("span",{className:"player-prediction",children:[D.predictedTotal," predicted"]}),o.jsxs("span",{className:"player-diff",children:["(off by ",D.difference,")"]})]},W))})]},R))]});if(P)return o.jsxs("div",{className:"expanded-view",children:[o.jsx("div",{className:"breakdown-header",children:" FULL TIEBREAKER BREAKDOWN "}),o.jsxs("div",{className:"breakdown-step",children:[o.jsxs("div",{className:"step-header",children:["INITIAL TIE: ",C.correctWinners," correct winner",C.correctWinners!==1?"s":""]}),o.jsxs("div",{className:"step-detail tied-players",children:[" Tied: ",C.tiedPlayers.join(", ")]})]}),o.jsxs("div",{className:"breakdown-step",children:[o.jsxs("div",{className:"step-header",children:["TIEBREAKER: ",C.tiebreakerLevel]}),o.jsxs("div",{className:"step-detail",children:["Actual total: ",C.actualTotal," points"]}),o.jsx("div",{className:"player-details",children:C.tiedPlayersDetails.map((A,R)=>o.jsxs("div",{className:"player-row",children:[o.jsxs("span",{className:"player-name",children:[A.name,":"]}),o.jsxs("span",{className:"player-prediction",children:[A.predictedTotal," predicted"]}),o.jsxs("span",{className:"player-diff",children:["(off by ",A.difference,")"]}),A.name===C.winner&&o.jsx("span",{className:"winner-badge",children:" WINNER"})]},R))})]})]})},y=m=>{var A;const C=w(m.calcKey),b=T(m.pubKey),P=a[m.pubKey]||!1;return!C||C.status==="not_scored"||C.status==="no_picks"?o.jsxs("div",{className:"prize-card",children:[o.jsxs("div",{className:"prize-header",children:[o.jsx("span",{className:"prize-icon",children:m.icon}),o.jsx("span",{className:"prize-title",children:m.title}),o.jsx("span",{className:"prize-amount",children:m.amount})]}),o.jsx("div",{className:"prize-status waiting",children:" Waiting for game results"})]},m.pubKey):b?o.jsxs("div",{className:"prize-card published",children:[o.jsxs("div",{className:"prize-header",children:[o.jsx("span",{className:"prize-icon",children:m.icon}),o.jsx("span",{className:"prize-title",children:m.title}),o.jsx("span",{className:"prize-amount",children:m.amount})]}),o.jsxs("div",{className:"moderate-view",children:[o.jsxs("div",{className:"winner-announcement",children:[" Winner: ",o.jsx("strong",{children:Array.isArray(C.winner)?C.winner.join(", "):C.winner})]}),C.correctWinners!==void 0&&o.jsxs("div",{className:"winner-stat",children:[C.correctWinners," correct winner",C.correctWinners!==1?"s":""]}),C.difference!==void 0&&o.jsxs("div",{className:"winner-stat",children:["Off by ",C.difference," point",C.difference!==1?"s":"",C.predictedTotal!==void 0&&C.actualTotal!==void 0&&o.jsxs("span",{children:[" (Predicted: ",C.predictedTotal,", Actual: ",C.actualTotal,")"]})]}),C.tiebreakerUsed&&o.jsxs("div",{className:"tiebreaker-info",children:[C.tiedPlayers&&C.tiedPlayers.length>1&&o.jsxs("div",{className:"tied-count",children:[C.tiedPlayers.length," players tied with ",C.correctWinners||"same score"]}),C.tiebreakerLevel&&o.jsxs("div",{className:"tiebreaker-method",children:["Tiebreaker: ",C.tiebreakerLevel]}),C.tiedPlayers&&C.tiedPlayers.length>0&&o.jsxs("div",{className:"tied-players-list",children:["Tied players: ",C.tiedPlayers.join(", ")]})]}),C.isTrueTie&&o.jsx("div",{className:"true-tie-notice",children:" TRUE TIE - Prize will be split equally"}),!C.tiebreakerUsed&&!C.isTrueTie&&o.jsx("div",{className:"no-tiebreaker",children:"No tiebreaker needed"})]}),(((A=C.steps)==null?void 0:A.length)>0||C.tiebreakerUsed)&&o.jsx("button",{className:"toggle-breakdown-btn",onClick:()=>p(m.pubKey),children:P?" Hide Full Breakdown":" Show Full Breakdown"}),P&&v(m,C),n&&o.jsxs("button",{className:"unpublish-btn",onClick:()=>s(m.pubKey),children:[" Unpublish ",m.title]})]},m.pubKey):o.jsxs("div",{className:"prize-card unpublished",children:[o.jsxs("div",{className:"prize-header",children:[o.jsx("span",{className:"prize-icon",children:m.icon}),o.jsx("span",{className:"prize-title",children:m.title}),o.jsx("span",{className:"prize-amount",children:m.amount})]}),o.jsx("div",{className:"prize-status unpublished",children:n?o.jsxs(o.Fragment,{children:[" Not yet published",o.jsx("button",{className:"publish-btn",onClick:()=>E(m,C),children:" Review & Publish"})]}):o.jsxs("div",{children:[" Not yet published",o.jsx("div",{style:{fontSize:"0.85rem",marginTop:"5px",opacity:.8},children:"(Pool Manager is reviewing calculations)"})]})})]},m.pubKey)},k=[{key:"Week 1",title:"Week 1 - Wild Card Round (6 games)",prizes:_.filter(m=>m.week==="Week 1")},{key:"Week 2",title:"Week 2 - Divisional Round (4 games)",prizes:_.filter(m=>m.week==="Week 2")},{key:"Week 3",title:"Week 3 - Conference Championships (2 games)",prizes:_.filter(m=>m.week==="Week 3")},{key:"Week 4",title:"Week 4 - Super Bowl (1 game)",prizes:_.filter(m=>m.week==="Week 4")},{key:"Grand Prize",title:"Grand Prizes",prizes:_.filter(m=>m.week==="Grand Prize")}];return o.jsxs("div",{className:"how-winners-container",children:[o.jsx("h2",{children:" How Winners Are Determined"}),o.jsx("p",{className:"intro-text",children:"Winners are published after the Pool Manager reviews calculations. Check back after each week's games complete."}),o.jsxs("div",{className:"week-controls",children:[o.jsx("button",{className:"control-btn",onClick:d,children:" Expand All Weeks"}),o.jsx("button",{className:"control-btn",onClick:h,children:" Collapse All Weeks"})]}),o.jsx("div",{className:"divider"}),k.map((m,C)=>o.jsxs("div",{className:"week-section",children:[o.jsxs("h3",{className:`week-header collapsible ${i[m.key]?"expanded":"collapsed"}`,onClick:()=>u(m.key),children:[o.jsx("span",{className:"toggle-icon",children:i[m.key]?"":""}),m.title]}),i[m.key]&&o.jsx("div",{className:"prizes-container",children:m.prizes.map(b=>y(b))}),C<k.length-1&&o.jsx("div",{className:"divider"})]},m.key))]})},Ua=[{id:1,name:"ARI",fullName:"Arizona Cardinals"},{id:2,name:"ATL",fullName:"Atlanta Falcons"},{id:3,name:"BAL",fullName:"Baltimore Ravens"},{id:4,name:"BUF",fullName:"Buffalo Bills"},{id:5,name:"CAR",fullName:"Carolina Panthers"},{id:6,name:"CHI",fullName:"Chicago Bears"},{id:7,name:"CIN",fullName:"Cincinnati Bengals"},{id:8,name:"CLE",fullName:"Cleveland Browns"},{id:9,name:"DAL",fullName:"Dallas Cowboys"},{id:10,name:"DEN",fullName:"Denver Broncos"},{id:11,name:"DET",fullName:"Detroit Lions"},{id:12,name:"GB",fullName:"Green Bay Packers"},{id:13,name:"HOU",fullName:"Houston Texans"},{id:14,name:"IND",fullName:"Indianapolis Colts"},{id:15,name:"JAC",fullName:"Jacksonville Jaguars"},{id:16,name:"KC",fullName:"Kansas City Chiefs"},{id:17,name:"LV",fullName:"Las Vegas Raiders"},{id:18,name:"LAC",fullName:"Los Angeles Chargers"},{id:19,name:"LAR",fullName:"Los Angeles Rams"},{id:20,name:"MIA",fullName:"Miami Dolphins"},{id:21,name:"MIN",fullName:"Minnesota Vikings"},{id:22,name:"NE",fullName:"New England Patriots"},{id:23,name:"NO",fullName:"New Orleans Saints"},{id:24,name:"NYG",fullName:"New York Giants"},{id:25,name:"NYJ",fullName:"New York Jets"},{id:26,name:"PHI",fullName:"Philadelphia Eagles"},{id:27,name:"PIT",fullName:"Pittsburgh Steelers"},{id:28,name:"SF",fullName:"San Francisco 49ers"},{id:29,name:"SEA",fullName:"Seattle Seahawks"},{id:30,name:"TB",fullName:"Tampa Bay Buccaneers"},{id:31,name:"TEN",fullName:"Tennessee Titans"},{id:32,name:"WAS",fullName:"Washington Commanders"}];function bC({playoffTeams:t,actualScores:e,onSavePlayoffTeams:n,isPoolManager:r}){const[s,i]=O.useState({afc:{seed1:null,seed2:null,seed3:null,seed4:null,seed5:null,seed6:null,seed7:null},nfc:{seed1:null,seed2:null,seed3:null,seed4:null,seed5:null,seed6:null,seed7:null}}),[l,a]=O.useState(null),[c,u]=O.useState(null),[p,d]=O.useState(null),[h,_]=O.useState({week2:!1,week3:!1,week4:!1});O.useEffect(()=>{t!=null&&t.week1&&i(t.week1)},[t]);const w=()=>{if(!(t!=null&&t.week1))return!1;const R=t.week1.afc||{},D=t.week1.nfc||{};for(let W=1;W<=7;W++)if(!R[`seed${W}`]||!D[`seed${W}`])return!1;return!0},T=(R,D,W)=>{const V=Ua.find(ee=>ee.id===parseInt(W));i(ee=>({...ee,[R]:{...ee[R],[D]:V}}))},E=()=>{for(let D=1;D<=7;D++)if(!s.afc[`seed${D}`]||!s.nfc[`seed${D}`]){alert("Please select all 14 teams before saving!");return}const R={week1:{...s,configured:!0}};n(R),alert(" Week 1 playoff teams saved successfully!")},v=()=>{if(!(e!=null&&e.wildcard)){alert(" Week 1 scores not yet entered. Cannot generate Week 2 matchups.");return}const R=y();if(!R){alert(" Not all Week 1 games have been scored. Cannot generate Week 2 matchups.");return}const D=k(R);a(D)},y=()=>{const R=e.wildcard;if(!R)return null;const D={afc:[],nfc:[]};if(R[1]){const W=parseInt(R[1].team2)>parseInt(R[1].team1)?s.afc.seed2:s.afc.seed7;W&&D.afc.push({...W,originalSeed:parseInt(R[1].team2)>parseInt(R[1].team1)?2:7})}if(R[2]){const W=parseInt(R[2].team2)>parseInt(R[2].team1)?s.afc.seed3:s.afc.seed6;W&&D.afc.push({...W,originalSeed:parseInt(R[2].team2)>parseInt(R[2].team1)?3:6})}if(R[3]){const W=parseInt(R[3].team2)>parseInt(R[3].team1)?s.afc.seed4:s.afc.seed5;W&&D.afc.push({...W,originalSeed:parseInt(R[3].team2)>parseInt(R[3].team1)?4:5})}if(R[4]){const W=parseInt(R[4].team2)>parseInt(R[4].team1)?s.nfc.seed2:s.nfc.seed7;W&&D.nfc.push({...W,originalSeed:parseInt(R[4].team2)>parseInt(R[4].team1)?2:7})}if(R[5]){const W=parseInt(R[5].team2)>parseInt(R[5].team1)?s.nfc.seed3:s.nfc.seed6;W&&D.nfc.push({...W,originalSeed:parseInt(R[5].team2)>parseInt(R[5].team1)?3:6})}if(R[6]){const W=parseInt(R[6].team2)>parseInt(R[6].team1)?s.nfc.seed4:s.nfc.seed5;W&&D.nfc.push({...W,originalSeed:parseInt(R[6].team2)>parseInt(R[6].team1)?4:5})}return D.afc.length!==3||D.nfc.length!==3?null:D},k=R=>{const D=[{...s.afc.seed1,originalSeed:1},...R.afc],W=[{...s.nfc.seed1,originalSeed:1},...R.nfc];return D.sort((ee,Ce)=>ee.originalSeed-Ce.originalSeed),W.sort((ee,Ce)=>ee.originalSeed-Ce.originalSeed),{afc:[{team1:D[0],team2:D[3]},{team1:D[1],team2:D[2]}],nfc:[{team1:W[0],team2:W[3]},{team1:W[1],team2:W[2]}]}},m=()=>{if(!l){alert("No proposed matchups to confirm!");return}const R={week2:{...l,autoPopulated:!0,manuallyOverridden:!1}};n(R),a(null),alert(" Week 2 matchups confirmed and saved!")},C=()=>{if(!(e!=null&&e.divisional)){alert(" Week 2 scores not yet entered.");return}const R=e.divisional,D=R[7]&&parseInt(R[7].team1)>parseInt(R[7].team2)?t.week2.afc[0].team1:t.week2.afc[0].team2,W=R[8]&&parseInt(R[8].team1)>parseInt(R[8].team2)?t.week2.afc[1].team1:t.week2.afc[1].team2,V=R[9]&&parseInt(R[9].team1)>parseInt(R[9].team2)?t.week2.nfc[0].team1:t.week2.nfc[0].team2,ee=R[10]&&parseInt(R[10].team1)>parseInt(R[10].team2)?t.week2.nfc[1].team1:t.week2.nfc[1].team2;if(!D||!W||!V||!ee){alert(" Not all Week 2 games scored yet.");return}u({afcChampionship:{team1:D,team2:W},nfcChampionship:{team1:V,team2:ee}})},b=()=>{if(!c)return;const R={week3:{...c,autoPopulated:!0}};n(R),u(null),alert(" Week 3 matchups confirmed!")},P=()=>{if(!(e!=null&&e.conference)){alert(" Week 3 scores not yet entered.");return}const R=e.conference,D=R[11]&&parseInt(R[11].team1)>parseInt(R[11].team2)?t.week3.afcChampionship.team1:t.week3.afcChampionship.team2,W=R[12]&&parseInt(R[12].team1)>parseInt(R[12].team2)?t.week3.nfcChampionship.team1:t.week3.nfcChampionship.team2;if(!D||!W){alert(" Not all Conference games scored yet.");return}d({superBowl:{team1:D,team2:W}})},A=()=>{if(!p)return;const R={week4:{...p,autoPopulated:!0}};n(R),d(null),alert(" Super Bowl matchup confirmed!")};return r?o.jsxs("div",{className:"playoff-setup-container",children:[o.jsx("h2",{children:" Playoff Teams Setup"}),o.jsxs("div",{className:"setup-status",children:[o.jsx("h3",{children:" Current Status"}),o.jsxs("div",{className:"status-grid",children:[o.jsxs("div",{className:`status-item ${w()?"configured":"not-configured"}`,children:[o.jsx("strong",{children:"Week 1:"})," ",w()?" Configured":" Not Configured"]}),o.jsxs("div",{className:"status-item",children:[o.jsx("strong",{children:"Week 2:"})," ",t!=null&&t.week2?" Set":" Waiting"]}),o.jsxs("div",{className:"status-item",children:[o.jsx("strong",{children:"Week 3:"})," ",t!=null&&t.week3?" Set":" Waiting"]}),o.jsxs("div",{className:"status-item",children:[o.jsx("strong",{children:"Week 4:"})," ",t!=null&&t.week4?" Set":" Waiting"]})]})]}),o.jsxs("div",{className:"setup-section",children:[o.jsx("h3",{children:" WEEK 1 - Wild Card Round (Manual Setup)"}),o.jsx("p",{children:"Select the 14 playoff teams and assign their seeds."}),o.jsxs("div",{className:"conference-setup",children:[o.jsxs("div",{className:"conference-column",children:[o.jsx("h4",{children:"AFC Teams"}),[1,2,3,4,5,6,7].map(R=>{var D;return o.jsxs("div",{className:"seed-selector",children:[o.jsxs("label",{children:["AFC #",R," Seed:"]}),o.jsxs("select",{value:((D=s.afc[`seed${R}`])==null?void 0:D.id)||"",onChange:W=>T("afc",`seed${R}`,W.target.value),children:[o.jsx("option",{value:"",children:"Select Team"}),Ua.map(W=>o.jsxs("option",{value:W.id,children:[W.name," - ",W.fullName]},W.id))]})]},`afc-${R}`)})]}),o.jsxs("div",{className:"conference-column",children:[o.jsx("h4",{children:"NFC Teams"}),[1,2,3,4,5,6,7].map(R=>{var D;return o.jsxs("div",{className:"seed-selector",children:[o.jsxs("label",{children:["NFC #",R," Seed:"]}),o.jsxs("select",{value:((D=s.nfc[`seed${R}`])==null?void 0:D.id)||"",onChange:W=>T("nfc",`seed${R}`,W.target.value),children:[o.jsx("option",{value:"",children:"Select Team"}),Ua.map(W=>o.jsxs("option",{value:W.id,children:[W.name," - ",W.fullName]},W.id))]})]},`nfc-${R}`)})]})]}),o.jsx("button",{className:"save-btn",onClick:E,children:" Save Week 1 Playoff Teams"})]}),w()&&o.jsxs("div",{className:"setup-section",children:[o.jsx("h3",{children:" WEEK 2 - Divisional Round (Auto-Generate)"}),o.jsx("p",{children:"Generate matchups based on Week 1 results with NFL reseeding rules."}),!l&&!(t!=null&&t.week2)&&o.jsx("button",{className:"generate-btn",onClick:v,children:" Generate Week 2 Matchups"}),l&&o.jsxs("div",{className:"proposed-matchups",children:[o.jsx("h4",{children:"Proposed Week 2 Matchups:"}),o.jsxs("div",{className:"matchup-list",children:[o.jsxs("p",{children:[o.jsx("strong",{children:"AFC Game 1:"})," ",l.afc[0].team1.name," vs ",l.afc[0].team2.name]}),o.jsxs("p",{children:[o.jsx("strong",{children:"AFC Game 2:"})," ",l.afc[1].team1.name," vs ",l.afc[1].team2.name]}),o.jsxs("p",{children:[o.jsx("strong",{children:"NFC Game 1:"})," ",l.nfc[0].team1.name," vs ",l.nfc[0].team2.name]}),o.jsxs("p",{children:[o.jsx("strong",{children:"NFC Game 2:"})," ",l.nfc[1].team1.name," vs ",l.nfc[1].team2.name]})]}),o.jsx("button",{className:"confirm-btn",onClick:m,children:" Confirm Week 2 Matchups"})]}),(t==null?void 0:t.week2)&&o.jsx("div",{className:"confirmed-status",children:" Week 2 matchups confirmed and saved!"})]}),(t==null?void 0:t.week2)&&o.jsxs("div",{className:"setup-section",children:[o.jsx("h3",{children:" WEEK 3 - Conference Championships (Auto-Generate)"}),!c&&!(t!=null&&t.week3)&&o.jsx("button",{className:"generate-btn",onClick:C,children:" Generate Week 3 Matchups"}),c&&o.jsxs("div",{className:"proposed-matchups",children:[o.jsx("h4",{children:"Proposed Week 3 Matchups:"}),o.jsxs("p",{children:[o.jsx("strong",{children:"AFC Championship:"})," ",c.afcChampionship.team1.name," vs ",c.afcChampionship.team2.name]}),o.jsxs("p",{children:[o.jsx("strong",{children:"NFC Championship:"})," ",c.nfcChampionship.team1.name," vs ",c.nfcChampionship.team2.name]}),o.jsx("button",{className:"confirm-btn",onClick:b,children:" Confirm Week 3 Matchups"})]}),(t==null?void 0:t.week3)&&o.jsx("div",{className:"confirmed-status",children:" Week 3 matchups confirmed!"})]}),(t==null?void 0:t.week3)&&o.jsxs("div",{className:"setup-section",children:[o.jsx("h3",{children:" WEEK 4 - Super Bowl LIX (Auto-Generate)"}),!p&&!(t!=null&&t.week4)&&o.jsx("button",{className:"generate-btn",onClick:P,children:" Generate Super Bowl Matchup"}),p&&o.jsxs("div",{className:"proposed-matchups",children:[o.jsx("h4",{children:"Proposed Super Bowl Matchup:"}),o.jsxs("p",{children:[o.jsx("strong",{children:"Super Bowl LIX:"})," ",p.superBowl.team1.name," vs ",p.superBowl.team2.name]}),o.jsx("button",{className:"confirm-btn",onClick:A,children:" Confirm Super Bowl Matchup"})]}),(t==null?void 0:t.week4)&&o.jsx("div",{className:"confirmed-status",children:" Super Bowl matchup confirmed!"})]})]}):o.jsxs("div",{className:"playoff-setup-container",children:[o.jsx("h2",{children:" Playoff Teams Setup"}),o.jsx("p",{children:"Only the Pool Manager can access this page."})]})}const NC={apiKey:"AIzaSyDr3PPXC90wvQW_LG8TkAyR9K-7e0loQ3A",authDomain:"nfl-playoff-pool-2025-scores.firebaseapp.com",databaseURL:"https://nfl-playoff-pool-2025-scores-default-rtdb.firebaseio.com",projectId:"nfl-playoff-pool-2025-scores",storageBucket:"nfl-playoff-pool-2025-scores.firebasestorage.app",messagingSenderId:"844539772456",appId:"1:844539772456:web:9bbfcf523195a5eedfff1d"},jC=bg(NC),Q=Pd(jC),tp={firstFriday:"2026-01-09",lastMonday:"2026-02-09"},vn={wildcard:"2026-01-10",divisional:"2026-01-17",conference:"2026-01-25",superbowl:"2026-02-08"},_n=["76BB89","Z9Y8X7"],be={"76BB89":"POOL MANAGER - Richard",Z9Y8X7:"POOL MANAGER - Dennis",J239W4:"Bob Casson",B7Y4X3:"Bob Desrosiers",D4F7G5:"Bonnie Biletski","536EE2":"Brian Colburg",X8HH67:"Chris Neufeld",G7R3P5:"Curtis Braun",A4LJC9:"Curtis Palidwor",X3P8N1:"Dallas Pylypow",W32R1Z:"Daniel Bennett",HM8T67:"Darrell Klassen",TA89R2:"Dave Boyarski",K2P9W5:"Dave Desrosiers",A5K4T7:"Dennis Biletski","6WRUJR":"Emily Chadwick",AB6C89:"Gareth Reeve",D3F6G9:"Jarrod Reimer",T42B67:"Jo Behr",PUEFKF:"Joshua Biletski",ABC378:"Ken Mcleod",K9R3N6:"Kevin Pich",H7P3N5:"Larry Bretecher",B5R4T6:"Larry Strand",L2W9X2:"Michelle Desrosiers","5GGPL3":"Mike Brkich",PC12L3:"Natasha Biletski",T4M8Z8:"Neema Dadmand","9CD72G":"Neil Banman",T7Y4R8:"Neil Foster",KWBZ86:"Nick Melanidis","2WQA9X":"Nima Ahmadi",E4T6J7:"Orest Pich",N4M8Q2:"Randy Moffatt",B8L9M2:"Richard Biletski","62R92L":"Rob Crowe",H8M3N7:"Rob Kost",WW3F44:"Ryan Moffatt",E5G7G8:"Tony Creta"},ve={wildcard:{name:"Wild Card Round (Jan 10-12, 2026)",deadline:"Friday, January 9, 2026 at 11:59 PM PST",games:[{id:1,team1:"AFC #7",team2:"AFC #2"},{id:2,team1:"AFC #6",team2:"AFC #3"},{id:3,team1:"AFC #5",team2:"AFC #4"},{id:4,team1:"NFC #7",team2:"NFC #2"},{id:5,team1:"NFC #6",team2:"NFC #3"},{id:6,team1:"NFC #5",team2:"NFC #4"}]},divisional:{name:"Divisional Round (Jan 17-18, 2026)",deadline:"Friday, January 16, 2026 at 11:59 PM PST",games:[{id:7,team1:"AFC Winner 1",team2:"AFC #1"},{id:8,team1:"AFC Winner 2",team2:"AFC Winner 3"},{id:9,team1:"NFC Winner 1",team2:"NFC #1"},{id:10,team1:"NFC Winner 2",team2:"NFC Winner 3"}]},conference:{name:"Conference Championships (Jan 25, 2026)",deadline:"Friday, January 23, 2026 at 11:59 PM PST",games:[{id:11,team1:"AFC Winner A",team2:"AFC Winner B"},{id:12,team1:"NFC Winner A",team2:"NFC Winner B"}]},superbowl:{name:"Super Bowl LIX (Feb 8, 2026)",deadline:"Friday, February 6, 2026 at 11:59 PM PST",games:[{id:13,team1:"AFC Champion",team2:"NFC Champion"}]}},wn=(t,e,n,r)=>{var s;if(!((s=r==null?void 0:r.week1)!=null&&s.configured)){const i=ve[t].games.find(l=>l.id===e);return i?i[n]:`Team ${n}`}if(t==="wildcard"){const i=ve.wildcard.games.find(c=>c.id===e);if(!i)return"TBD";const l=i[n],a=l.match(/(AFC|NFC) #(\d)/);if(a){const c=a[1].toLowerCase(),u=parseInt(a[2]),p=r.week1[c][`seed${u}`];if(p)return`${p.name} (${l})`}return l}if(t==="divisional"){const i=ve.divisional.games.find(a=>a.id===e);if(!i)return"TBD";const l=i[n];if(r!=null&&r.week2){let a=null;if(e===7?a=r.week2.afc[0][n]:e===8?a=r.week2.afc[1][n]:e===9?a=r.week2.nfc[0][n]:e===10&&(a=r.week2.nfc[1][n]),a)return`${a.name} (${l})`}return l}if(t==="conference"){const i=ve.conference.games.find(a=>a.id===e);if(!i)return"TBD";const l=i[n];if(r!=null&&r.week3){let a=null;if(e===11?a=r.week3.afcChampionship[n]:e===12&&(a=r.week3.nfcChampionship[n]),a)return`${a.name} (${l})`}return l}if(t==="superbowl"){const i=ve.superbowl.games.find(a=>a.id===e);if(!i)return"TBD";const l=i[n];if(r!=null&&r.week4){const a=r.week4.superBowl[n];if(a)return`${a.name} (${l})`}return l}return"TBD"};function TC(){var Xd;const[t,e]=O.useState("picks"),[n,r]=O.useState(""),[s,i]=O.useState(""),[l,a]=O.useState(!1),[c,u]=O.useState("wildcard"),[p,d]=O.useState({}),[h,_]=O.useState([]),[w,T]=O.useState(!1),[E,v]=O.useState({}),[y,k]=O.useState({}),[m,C]=O.useState({}),[b,P]=O.useState({wildcard:"",divisional:"",conference:"",superbowl_week4:"",superbowl_week3:"",superbowl_week2:"",superbowl_week1:"",superbowl_grand:""}),[A,R]=O.useState({}),[D,W]=O.useState({}),[V,ee]=O.useState({}),[Ce,lt]=O.useState(!1),[H,Ae]=O.useState({superbowl_week4:!1,superbowl_week3:!1,superbowl_week2:!1,superbowl_week1:!1,superbowl_grand:!1}),[B,X]=O.useState({wildcard:{locked:!1,lockDate:null,autoLockDate:vn.wildcard},divisional:{locked:!1,lockDate:null,autoLockDate:vn.divisional},conference:{locked:!1,lockDate:null,autoLockDate:vn.conference},superbowl:{locked:!1,lockDate:null,autoLockDate:vn.superbowl}}),[J,ke]=O.useState({}),[De,kr]=O.useState(null),[mn,gs]=O.useState(null),[at,yt]=O.useState(!1),[Qn,Qe]=O.useState(null),[Ki,Xl]=O.useState(null),[ys,Rd]=O.useState(!1),[Ad,Dd]=O.useState([]),[qy,Jy]=O.useState([]),[Qi,Zy]=O.useState({}),[Fe,Wd]=O.useState({totalFees:0,prizeValue:0,numberOfPlayers:0,entryFee:20}),[e0,Xi]=O.useState(!1),[Rt,ql]=O.useState(""),[Sr,Jl]=O.useState(1),[Et,qi]=O.useState([]),[gn,Zl]=O.useState(!1),[Gt,xs]=O.useState([]),[t0,ea]=O.useState(!1),[ta,vs]=O.useState({}),[n0,r0]=O.useState({}),[s0,_s]=O.useState(!1),[ae,Cr]=O.useState(""),[Er,ws]=O.useState(null),[Xn,ks]=O.useState(null),[i0,Ss]=O.useState(!1),[Ld,br]=O.useState(null),[Cs,na]=O.useState(null),ue=()=>_n.includes(s)&&l,o0=()=>{let f=Math.floor(Math.random()*41)+10,g=Math.floor(Math.random()*41)+10;for(;f===g;)g=Math.floor(Math.random()*41)+10;return{team1:f,team2:g}},Od=()=>{const f=ve[c].games,g={};f.forEach(x=>{g[x.id]=o0()}),ks(g),Ss(!0)},l0=async()=>{if(!ae||!Xn)return;const f=be[ae];if(f)try{const g=K(Q,"picks"),x=await Bs(g);let S=null;if(x.exists()){const I=x.val();for(const[N,L]of Object.entries(I))if(L.playerCode===ae&&L.week===c){S=N;break}}const j={playerName:f,playerCode:ae,week:c,predictions:Xn,timestamp:S&&x.val()[S].timestamp||Date.now(),lastUpdated:Date.now(),enteredBy:"POOL_MANAGER_RNG",enteredByCode:s,enteredByName:n};S?await pe(K(Q,`picks/${S}`),j):await Do(K(Q,"picks"),j),alert(` RNG picks successfully submitted for ${f}!`),Ss(!1),ks(null),_s(!1),Cr("")}catch(g){console.error("Error submitting RNG picks:",g),alert(" Error submitting RNG picks. Please try again.")}},a0=()=>{if(!ae)return;const f=h.find(g=>g.playerCode===ae&&g.week===c);f&&f.predictions?(d(f.predictions),vs({...f.predictions}),ws("manual")):(d({}),vs({}),ws("manual"))},c0=async f=>{if(f.preventDefault(),!ae){alert("Please select a player first.");return}const g=be[ae];ve[c];try{const x=K(Q,"picks"),S=await Bs(x);let j=null;if(S.exists()){const N=S.val();for(const[L,F]of Object.entries(N))if(F.playerCode===ae&&F.week===c){j=L;break}}const I={playerName:g,playerCode:ae,week:c,predictions:p,timestamp:j&&S.val()[j].timestamp||Date.now(),lastUpdated:Date.now(),enteredBy:"POOL_MANAGER_MANUAL",enteredByCode:s,enteredByName:n};j?await pe(K(Q,`picks/${j}`),I):await Do(K(Q,"picks"),I),alert(` Picks successfully submitted for ${g}!`),d({}),_s(!1),Cr(""),ws(null)}catch(x){console.error("Error submitting picks for player:",x),alert(" Error submitting picks. Please try again.")}},u0=async()=>{if(!ae)return;const f=be[ae];try{console.log(" DEBUG: Starting delete for player:",f),console.log(" DEBUG: Player code:",ae),console.log(" DEBUG: Current week:",c);const g=K(Q,"picks"),x=await Bs(g);if(console.log(" DEBUG: Got snapshot, exists?",x.exists()),x.exists()){const S=x.val();console.log(" DEBUG: Total picks in database:",Object.keys(S).length);let j=null;for(const[I,N]of Object.entries(S))if(console.log(` DEBUG: Checking pick ${I}:`,N.playerCode,N.week),N.playerCode===ae&&N.week===c){j=I,console.log(" DEBUG: FOUND KEY TO DELETE:",j);break}j?(console.log(" DEBUG: Attempting to delete key:",j),await ep(K(Q,`picks/${j}`)),console.log(" DEBUG: Delete successful!"),alert(` ${f}'s picks for ${c==="wildcard"?"Week 1":c==="divisional"?"Week 2":c==="conference"?"Week 3":"Week 4"} have been deleted!`)):(console.log(" DEBUG: No pick found to delete"),alert(` ${f} has no picks for this week.`))}br(null),Cr("")}catch(g){console.error(" DEBUG: Error deleting picks:",g),console.error(" DEBUG: Error message:",g.message),console.error(" DEBUG: Error code:",g.code),alert(` Error deleting picks: ${g.message}

Check browser console (F12) for details.`)}},d0=async()=>{if(!ae)return;const f=be[ae];try{console.log(" DEBUG: Starting delete ALL for player:",f),console.log(" DEBUG: Player code:",ae);const g=K(Q,"picks"),x=await Bs(g);if(console.log(" DEBUG: Got snapshot, exists?",x.exists()),x.exists()){const S=x.val(),j=[];console.log(" DEBUG: Total picks in database:",Object.keys(S).length);for(const[I,N]of Object.entries(S))N.playerCode===ae&&(console.log(" DEBUG: Found pick to delete:",I,N.week),j.push(I));if(console.log(" DEBUG: Total keys to delete:",j.length),j.length>0){console.log(" DEBUG: Attempting to delete keys:",j);const I=j.map(N=>ep(K(Q,`picks/${N}`)));await Promise.all(I),console.log(" DEBUG: Delete ALL successful!"),alert(` ALL picks for ${f} have been deleted!

Deleted ${j.length} pick(s) across all weeks.`)}else console.log(" DEBUG: No picks found to delete"),alert(` ${f} has no picks in any week.`)}br(null),Cr(""),_s(!1)}catch(g){console.error(" DEBUG: Error deleting all picks:",g),console.error(" DEBUG: Error message:",g.message),console.error(" DEBUG: Error code:",g.code),alert(` Error deleting picks: ${g.message}

Check browser console (F12) for details.`)}},f0=async f=>{try{console.log(" Clearing week data for:",f),E[f]&&(await pe(K(Q,`teamCodes/${f}`),null),console.log(" Cleared team codes")),y[f]&&(await pe(K(Q,`actualScores/${f}`),null),console.log(" Cleared actual scores")),m[f]&&(await pe(K(Q,`gameStatus/${f}`),null),console.log(" Cleared game status")),alert(` Week ${f==="wildcard"?"1":f==="divisional"?"2":f==="conference"?"3":"4"} data cleared!

Team names, scores, and statuses have been deleted.
Player picks are still intact.`),na(null)}catch(g){console.error(" Error clearing week data:",g),alert(` Error clearing week data: ${g.message}`)}},Md=(f,g,x,S,j,I)=>{const N=Number(f)>Number(g),L=Number(g)>Number(f);if(f===g||!f||!g)return{background:"transparent",color:"#000"};if(x!==void 0&&S!==void 0&&x!==""&&S!==""){const F=Number(x)>Number(S),G=Number(S)>Number(x);if(!j||j===""){if(I&&N)return F?{background:"#fff9c4",color:"#000"}:{background:"#b3e5fc",color:"#000"};if(!I&&L)return G?{background:"#fff9c4",color:"#000"}:{background:"#b3e5fc",color:"#000"}}if(j==="live"){if(I&&N)return F?{background:"#c8e6c9",color:"#000"}:{background:"#ffcdd2",color:"#000"};if(!I&&L)return G?{background:"#c8e6c9",color:"#000"}:{background:"#ffcdd2",color:"#000"}}if(j==="final"){if(I&&N)return F?{background:"#4caf50",color:"#000"}:{background:"#f44336",color:"#000"};if(!I&&L)return G?{background:"#4caf50",color:"#000"}:{background:"#f44336",color:"#000"}}}return{background:"transparent",color:"#000"}},h0=async(f,g,x)=>{try{const S=f/10,j={totalFees:Number(f),prizeValue:Number(S.toFixed(2)),numberOfPlayers:Number(g),entryFee:Number(x),lastUpdated:new Date().toISOString()};await pe(K(Q,"prizePool"),j),Wd(j),alert(` Prize pool saved!

Total Pool: $${f}
Each Prize: $${S.toFixed(2)} (10%)`),Xi(!1)}catch(S){console.error("Error saving prize pool:",S),alert(` Error saving prize pool: ${S.message}`)}},Ji=(f,g)=>{const x=Math.floor(f*100/g)/100,S=Math.floor(1e4/g)/100,j=[];let I=0;for(let F=0;F<g-1;F++)j.push({percentage:S,amount:x}),I+=x;const N=Number((f-I).toFixed(2)),L=Number((100-S*(g-1)).toFixed(2));return j.push({percentage:L,amount:N}),j},p0=async()=>{if(!Rt||Et.length===0){alert(" Please select a prize and at least one winner.");return}try{const f=Fe.prizeValue||100;let g=[];if(gn){const S=Gt.reduce((I,N)=>I+Number(N.percentage||0),0),j=Gt.reduce((I,N)=>I+Number(N.amount||0),0);if(Math.abs(S-100)>.01){alert(` Percentages must equal 100%!
Current total: ${S.toFixed(2)}%`);return}if(Math.abs(j-f)>.01){alert(` Amounts must equal $${f.toFixed(2)}!
Current total: $${j.toFixed(2)}`);return}g=Gt.map((I,N)=>({playerCode:Et[N].code,playerName:Et[N].name,percentage:Number(I.percentage),amount:Number(I.amount)}))}else{const S=Ji(f,Et.length);g=Et.map((j,I)=>({playerCode:j.code,playerName:j.name,percentage:S[I].percentage,amount:S[I].amount}))}const x={prizeNumber:Rt,prizeName:Es(Rt),prizeValue:f,winners:g,declaredBy:"POOL_MANAGER",declaredByCode:s,declaredByName:n,declaredAt:new Date().toISOString()};await pe(K(Q,`officialWinners/prize${Rt}`),x),alert(` Winner(s) declared for ${Es(Rt)}!

${g.map(S=>`${S.playerName}: ${S.percentage}% ($${S.amount.toFixed(2)})`).join(`
`)}`),ql(""),Jl(1),qi([]),Zl(!1),xs([]),ea(!1)}catch(f){console.error("Error declaring winners:",f),alert(` Error declaring winners: ${f.message}`)}},Es=f=>({1:"Prize #1 - Week 1 Most Correct Predictions",2:"Prize #2 - Week 1 Closest Total Points",3:"Prize #3 - Week 2 Most Correct Predictions",4:"Prize #4 - Week 2 Closest Total Points",5:"Prize #5 - Week 3 Most Correct Predictions",6:"Prize #6 - Week 3 Closest Total Points",7:"Prize #7 - Week 4 Most Correct Predictions",8:"Prize #8 - Week 4 Closest Total Points",9:"Prize #9 - Overall 4-Week Grand Total Most Correct Predictions",10:"Prize #10 - Overall 4-Week Grand Total Closest Points"})[f]||`Prize #${f}`,m0=async f=>{if(window.confirm(`Are you sure you want to delete the winner declaration for ${Es(f)}?

This action cannot be undone!`))try{await pe(K(Q,`officialWinners/prize${f}`),null),alert(` Winner declaration deleted for ${Es(f)}`)}catch(g){console.error("Error deleting prize:",g),alert(` Error: ${g.message}`)}},zd=f=>{const g=vn[f];if(!g)return!1;const x=new Date,S=new Date(x.toLocaleString("en-US",{timeZone:"America/Los_Angeles"})),j=new Date(g+"T00:00:00");return S>=j},Vt=f=>{var g;return ue()?!1:(g=B[f])!=null&&g.locked?!0:zd(f)};O.useEffect(()=>{const f=K(Q,"weekLockStatus");xt(f,g=>{const x=g.val();if(x){const S={};Object.keys(vn).forEach(j=>{var I,N;S[j]={locked:((I=x[j])==null?void 0:I.locked)||!1,lockDate:((N=x[j])==null?void 0:N.lockDate)||null,autoLockDate:vn[j]}}),X(S)}})},[]);const g0=f=>{const g=!B[f].locked,x=g?new Date().toISOString():null,S={...B,[f]:{...B[f],locked:g,lockDate:x}};X(S),pe(K(Q,`weekLockStatus/${f}`),{locked:g,lockDate:x,autoLockDate:vn[f]}),alert(g?` Week ${f} is now LOCKED

Players cannot edit picks for this week.`:` Week ${f} is now UNLOCKED

Players can edit picks for this week.`)};O.useEffect(()=>{const f=K(Q,"picks");xt(f,g=>{const x=g.val();if(x){const S=Object.keys(x).map(j=>({...x[j],firebaseKey:j}));_(S)}else _([])})},[]),O.useEffect(()=>{const f=K(Q,"teamCodes");xt(f,g=>{const x=g.val();x&&v(x)})},[]),O.useEffect(()=>{const f=K(Q,"actualScores");xt(f,g=>{const x=g.val();x&&k(x)})},[]),O.useEffect(()=>{const f=K(Q,"gameStatus");xt(f,g=>{const x=g.val();x&&C(x)})},[]),O.useEffect(()=>{const f=K(Q,"officialWinners");xt(f,g=>{const x=g.val();x&&Zy(x)})},[]),O.useEffect(()=>{const f=K(Q,"prizePool");xt(f,g=>{const x=g.val();x&&Wd(x)})},[]),O.useEffect(()=>{const f=K(Q,"calculatedWinners");xt(f,g=>{const x=g.val();x&&R(x)})},[]),O.useEffect(()=>{const f=K(Q,"publishedWinners");xt(f,g=>{const x=g.val();x&&W(x)})},[]),O.useEffect(()=>{const f=K(Q,"playoffTeams");xt(f,g=>{const x=g.val();x?(ee(x),console.log(" Loaded playoff teams:",x)):ee({})})},[]),O.useEffect(()=>{const f=K(Q,"gameLocks");xt(f,g=>{const x=g.val();x&&ke(x)})},[]),O.useEffect(()=>{const f=K(Q,"manualWeekTotals");xt(f,g=>{const x=g.val();x&&P(x)})},[]),O.useEffect(()=>{if(l&&n&&h.length>0){const f=h.find(g=>g.playerName===n&&g.week===c);f&&f.predictions?(console.log("Loading existing picks for",n,"week",c),d(f.predictions)):(console.log("No existing picks found - clearing form"),d({}))}},[c,h,l,n]),O.useEffect(()=>{const f=new rC(Fd,5);return kr(f),()=>{f&&f.stop()}},[]);const Fd=async()=>{try{console.log("Fetching scores from ESPN...");const f=await ZS();if(!f.success){console.error("ESPN fetch failed:",f.error);return}console.log("ESPN games fetched:",f.games.length);const g=ve[c].games,x={};if(f.games.forEach(S=>{var I;const j=nC(S,ve,c,E);if(j){const N=j.gameId;if((I=J[c])!=null&&I[N]){console.log(`Game ${N} is locked, skipping API update`);return}x[N]={team1:j.team1Score,team2:j.team2Score,source:"espn",lastUpdated:new Date().toISOString()},C(L=>({...L,[c]:{...L[c],[N]:j.isFinal?"final":j.isLive?"live":""}}))}}),Object.keys(x).length>0){k(j=>({...j,[c]:{...j[c],...x}}));const S=K(Q,`actualScores/${c}`);await pe(S,{...y[c],...x}),console.log(`Updated ${Object.keys(x).length} games from ESPN`)}gs(new Date)}catch(f){console.error("Error fetching ESPN scores:",f)}},y0=f=>{var g;console.log(" Toggle clicked for game:",f),console.log(" Current week:",c),console.log(" Current locks:",J),console.log(" Current value for game",f,":",(g=J[c])==null?void 0:g[f]),ke(x=>{const S={...x};S[c]||(S[c]={});const j=S[c][f],I=!j;console.log(" Old value:",j),console.log(" New value:",I),S[c][f]=I;const N=K(Q,`gameLocks/${c}/${f}`);return pe(N,I),console.log(" Saved to Firebase:",I),console.log(" Returning new locks:",S),S})},Bd=(f,g,x)=>{d(S=>({...S,[f]:{...S[f],[g]:x}})),console.log(" User typed score - setting hasUnsavedChanges to TRUE"),yt(!0)},x0=()=>{if(Object.keys(p).some(x=>{var S,j;return((S=p[x])==null?void 0:S.team1)||((j=p[x])==null?void 0:j.team2)})&&!window.confirm(` WARNING!

Clicking RNG will OVERWRITE all your current picks!

Are you sure you want to continue?`))return;const g={};Ee.games.forEach(x=>{let S=Math.floor(Math.random()*43)+3,j=Math.floor(Math.random()*43)+3;for(;S===j;)j=Math.floor(Math.random()*43)+3;g[x.id]={team1:S.toString(),team2:j.toString()}}),d(g),console.log(" RNG: Setting hasUnsavedChanges to TRUE"),yt(!0),console.log(" RNG: hasUnsavedChanges should now be true"),alert(` RNG picks generated for all ${Ee.games.length} games!

Score range: 3-45 points per team
No tied games guaranteed!

You can now edit any scores before submitting.`)},$d=(f,g,x)=>{var j;const S={...E,[c]:{...E[c]||{},[f]:{...((j=E[c])==null?void 0:j[f])||{},[g]:x.toUpperCase()}}};v(S),pe(K(Q,`teamCodes/${c}/${f}/${g}`),x.toUpperCase())},Ud=(f,g,x)=>{var j;const S={...y,[c]:{...y[c]||{},[f]:{...((j=y[c])==null?void 0:j[f])||{},[g]:x}}};k(S),pe(K(Q,`actualScores/${c}/${f}/${g}`),x)},v0=(f,g)=>{const x={...m,[c]:{...m[c]||{},[f]:g}};C(x),pe(K(Q,`gameStatus/${c}/${f}`),g)},Nr=(f,g)=>{const x={...b,[f]:g};P(x);const S=g!==""&&g!==null&&g!==void 0;Ae(j=>({...j,[f]:S})),pe(K(Q,`manualWeekTotals/${f}`),g||null)},_0=(f,g,x)=>{console.log("Publishing prize:",f),W(S=>({...S,[f]:!0})),pe(K(Q,`publishedWinners/${f}`),!0),alert(` Published: ${g.title}

Winner: ${x.winner}

Players can now see this result!`)},w0=f=>{window.confirm(` UNPUBLISH PRIZE?

This will hide the winner from all players.

Continue?`)&&(console.log("Unpublishing prize:",f),W(x=>({...x,[f]:!1})),pe(K(Q,`publishedWinners/${f}`),!1),alert(" Prize unpublished successfully!"))},k0=async f=>{if(!ue()){alert(" Only Pool Manager can save playoff teams configuration.");return}try{const g=K(Q,"playoffTeams"),S={...V||{},...f};await pe(g,S),console.log(" Playoff teams saved:",S)}catch(g){console.error(" Error saving playoff teams:",g),alert("Error saving playoff teams. Check console for details.")}},bs=f=>{P(g=>({...g,[f]:""})),Ae(g=>({...g,[f]:!1})),pe(K(Q,`manualWeekTotals/${f}`),null)},Gd=(f,g)=>{const x=h.find(j=>j.playerCode===f&&j.week===g);if(!x||!x.predictions)return null;let S=0;return Object.keys(x.predictions).forEach(j=>{const I=x.predictions[j];I&&I.team1&&I.team2&&(S+=(parseInt(I.team1)||0)+(parseInt(I.team2)||0))}),S},S0=f=>{const g=[],x={wildcard:1,divisional:2,conference:3,superbowl:4};return["wildcard","divisional","conference","superbowl"].forEach(S=>{h.some(I=>I.playerCode===f&&I.week===S)&&g.push(x[S])}),g},C0=f=>f.length===0||f.length===4?!1:!f.every((x,S)=>x===S+1),E0=f=>"P"+f.join(""),b0=(f,g)=>{const x=h.find(S=>S.playerCode===f&&S.week===g);return(x==null?void 0:x.enteredBy)==="POOL_MANAGER_RNG"},Vd=(f,g)=>{const x=h.find(I=>I.playerCode===f&&I.week===g);if(!x||!x.predictions)return 0;const S=y[g];if(!S)return 0;let j=0;return Object.keys(x.predictions).forEach(I=>{const N=x.predictions[I],L=S[I];if(N&&L&&N.team1&&N.team2&&L.team1&&L.team2){const F=parseInt(N.team1)+parseInt(N.team2),G=parseInt(L.team1)+parseInt(L.team2),U=Math.abs(F-G);j+=U}}),j},Zi=(f,g,x)=>{const S=Gd(f,g),j=Vd(f,g),I=b0(f,g),N=Object.keys(y[g]||{}).length>0;if(!S)return{display:"-",tooltip:"",fontSize:"16px"};const L=I?"*":"";return!N||j===0?{display:`${S}${L}`,tooltip:I?`Predicted: ${S} (RNG filled by Pool Manager)`:`Predicted: ${S}`,fontSize:"16px"}:{display:`${S}${L}/${j}`,tooltip:I?`Predicted: ${S} (RNG) | Difference: ${j}`:`Predicted: ${S} | Difference: ${j}`,fontSize:"16px"}},N0=f=>{const g=S0(f);if(g.length===0)return{display:"-",tooltip:"",fontSize:"16px"};const x=C0(g),S=x?E0(g)+"/":"";let j=0,I=0,N=0,L=!1,F=!0;const G={1:"wildcard",2:"divisional",3:"conference",4:"superbowl"};g.forEach(q=>{const Z=G[q],te=Gd(f,Z),oe=Vd(f,Z),fe=Object.keys(y[Z]||{}).length>0;te&&(j+=te,fe&&oe>0?(I+=te,N+=oe,L=!0):fe||(F=!1))});let U="";return x&&(U=`Weeks Entered: ${g.join(", ")} | `),L?F?(U+=`Full Prediction: ${j} | Total Difference: ${N}`,{display:`${S}${j}/${N}`,tooltip:U,fontSize:"16px"}):(U+=`Full Prediction: ${j} | Played Weeks: ${I} | Difference So Far: ${N}`,{display:`${S}${j}/${I}/${N}`,tooltip:U,fontSize:"14px"}):(U+=`Full Prediction: ${j}`,{display:`${S}${j}`,tooltip:U,fontSize:"16px"})},Ns=f=>{const g=y[f];if(!g)return 0;let x=0;return Object.values(g).forEach(S=>{S&&S.team1&&S.team2&&(x+=(parseInt(S.team1)||0)+(parseInt(S.team2)||0))}),x},yn=(f,g)=>{if(b[f])return b[f];const x=Ns(g);return x>0?x:""},Hd=()=>{if(b.superbowl_grand)return b.superbowl_grand;const f=Ns("wildcard"),g=Ns("divisional"),x=Ns("conference"),S=Ns("superbowl"),j=f+g+x+S;return j>0?j:""},j0=["ARI","ATL","BAL","BUF","CAR","CHI","CIN","CLE","DAL","DEN","DET","GB","HOU","IND","JAC","KC","LV","LAC","LAR","MIA","MIN","NE","NO","NYG","NYJ","PHI","PIT","SF","SEA","TB","TEN","WAS"],T0=()=>{const f=Ee.games.some(U=>{var q,Z,te,oe;return((Z=(q=E[c])==null?void 0:q[U.id])==null?void 0:Z.team1)||((oe=(te=E[c])==null?void 0:te[U.id])==null?void 0:oe.team2)}),g=Ee.games.some(U=>{var q,Z,te,oe;return((Z=(q=y[c])==null?void 0:q[U.id])==null?void 0:Z.team1)||((oe=(te=y[c])==null?void 0:te[U.id])==null?void 0:oe.team2)}),x=Ee.games.some(U=>{var q;return(q=m[c])==null?void 0:q[U.id]});if((f||g||x)&&!window.confirm(` POOL MANAGER RNG WARNING!

This will OVERWRITE:
 All team codes
 All actual scores
 All game statuses

Are you sure you want to continue?`))return;const S=[...j0].sort(()=>Math.random()-.5),j=Ee.games.length,I=j*2;if(I>S.length){alert(" Not enough unique teams for all games!");return}const N=S.slice(0,I),L={...E},F={...y},G={...m};L[c]||(L[c]={}),F[c]||(F[c]={}),G[c]||(G[c]={}),Ee.games.forEach((U,q)=>{const Z=N[q*2],te=N[q*2+1];let oe=Math.floor(Math.random()*48)+3,fe=Math.floor(Math.random()*48)+3;for(;oe===fe;)fe=Math.floor(Math.random()*48)+3;L[c][U.id]={team1:Z,team2:te},F[c][U.id]={team1:oe.toString(),team2:fe.toString()},G[c][U.id]="final",pe(K(Q,`teamCodes/${c}/${U.id}`),{team1:Z,team2:te}),pe(K(Q,`actualScores/${c}/${U.id}`),{team1:oe.toString(),team2:fe.toString()}),pe(K(Q,`gameStatus/${c}/${U.id}`),"final")}),v(L),k(F),C(G),alert(` POOL MANAGER RNG Complete!

 ${j} games populated
 Random teams assigned (each used once)
 Scores: 3-50 points
 No tied games guaranteed
 All games marked FINAL

Ready for testing!`)},Yd=()=>{if(console.log(""),console.log(" HANDLE LOGOUT CALLED"),console.log(" Current hasUnsavedChanges value:",at),console.log(" Current predictions:",JSON.stringify(p)),console.log(" Current originalPicks:",JSON.stringify(ta)),console.log(" Are they equal?",JSON.stringify(p)===JSON.stringify(ta)),at){if(console.log(" HAS UNSAVED CHANGES - SHOWING WARNING "),!window.confirm(` UNSAVED CHANGES!

You have unsaved picks that will be lost.

Click OK to DISCARD changes and logout
Click CANCEL to stay and save your picks`)){console.log(" User cancelled logout"),console.log("");return}console.log(" User confirmed logout - discarding changes")}else console.log(" NO UNSAVED CHANGES - LOGGING OUT DIRECTLY ");console.log(" Proceeding with logout..."),a(!1),i(""),r(""),d({}),e("picks"),yt(!1),console.log(" Logout complete"),console.log("")},P0=()=>{Rd(!0),setTimeout(()=>{Rd(!1)},800)},I0=()=>{if(at&&!window.confirm(` DISCARD CHANGES?

This will reset your picks to the last saved version.

Are you sure you want to discard your changes?`))return;const f=h.find(g=>g.playerCode===s&&g.week===c);d(f?f.predictions:{}),yt(!1)},R0=f=>{at?(Xl(f),Qe("unsavedChanges")):(u(f),eo(f))},eo=f=>{console.log(" LOAD WEEK PICKS CALLED "),console.log(" Loading picks for week:",f);const g=h.find(x=>x.week===f&&x.playerCode===s);if(g&&g.predictions){console.log(" Found existing picks:",JSON.stringify(g.predictions)),console.log(" Creating deep copies for predictions and originalPicks");const x=JSON.parse(JSON.stringify(g.predictions)),S=JSON.parse(JSON.stringify(g.predictions));d(x),vs(S),yt(!1),console.log(" Set hasUnsavedChanges to FALSE"),console.log(" LOAD WEEK PICKS COMPLETE ")}else console.log(" No existing picks found - clearing state"),d({}),vs({}),yt(!1),console.log(" LOAD WEEK PICKS COMPLETE (EMPTY) ")};O.useEffect(()=>{l&&s&&eo(c)},[c,l,s]),O.useEffect(()=>{if(h.length>0&&s){const f={};["wildcard","divisional","conference","superbowl"].forEach(g=>{const x=h.find(S=>S.week===g&&S.playerCode===s);if(x&&x.predictions){const S=ve[g].games.length,j=Object.keys(x.predictions).filter(I=>{var N,L;return((N=x.predictions[I])==null?void 0:N.team1)&&((L=x.predictions[I])==null?void 0:L.team2)}).length;f[g]={complete:j===S,count:j,total:S}}}),r0(f)}},[h,s]);const js=()=>{if(ue())return!0;const f=new Date,g=new Date(f.toLocaleString("en-US",{timeZone:"America/Los_Angeles"})),x=new Date(tp.firstFriday+"T00:00:00"),S=new Date(tp.lastMonday+"T23:59:59");if(g<x)return!0;if(g>S)return!1;const j=g.getDay(),I=g.getHours(),N=g.getMinutes();return!(j===5&&I===23&&N>=59||j===6||j===0||j===1&&I===0&&N===0)},Kd=()=>{const f=s.trim().toUpperCase();if(!f){Fa(f,"Empty code"),alert("Please enter your 6-character player code");return}if(f.length!==6||!/^[A-Z0-9]{6}$/.test(f)){Fa(f,"Invalid format - must be 6 alphanumeric characters"),alert(`Invalid code format!

Player codes must be exactly 6 characters (letters and numbers).
Example: A7K9M2`);return}const g=be[f];if(!g){Fa(f,"Code not recognized"),alert(`Invalid player code!

This code is not recognized.

Make sure you:
1. Paid your $20 entry fee
2. Received your code from the pool manager
3. Entered the code correctly

Contact: gammoneer2b@gmail.com`);return}if(h.find(S=>S.playerName===g&&S.week===c))if(_n.includes(f))alert(`Welcome, Pool Manager!

You have unrestricted access to:
 Enter picks anytime (no lockout)
 Enter team codes
 Enter actual game scores
 Set game status (LIVE/FINAL)
 Lock/unlock weeks
 View all player codes`);else{const S=Vt(c);alert(S?`Welcome back, ${g}!

 WARNING: This week is LOCKED!

Your existing picks for ${ve[c].name} will be loaded, but you cannot edit them because the games have been played.

You can only view your submitted picks.`:`Welcome back, ${g}!

Your existing picks for ${ve[c].name} will be loaded automatically.

You can edit and resubmit anytime except during playoff weekends (Friday 11:59 PM - Monday 12:01 AM PST).`)}else _n.includes(f)&&alert(`Welcome, Pool Manager!

You have unrestricted access to:
 Enter picks anytime (no lockout)
 Enter team codes
 Enter actual game scores
 Set game status (LIVE/FINAL)
 Lock/unlock weeks
 View all player codes`);_C(f,g),r(g),i(f),a(!0)},A0=()=>{const f=h.filter(N=>N.week===c);if(f.length===0){alert("No picks to download for this week.");return}const g=ve[c];let x="";x+="TEAM CODES:,",g.games.forEach(N=>{var G,U,q,Z;const L=((U=(G=E[c])==null?void 0:G[N.id])==null?void 0:U.team1)||"-",F=((Z=(q=E[c])==null?void 0:q[N.id])==null?void 0:Z.team2)||"-";x+=`${L},${F},`}),c==="superbowl"&&(x+=",,,,"),x+=`
`,x+="ACTUAL SCORES:,",g.games.forEach(N=>{var G,U,q,Z;const L=((U=(G=y[c])==null?void 0:G[N.id])==null?void 0:U.team1)||"-",F=((Z=(q=y[c])==null?void 0:q[N.id])==null?void 0:Z.team2)||"-";x+=`${L},${F},`}),c==="superbowl"&&(x+=",,,,"),x+=`
`,x+="GAME TOTALS:,",g.games.forEach(N=>{var q,Z,te,oe;const L=parseInt((Z=(q=y[c])==null?void 0:q[N.id])==null?void 0:Z.team1)||0,F=parseInt((oe=(te=y[c])==null?void 0:te[N.id])==null?void 0:oe.team2)||0,G=L+F,U=L>0||F>0?G:"-";x+=`${U},,`}),c==="superbowl"&&(x+=",,,,"),x+=`
`,x+="GAME STATUS:,",g.games.forEach(N=>{var G;const L=((G=m[c])==null?void 0:G[N.id])||"-";x+=`${L==="final"?"FINAL":L==="live"?"LIVE":"-"},,`}),c==="superbowl"&&(x+=",,,,"),x+=`
`,x+="OFFICIAL TOTALS:,",g.games.forEach(()=>{x+=",,"}),c==="superbowl"?(x+=`${b.superbowl_week4||"-"},`,x+=`${b.superbowl_week3||"-"},`,x+=`${b.superbowl_week2||"-"},`,x+=`${b.superbowl_week1||"-"},`,x+=`${b.superbowl_grand||"-"},`):x+=`${b[c]||"-"},`,x+=`
`,x+=`
`,x+=",",g.games.forEach(N=>{x+=`Game ${N.id},Game ${N.id},`}),x+=`
`,x+="Player Name,",g.games.forEach(N=>{x+=`${N.team1} Score,${N.team2} Score,`}),c==="superbowl"?x+="Week 4 Total,Week 3 Total,Week 2 Total,Week 1 Total,GRAND TOTAL,":x+="Total Points,",x+=`Submitted At
`,f.sort((N,L)=>(L.lastUpdated||L.timestamp)-(N.lastUpdated||N.timestamp)).forEach(N=>{if(x+=`"${N.playerName}",`,g.games.forEach(F=>{var q,Z;const G=((q=N.predictions[F.id])==null?void 0:q.team1)||"-",U=((Z=N.predictions[F.id])==null?void 0:Z.team2)||"-";x+=`${G},${U},`}),c==="superbowl"){const F=(()=>{const te=h.find(fe=>fe.playerName===N.playerName&&fe.week==="superbowl");if(!te)return 0;let oe=0;return ve.superbowl.games.forEach(fe=>{const tt=te.predictions[fe.id];tt&&(oe+=(Number(tt.team1)||0)+(Number(tt.team2)||0))}),oe})(),G=(()=>{const te=h.find(fe=>fe.playerName===N.playerName&&fe.week==="conference");if(!te)return 0;let oe=0;return ve.conference.games.forEach(fe=>{const tt=te.predictions[fe.id];tt&&(oe+=(Number(tt.team1)||0)+(Number(tt.team2)||0))}),oe})(),U=(()=>{const te=h.find(fe=>fe.playerName===N.playerName&&fe.week==="divisional");if(!te)return 0;let oe=0;return ve.divisional.games.forEach(fe=>{const tt=te.predictions[fe.id];tt&&(oe+=(Number(tt.team1)||0)+(Number(tt.team2)||0))}),oe})(),q=(()=>{const te=h.find(fe=>fe.playerName===N.playerName&&fe.week==="wildcard");if(!te)return 0;let oe=0;return ve.wildcard.games.forEach(fe=>{const tt=te.predictions[fe.id];tt&&(oe+=(Number(tt.team1)||0)+(Number(tt.team2)||0))}),oe})(),Z=F+G+U+q;x+=`${F},${G},${U},${q},${Z},`}else{const F=g.games.reduce((G,U)=>{var te,oe;const q=parseInt((te=N.predictions[U.id])==null?void 0:te.team1)||0,Z=parseInt((oe=N.predictions[U.id])==null?void 0:oe.team2)||0;return G+q+Z},0);x+=`${F},`}const L=new Date(N.lastUpdated||N.timestamp).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0});x+=`"${L}"
`});const S=new Blob([x],{type:"text/csv;charset=utf-8;"}),j=document.createElement("a"),I=URL.createObjectURL(S);j.setAttribute("href",I),j.setAttribute("download",`nfl_playoff_picks_${c}_${Date.now()}.csv`),j.style.visibility="hidden",document.body.appendChild(j),j.click(),document.body.removeChild(j)},Qd=async f=>{if(f.preventDefault(),Vt(c)){alert(` WEEK LOCKED

This week's games have been played.
Picks are permanently locked.`);return}if(!js()){alert(` SUBMISSIONS CLOSED

During playoff weekends, picks are locked from:
 Friday 11:59 PM PST
 Through Monday 12:01 AM PST`);return}const g=ve[c],x=[];if(g.games.forEach(I=>{(!p[I.id]||!p[I.id].team1||!p[I.id].team2)&&x.push(I.id)}),x.length>0){Dd(x),Qe("incomplete");return}const S=[];if(g.games.forEach(I=>{var F,G;const N=parseInt((F=p[I.id])==null?void 0:F.team1),L=parseInt((G=p[I.id])==null?void 0:G.team2);(isNaN(N)||isNaN(L)||N<0||L<0)&&S.push(I.id)}),S.length>0){Jy(S),Qe("invalidScores");return}const j=[];if(g.games.forEach(I=>{var F,G;const N=parseInt((F=p[I.id])==null?void 0:F.team1),L=parseInt((G=p[I.id])==null?void 0:G.team2);N===L&&j.push(I.id)}),j.length>0){Dd(j),Qe("tiedGames");return}if(!at){Qe("noChanges");return}try{const I=K(Q,"picks"),N=await Bs(I);let L=null,F=null;if(N.exists()){const q=N.val();for(const[Z,te]of Object.entries(q))if(te.playerCode===s&&te.week===c){L=te,F=Z;break}}const G={playerName:n,playerCode:s,week:c,predictions:p,timestamp:L?L.timestamp:Date.now(),lastUpdated:Date.now()};F?await pe(K(Q,`picks/${F}`),G):await Do(K(Q,"picks"),G),console.log(" SUBMIT SUCCESS "),T(!0),console.log(" Creating deep copy of predictions for originalPicks");const U=JSON.parse(JSON.stringify(p));vs(U),console.log(" Setting hasUnsavedChanges to FALSE"),yt(!1),Qe("success"),console.log(" SUBMIT COMPLETE - allPicks will update but NOT trigger reload! "),setTimeout(()=>{const q=document.querySelector(".all-picks");q&&q.scrollIntoView({behavior:"smooth"})},100)}catch(I){console.error("Error submitting picks:",I),alert("Error submitting picks. Please try again.")}},Ee=ve[c],D0=O.useMemo(()=>{const f={};return(c==="superbowl"?(()=>{const x=new Map;return h.forEach(S=>{var j;x.has(S.playerName)||x.set(S.playerName,{playerName:S.playerName,playerCode:S.playerCode,week:c,predictions:((j=h.find(I=>I.playerCode===S.playerCode&&I.week==="superbowl"))==null?void 0:j.predictions)||{}})}),Array.from(x.values())})():h.filter(x=>x.week===c)).forEach(x=>{f[x.playerName]||(f[x.playerName]={week4:0,week3:0,week2:0,week1:0,grand:0,current:0});let S=0;if(ve[c].games.forEach(I=>{const N=x.predictions[I.id];N&&N.team1&&N.team2&&(S+=(parseInt(N.team1)||0)+(parseInt(N.team2)||0))}),f[x.playerName].current=S,c==="superbowl"){const I=(N,L)=>{const F=h.find(U=>U.playerCode===N&&U.week===L);if(!F||!F.predictions)return 0;let G=0;return Object.values(F.predictions).forEach(U=>{U&&U.team1&&U.team2&&(G+=(parseInt(U.team1)||0)+(parseInt(U.team2)||0))}),G};f[x.playerName].week4=I(x.playerCode,"superbowl"),f[x.playerName].week3=I(x.playerCode,"conference"),f[x.playerName].week2=I(x.playerCode,"divisional"),f[x.playerName].week1=I(x.playerCode,"wildcard"),f[x.playerName].grand=f[x.playerName].week1+f[x.playerName].week2+f[x.playerName].week3+f[x.playerName].week4}}),f},[h,c,y]),W0=()=>{console.log(" Starting winner calculations...");const f={};h.forEach(S=>{if(S.firebaseKey&&S.playerCode&&S.predictions){f[S.playerCode]||(f[S.playerCode]={name:S.playerName,picks:{}});const j={};Array.isArray(S.predictions)?S.predictions.forEach((I,N)=>{N>0&&I&&(j[N.toString()]=I)}):Object.assign(j,S.predictions),f[S.playerCode].picks[S.week]=j}});const g={};Object.keys(y).forEach(S=>{if(y[S]){const j={};Object.keys(y[S]).forEach(I=>{j[I.toString()]=y[S][I]}),g[S]=j}}),console.log(" Converted picks:",Object.keys(f).length,"players"),console.log(" Converted scores:",Object.keys(g));const x={week1:{prize1:Ba(f,g,"wildcard"),prize2:$a(f,g,"wildcard")},week2:{prize1:Ba(f,g,"divisional"),prize2:$a(f,g,"divisional")},week3:{prize1:Ba(f,g,"conference"),prize2:$a(f,g,"conference")},week4:{prize1:wC(f,g),prize2:kC(f,g)},grandPrize:{prize1:SC(f,g),prize2:CC(f,g)}};return console.log(" All calculations complete!"),console.log(" Results:",x),x};return O.useEffect(()=>{if(h.length>0&&y){const f=W0();R(f),pe(K(Q,"calculatedWinners"),f)}},[h,y]),o.jsxs("div",{className:"App",children:[o.jsxs("header",{children:[o.jsx("h1",{children:" Richard's NFL Playoff Pool 2025"}),o.jsx("p",{children:"Enter your score predictions for each NFL Playoff 2025 game"}),o.jsxs("p",{style:{fontSize:"0.85rem",marginTop:"10px",opacity:.8},children:["v2.2-PLAYOFF-SCHEDULE-",new Date().toISOString().slice(0,10).replace(/-/g,"")]}),o.jsxs("div",{style:{marginTop:"15px",display:"flex",flexDirection:"column",gap:"10px",alignItems:"center"},children:[o.jsxs("div",{style:{display:"flex",gap:"15px",flexWrap:"wrap",justifyContent:"center"},children:[o.jsx("a",{href:"/nfl-playoff-pool/Playoff_Pool_Quick_Rules.pdf",target:"_blank",rel:"noopener noreferrer",style:{display:"inline-block",padding:"10px 20px",backgroundColor:"#0984e3",color:"white",textDecoration:"none",borderRadius:"5px",fontSize:"0.95rem",fontWeight:"bold",transition:"background-color 0.3s ease",cursor:"pointer"},onMouseOver:f=>f.target.style.backgroundColor="#74b9ff",onMouseOut:f=>f.target.style.backgroundColor="#0984e3",children:" View Quick Rules (2 Pages)"}),o.jsx("a",{href:"/nfl-playoff-pool/Richards_Playoff_Pool_LIX_Rulebook.pdf",target:"_blank",rel:"noopener noreferrer",style:{display:"inline-block",padding:"10px 20px",backgroundColor:"#6c5ce7",color:"white",textDecoration:"none",borderRadius:"5px",fontSize:"0.95rem",fontWeight:"bold",transition:"background-color 0.3s ease",cursor:"pointer"},onMouseOver:f=>f.target.style.backgroundColor="#a29bfe",onMouseOut:f=>f.target.style.backgroundColor="#6c5ce7",children:" View Full Rulebook (22 Pages)"})]}),o.jsx("p",{style:{fontSize:"1.1em",marginTop:"10px",color:"#ffffff",fontWeight:"500"},children:"Entry Fee: $20 - Must be paid before end of regular season"})]})]}),o.jsxs("div",{className:"container",children:[ue()&&l&&o.jsxs("div",{style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",padding:"15px 20px",borderRadius:"8px",marginBottom:"20px",boxShadow:"0 4px 6px rgba(0,0,0,0.1)"},children:[o.jsxs("h3",{style:{margin:"0 0 15px 0",display:"flex",alignItems:"center",gap:"10px"},children:[o.jsx("span",{children:""}),o.jsx("span",{children:"POOL MANAGER - WEEK LOCK CONTROLS"})]}),o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"10px"},children:Object.keys(ve).map(f=>{var j,I;const g=(j=B[f])==null?void 0:j.locked,x=zd(f),S=g||x;return o.jsxs("div",{style:{background:"rgba(255,255,255,0.15)",padding:"12px",borderRadius:"6px",display:"flex",flexDirection:"column",gap:"8px"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",fontWeight:"bold",fontSize:"0.9rem"},children:[o.jsxs("span",{children:[S?"":""," Week ",f==="wildcard"?"1":f==="divisional"?"2":f==="conference"?"3":"4"]}),o.jsx("span",{style:{fontSize:"0.75rem",opacity:.9},children:(I=B[f])==null?void 0:I.autoLockDate})]}),x&&!g&&o.jsx("div",{style:{fontSize:"0.7rem",padding:"4px 8px",background:"rgba(255,193,7,0.3)",borderRadius:"4px",border:"1px solid rgba(255,193,7,0.5)"},children:" AUTO-LOCKED"}),g&&o.jsx("div",{style:{fontSize:"0.7rem",padding:"4px 8px",background:"rgba(220,53,69,0.3)",borderRadius:"4px",border:"1px solid rgba(220,53,69,0.5)"},children:" MANUALLY LOCKED"}),o.jsx("button",{onClick:()=>g0(f),style:{padding:"8px 12px",background:g?"#28a745":"#dc3545",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.85rem",fontWeight:"600",transition:"all 0.2s"},children:g?" Unlock Week":" Lock Week"}),o.jsx("button",{onClick:()=>na(f),style:{padding:"8px 12px",background:"#e67e22",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.85rem",fontWeight:"600",transition:"all 0.2s",marginTop:"8px"},children:" Clear Week Data"})]},f)})}),o.jsx("p",{style:{fontSize:"0.8rem",marginTop:"12px",marginBottom:"0",opacity:.9},children:" Manual locks override automatic locks. Players cannot edit picks for locked weeks."})]}),ue()&&l&&o.jsxs("div",{style:{background:"linear-gradient(135deg, #f39c12 0%, #e74c3c 100%)",color:"white",padding:"20px",borderRadius:"8px",marginBottom:"20px",boxShadow:"0 4px 6px rgba(0,0,0,0.1)"},children:[o.jsxs("h3",{style:{margin:"0 0 15px 0",display:"flex",alignItems:"center",gap:"10px"},children:[o.jsx("span",{children:""}),o.jsx("span",{children:"POOL MANAGER OVERRIDE - ENTER/EDIT PICKS FOR ANY PLAYER"})]}),s0?o.jsxs("div",{children:[o.jsxs("div",{style:{marginBottom:"20px"},children:[o.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"600",fontSize:"0.95rem"},children:"Select Player:"}),o.jsxs("select",{value:ae,onChange:f=>{Cr(f.target.value),ws(null),ks(null),Ss(!1)},style:{width:"100%",padding:"12px",fontSize:"1rem",borderRadius:"6px",border:"2px solid white",background:"rgba(255,255,255,0.95)",color:"#333",fontWeight:"600"},children:[o.jsx("option",{value:"",children:"-- Select a Player --"}),Object.keys(be).sort((f,g)=>{const x=be[f].toUpperCase(),S=be[g].toUpperCase();return x.localeCompare(S)}).map(f=>o.jsxs("option",{value:f,children:[be[f]," (",f,")"]},f))]})]}),ae&&o.jsxs("div",{style:{background:"rgba(255,255,255,0.2)",padding:"15px",borderRadius:"6px",marginBottom:"15px"},children:[o.jsxs("div",{style:{marginBottom:"15px"},children:[o.jsx("strong",{children:"Selected:"})," ",be[ae]," (",ae,")",o.jsx("br",{}),o.jsx("strong",{children:"Week:"})," ",c==="wildcard"?"Week 1":c==="divisional"?"Week 2":c==="conference"?"Week 3":"Week 4",o.jsx("br",{}),o.jsx("strong",{children:"Status:"})," ",h.find(f=>f.playerCode===ae&&f.week===c)?" HAS PICKS":" NO PICKS"]}),o.jsxs("div",{style:{display:"flex",gap:"10px",flexWrap:"wrap"},children:[o.jsx("button",{onClick:Od,style:{flex:"1",minWidth:"150px",padding:"12px",background:"#9b59b6",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"0.9rem",fontWeight:"600"},children:" Generate RNG Picks"}),o.jsx("button",{onClick:a0,style:{flex:"1",minWidth:"150px",padding:"12px",background:"#3498db",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"0.9rem",fontWeight:"600"},children:" Enter/Edit Manually"})]}),h.find(f=>f.playerCode===ae)&&o.jsxs("div",{style:{marginTop:"15px",padding:"15px",background:"rgba(220, 53, 69, 0.1)",borderRadius:"6px",border:"2px solid rgba(220, 53, 69, 0.3)"},children:[o.jsx("div",{style:{marginBottom:"10px",fontWeight:"600",color:"#dc3545"},children:" Danger Zone - Delete Operations"}),o.jsxs("div",{style:{display:"flex",gap:"10px",flexWrap:"wrap"},children:[o.jsx("button",{onClick:()=>br("week"),style:{flex:"1",minWidth:"150px",padding:"12px",background:"#e67e22",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"0.9rem",fontWeight:"600"},children:" Delete This Week Only"}),o.jsx("button",{onClick:()=>br("all"),style:{flex:"1",minWidth:"150px",padding:"12px",background:"#c0392b",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"0.9rem",fontWeight:"600"},children:" Delete ALL Weeks"})]})]})]}),o.jsx("button",{onClick:()=>{_s(!1),Cr(""),ws(null),ks(null),Ss(!1)},style:{padding:"10px 20px",background:"#95a5a6",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"0.9rem",fontWeight:"600"},children:" Exit Override Mode"})]}):o.jsxs("div",{children:[o.jsx("p",{style:{marginBottom:"15px",fontSize:"0.9rem"},children:" Enter picks on behalf of players who missed the deadline or need assistance. Works even when week is locked."}),o.jsx("button",{onClick:()=>_s(!0),style:{padding:"12px 24px",background:"white",color:"#e74c3c",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"1rem",fontWeight:"700",boxShadow:"0 2px 4px rgba(0,0,0,0.2)"},children:" Enter Override Mode"})]})]}),i0&&Xn&&o.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4,padding:"20px"},children:o.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"30px",maxWidth:"600px",width:"100%",maxHeight:"90vh",overflow:"auto",boxShadow:"0 8px 32px rgba(0,0,0,0.3)"},children:[o.jsx("h3",{style:{marginTop:0,color:"#9b59b6"},children:" RNG PICKS GENERATED"}),o.jsxs("p",{style:{color:"#666",marginBottom:"20px"},children:["Player: ",o.jsx("strong",{children:be[ae]}),o.jsx("br",{}),"Week: ",o.jsx("strong",{children:c==="wildcard"?"Week 1":c==="divisional"?"Week 2":c==="conference"?"Week 3":"Week 4"})]}),o.jsx("div",{style:{marginBottom:"20px"},children:ve[c].games.map(f=>o.jsxs("div",{style:{padding:"12px",background:"#f8f9fa",borderRadius:"6px",marginBottom:"10px",border:"2px solid #e9ecef"},children:[o.jsxs("div",{style:{fontWeight:"600",marginBottom:"5px",color:"#333"},children:["Game ",f.id,": ",wn(c,f.id,"team1",V)," vs ",wn(c,f.id,"team2",V)]}),o.jsxs("div",{style:{fontSize:"1.2rem",fontWeight:"700",color:"#9b59b6"},children:[Xn[f.id].team1," - ",Xn[f.id].team2,Xn[f.id].team1>Xn[f.id].team2?` (${wn(c,f.id,"team1",V)} wins)`:` (${wn(c,f.id,"team2",V)} wins)`]})]},f.id))}),o.jsxs("div",{style:{background:"#d4edda",border:"1px solid #c3e6cb",color:"#155724",padding:"12px",borderRadius:"6px",marginBottom:"20px",fontSize:"0.9rem"},children:[" All scores between 10-50 (inclusive)",o.jsx("br",{})," No tied games",o.jsx("br",{}),' Will be marked as "POOL_MANAGER_RNG" in database']}),o.jsxs("div",{style:{display:"flex",gap:"10px",flexWrap:"wrap"},children:[o.jsx("button",{onClick:l0,style:{flex:"1",padding:"14px 24px",background:"#28a745",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"1rem",fontWeight:"700"},children:" Submit RNG Picks"}),o.jsx("button",{onClick:Od,style:{flex:"1",padding:"14px 24px",background:"#ffc107",color:"#333",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"1rem",fontWeight:"700"},children:" Regenerate"}),o.jsx("button",{onClick:()=>{Ss(!1),ks(null)},style:{padding:"14px 24px",background:"#dc3545",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"1rem",fontWeight:"700"},children:" Cancel"})]})]})}),Ld&&o.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4,padding:"20px"},children:o.jsx("div",{style:{background:"white",borderRadius:"12px",padding:"30px",maxWidth:"500px",width:"100%",boxShadow:"0 8px 32px rgba(0,0,0,0.3)"},children:Ld==="week"?o.jsxs(o.Fragment,{children:[o.jsxs("h3",{style:{marginTop:0,color:"#e67e22",display:"flex",alignItems:"center",gap:"10px"},children:[o.jsx("span",{children:""}),o.jsx("span",{children:"DELETE PICKS FOR THIS WEEK?"})]}),o.jsxs("div",{style:{marginBottom:"20px",color:"#666"},children:[o.jsxs("p",{children:[o.jsx("strong",{children:"Player:"})," ",be[ae]]}),o.jsxs("p",{children:[o.jsx("strong",{children:"Week:"})," ",c==="wildcard"?"Week 1 (Wildcard)":c==="divisional"?"Week 2 (Divisional)":c==="conference"?"Week 3 (Conference)":"Week 4 (Super Bowl)"]})]}),o.jsxs("div",{style:{background:"#fff3cd",border:"1px solid #ffc107",color:"#856404",padding:"15px",borderRadius:"6px",marginBottom:"20px",fontSize:"0.95rem"},children:[o.jsx("strong",{children:" Warning:"})," This will DELETE ",be[ae],"'s picks for this week only.",o.jsx("br",{}),o.jsx("strong",{children:"This action CANNOT be undone!"})]}),o.jsxs("div",{style:{display:"flex",gap:"10px"},children:[o.jsx("button",{onClick:()=>br(null),style:{flex:"1",padding:"14px",background:"#95a5a6",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"1rem",fontWeight:"700"},children:" Cancel"}),o.jsx("button",{onClick:u0,style:{flex:"1",padding:"14px",background:"#e67e22",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"1rem",fontWeight:"700"},children:" Yes, Delete This Week"})]})]}):o.jsxs(o.Fragment,{children:[o.jsxs("h3",{style:{marginTop:0,color:"#c0392b",display:"flex",alignItems:"center",gap:"10px"},children:[o.jsx("span",{children:""}),o.jsx("span",{children:"DELETE ALL PICKS?"})]}),o.jsx("div",{style:{marginBottom:"20px",color:"#666"},children:o.jsxs("p",{children:[o.jsx("strong",{children:"Player:"})," ",be[ae]]})}),o.jsxs("div",{style:{background:"#f8d7da",border:"2px solid #dc3545",color:"#721c24",padding:"15px",borderRadius:"6px",marginBottom:"20px",fontSize:"0.95rem"},children:[o.jsx("strong",{children:" DANGER:"})," This will DELETE ALL of ",be[ae],"'s picks:",o.jsx("br",{}),o.jsx("br",{}),h.filter(f=>f.playerCode===ae).map(f=>o.jsxs("div",{style:{marginLeft:"20px"},children:[" ",f.week==="wildcard"?"Week 1":f.week==="divisional"?"Week 2":f.week==="conference"?"Week 3":"Week 4"," picks"]},f.week)),o.jsx("br",{}),o.jsx("strong",{children:"This action CANNOT be undone!"}),o.jsx("br",{}),o.jsx("strong",{children:"Are you absolutely sure?"})]}),o.jsxs("div",{style:{display:"flex",gap:"10px"},children:[o.jsx("button",{onClick:()=>br(null),style:{flex:"1",padding:"14px",background:"#95a5a6",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"1rem",fontWeight:"700"},children:" Cancel"}),o.jsx("button",{onClick:d0,style:{flex:"1",padding:"14px",background:"#c0392b",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"1rem",fontWeight:"700"},children:" Yes, Delete Everything"})]})]})})}),Cs&&o.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4,padding:"20px"},children:o.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"30px",maxWidth:"500px",width:"100%",boxShadow:"0 8px 32px rgba(0,0,0,0.3)"},children:[o.jsxs("h3",{style:{marginTop:0,color:"#e67e22",display:"flex",alignItems:"center",gap:"10px"},children:[o.jsx("span",{children:""}),o.jsx("span",{children:"CLEAR WEEK DATA?"})]}),o.jsx("div",{style:{marginBottom:"20px",color:"#666"},children:o.jsxs("p",{children:[o.jsx("strong",{children:"Week:"})," ",Cs==="wildcard"?"Week 1 (Wildcard)":Cs==="divisional"?"Week 2 (Divisional)":Cs==="conference"?"Week 3 (Conference)":"Week 4 (Super Bowl)"]})}),o.jsxs("div",{style:{background:"#fff3cd",border:"2px solid #ffc107",color:"#856404",padding:"15px",borderRadius:"6px",marginBottom:"20px",fontSize:"0.95rem"},children:[o.jsx("strong",{children:" This will DELETE:"}),o.jsxs("div",{style:{marginLeft:"20px",marginTop:"10px"},children:[" All team names for this week",o.jsx("br",{})," All actual scores for this week",o.jsx("br",{})," All game statuses (FINAL/LIVE) for this week"]}),o.jsx("br",{}),o.jsx("strong",{style:{color:"#d63031"},children:" This will KEEP:"}),o.jsx("div",{style:{marginLeft:"20px",marginTop:"5px"},children:" ALL player picks (NOT deleted!)"}),o.jsx("br",{}),o.jsx("strong",{children:"This action CANNOT be undone!"})]}),o.jsxs("div",{style:{display:"flex",gap:"10px"},children:[o.jsx("button",{onClick:()=>na(null),style:{flex:"1",padding:"14px",background:"#95a5a6",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"1rem",fontWeight:"700"},children:" Cancel"}),o.jsx("button",{onClick:()=>f0(Cs),style:{flex:"1",padding:"14px",background:"#e67e22",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"1rem",fontWeight:"700"},children:" Yes, Clear Week Data"})]})]})}),ue()&&l&&o.jsx(qS,{currentWeek:c,games:Ee.games,actualScores:y,teamCodes:E,onScoresFetched:Fd,onGameLockToggle:y0,gameLocks:J,espnAutoRefresh:De}),ue()&&l&&o.jsx("div",{style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",padding:"20px",borderRadius:"8px",marginBottom:"20px",boxShadow:"0 4px 15px rgba(102, 126, 234, 0.4)"},children:o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[o.jsxs("div",{children:[o.jsxs("h3",{style:{margin:"0 0 8px 0",display:"flex",alignItems:"center",gap:"10px"},children:[o.jsx("span",{children:""}),o.jsx("span",{children:"POOL MANAGER RNG - Quick Test Data"})]}),o.jsx("p",{style:{margin:0,fontSize:"0.9rem",opacity:.9},children:"Auto-populate teams, scores, and mark games as FINAL for testing"})]}),o.jsx("button",{onClick:T0,style:{padding:"12px 24px",background:"white",color:"#667eea",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"1rem",fontWeight:"700",boxShadow:"0 4px 12px rgba(0,0,0,0.2)",transition:"all 0.3s ease",whiteSpace:"nowrap"},onMouseOver:f=>{f.target.style.transform="translateY(-2px)",f.target.style.boxShadow="0 6px 16px rgba(0,0,0,0.3)"},onMouseOut:f=>{f.target.style.transform="translateY(0)",f.target.style.boxShadow="0 4px 12px rgba(0,0,0,0.2)"},children:" Generate Test Data"})]})}),ue()&&l&&o.jsxs("div",{style:{background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)",color:"white",padding:"15px 20px",borderRadius:"8px",marginBottom:"20px",boxShadow:"0 4px 6px rgba(0,0,0,0.1)"},children:[o.jsxs("h3",{style:{margin:"0 0 15px 0",display:"flex",alignItems:"center",gap:"10px"},children:[o.jsx("span",{children:""}),o.jsx("span",{children:"ALL PLAYER CODES"})]}),o.jsx("div",{style:{background:"rgba(255,255,255,0.95)",padding:"15px",borderRadius:"6px",maxHeight:"300px",overflowY:"auto"},children:o.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.9rem"},children:[o.jsx("thead",{children:o.jsxs("tr",{style:{background:"#f8f9fa",borderBottom:"2px solid #dee2e6"},children:[o.jsx("th",{style:{padding:"10px",textAlign:"left",color:"#495057",fontWeight:"600"},children:"Player Code"}),o.jsx("th",{style:{padding:"10px",textAlign:"left",color:"#495057",fontWeight:"600"},children:"Player Name"}),o.jsx("th",{style:{padding:"10px",textAlign:"center",color:"#495057",fontWeight:"600"},children:"Role"})]})}),o.jsx("tbody",{children:Object.entries(be).sort((f,g)=>{const x=_n.includes(f[0]),S=_n.includes(g[0]);return x&&!S?-1:!x&&S?1:f[1].localeCompare(g[1])}).map(([f,g],x)=>{const S=_n.includes(f);return o.jsxs("tr",{style:{background:x%2===0?"#ffffff":"#f8f9fa",borderBottom:"1px solid #dee2e6"},children:[o.jsx("td",{style:{padding:"10px",color:"#212529",fontFamily:"monospace",fontWeight:"bold",fontSize:"1rem"},children:f}),o.jsx("td",{style:{padding:"10px",color:"#212529"},children:g}),o.jsx("td",{style:{padding:"10px",textAlign:"center"},children:S?o.jsx("span",{style:{padding:"4px 8px",background:"#dc3545",color:"white",borderRadius:"4px",fontSize:"0.75rem",fontWeight:"600"},children:" MANAGER"}):o.jsx("span",{style:{padding:"4px 8px",background:"#28a745",color:"white",borderRadius:"4px",fontSize:"0.75rem",fontWeight:"600"},children:" PLAYER"})})]},f)})})]})}),o.jsxs("p",{style:{fontSize:"0.8rem",marginTop:"12px",marginBottom:"0",opacity:.9},children:[" Total Players: ",Object.keys(be).length," | Pool Managers: ",_n.length," | Regular Players: ",Object.keys(be).length-_n.length]})]}),l&&o.jsx(oC,{currentWeek:c,onWeekChange:R0,weekPicks:n0,weekLockStatus:B,hasUnsavedChanges:at,isPoolManager:ue()}),l&&o.jsxs("div",{className:"view-navigation",children:[o.jsxs("button",{className:`nav-btn ${t==="picks"?"active":""}`,onClick:()=>e("picks"),children:[" #1 Make Picks or Logout",t==="picks"&&o.jsx("span",{style:{marginLeft:"8px",fontSize:"0.75rem",opacity:.9,fontStyle:"italic"},children:"(you are here)"})]}),o.jsxs("button",{className:`nav-btn ${t==="standings"?"active":""}`,onClick:()=>e("standings"),children:[" #2 Standings & Prizes",t==="standings"&&o.jsx("span",{style:{marginLeft:"8px",fontSize:"0.75rem",opacity:.9,fontStyle:"italic"},children:"(you are here)"})]}),o.jsxs("button",{className:`nav-btn ${t==="winners"?"active":""}`,onClick:()=>e("winners"),children:[" #3 How Winners Are Determined",t==="winners"&&o.jsx("span",{style:{marginLeft:"8px",fontSize:"0.75rem",opacity:.9,fontStyle:"italic"},children:"(you are here)"})]}),ue()&&o.jsxs("button",{className:`nav-btn ${t==="playoffSetup"?"active":""}`,onClick:()=>e("playoffSetup"),children:[" Setup Playoff Teams",o.jsx("span",{style:{marginLeft:"8px",fontSize:"0.7rem",padding:"2px 6px",background:"#667eea",color:"white",borderRadius:"10px",fontWeight:"500"},children:"Pool Manager"}),t==="playoffSetup"&&o.jsx("span",{style:{marginLeft:"8px",fontSize:"0.75rem",opacity:.9,fontStyle:"italic"},children:"(you are here)"})]}),ue()&&o.jsxs("button",{className:`nav-btn ${t==="loginLogs"?"active":""}`,onClick:()=>e("loginLogs"),children:[" Login Logs",o.jsx("span",{style:{marginLeft:"8px",fontSize:"0.7rem",padding:"2px 6px",background:"#667eea",color:"white",borderRadius:"10px",fontWeight:"500"},children:"Pool Manager"}),t==="loginLogs"&&o.jsx("span",{style:{marginLeft:"8px",fontSize:"0.75rem",opacity:.9,fontStyle:"italic"},children:"(you are here)"})]})]}),t==="standings"&&l?o.jsx(XS,{allPicks:h,actualScores:y,currentWeek:c,playerName:n,playerCode:s,isPoolManager:ue(),prizePool:Fe,officialWinners:Qi,onLogout:Yd}):t==="winners"&&l?o.jsx(EC,{calculatedWinners:A,publishedWinners:D,isPoolManager:ue(),onPublishPrize:_0,onUnpublishPrize:w0}):t==="loginLogs"&&l?o.jsx(yC,{isPoolManager:ue(),playerCodes:be}):t==="playoffSetup"&&l?o.jsx(bC,{playoffTeams:V,actualScores:y,onSavePlayoffTeams:k0,isPoolManager:ue()}):o.jsxs(o.Fragment,{children:[l?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"player-confirmed",children:[o.jsx("span",{className:"confirmation-badge",children:" VERIFIED"}),o.jsxs("h3",{children:["Welcome, ",o.jsx("span",{className:"player-name-highlight",children:n}),"!",ue()&&o.jsx("span",{style:{marginLeft:"10px",color:"#d63031"},children:" POOL MANAGER"})]}),o.jsxs("div",{style:{display:"inline-block",padding:"8px 20px",marginBottom:"10px",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",borderRadius:"25px",fontWeight:"bold",fontSize:"1.1rem",boxShadow:"0 4px 15px rgba(102, 126, 234, 0.4)",letterSpacing:"0.5px"},children:[c==="wildcard"&&" WEEK 1 OF 4",c==="divisional"&&" WEEK 2 OF 4",c==="conference"&&" WEEK 3 OF 4",c==="superbowl"&&" WEEK 4 OF 4"]}),o.jsxs("p",{style:{color:"#000",marginTop:"8px"},children:["Making picks for: ",o.jsx("strong",{children:Ee.name})]}),Vt(c)&&!ue()&&o.jsx("div",{style:{marginTop:"10px",padding:"10px 15px",background:"#fff3cd",border:"2px solid #ffc107",borderRadius:"6px",color:"#856404",fontWeight:"600"},children:" This week is LOCKED - You can view your picks but cannot edit them"}),o.jsx("button",{className:"validate-btn",style:{marginTop:"15px",padding:"10px 20px",fontSize:"0.9rem"},onClick:Yd,children:" Logout / Switch Entry"}),o.jsx("p",{style:{fontSize:"0.85rem",color:"#666",marginTop:"10px",fontStyle:"italic"},children:" Playing with multiple entries? Logout to switch between your codes."})]}),!((Xd=V==null?void 0:V.week1)!=null&&Xd.configured)&&o.jsxs("div",{style:{margin:"20px 0",padding:"20px",background:"linear-gradient(135deg, #ffd89b 0%, #19547b 100%)",borderRadius:"12px",border:"3px solid #ff9800",boxShadow:"0 4px 6px rgba(0,0,0,0.1)",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"2rem",marginBottom:"10px"},children:""}),o.jsx("h3",{style:{color:"white",margin:"0 0 10px 0",fontSize:"1.3rem",textShadow:"2px 2px 4px rgba(0,0,0,0.3)"},children:"Playoff Teams Will Be Announced Soon"}),o.jsxs("p",{style:{color:"white",fontSize:"1rem",margin:0,opacity:.95},children:["The 2025 NFL Playoff teams will be determined/entered here after the regular season ends January 4, 2026.",o.jsx("br",{}),"Pool Manager will announce the 14 playoff teams here once finalized."]})]}),!js()&&o.jsx("div",{className:"closed-warning",children:" PICKS ARE LOCKED (Playoff Weekend: Friday 11:59 PM - Monday 12:01 AM PST)"}),o.jsxs("div",{className:"prediction-form",children:[Er==="manual"?o.jsxs("h2",{style:{color:"#e74c3c"},children:[" OVERRIDE MODE: Entering Picks for ",be[ae]]}):o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"15px",gap:"15px"},children:[o.jsxs("h2",{style:{margin:0,flex:"1"},children:["Enter Your Predictions: ",o.jsxs("span",{style:{fontSize:"0.95rem",color:"#667eea",fontWeight:"600"},children:[c==="wildcard"&&"Wk 1",c==="divisional"&&"Wk 2",c==="conference"&&"Wk 3",c==="superbowl"&&"Wk 4"]})]}),!Vt(c)&&o.jsx("button",{type:"button",onClick:x0,style:{padding:"10px 20px",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"0.95rem",fontWeight:"600",boxShadow:"0 4px 15px rgba(102, 126, 234, 0.4)",transition:"all 0.3s ease"},onMouseOver:f=>{f.target.style.transform="translateY(-2px)",f.target.style.boxShadow="0 6px 20px rgba(102, 126, 234, 0.6)"},onMouseOut:f=>{f.target.style.transform="translateY(0)",f.target.style.boxShadow="0 4px 15px rgba(102, 126, 234, 0.4)"},children:" Quick RNG Pick - Auto-fill all games"})]}),o.jsxs("div",{className:"progress-indicator",children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[o.jsx("strong",{children:"Progress:"}),o.jsxs("span",{children:[Object.keys(p).filter(f=>p[f]&&p[f].team1&&p[f].team2).length," of ",Ee.games.length," games completed"]})]}),o.jsx("div",{className:"progress-bar",children:o.jsxs("div",{className:"progress-fill",style:{width:`${Object.keys(p).filter(f=>p[f]&&p[f].team1&&p[f].team2).length/Ee.games.length*100}%`},children:[Math.round(Object.keys(p).filter(f=>p[f]&&p[f].team1&&p[f].team2).length/Ee.games.length*100),"%"]})})]}),o.jsxs("form",{onSubmit:Er==="manual"?c0:Qd,children:[Ee.games.map(f=>{var g,x,S,j,I,N;return o.jsxs("div",{className:"game-prediction",children:[o.jsxs("h3",{children:["Game ",f.id,": ",wn(c,f.id,"team1",V)," @ ",wn(c,f.id,"team2",V),((g=E[c])==null?void 0:g[f.id])&&o.jsxs("span",{style:{fontSize:"0.9rem",color:"#666",marginLeft:"10px"},children:["(",E[c][f.id].team1||"?"," @ ",E[c][f.id].team2||"?",")"]})]}),((x=y[c])==null?void 0:x[f.id])&&o.jsxs("div",{style:{padding:"10px 15px",background:"#ffffff",border:"3px solid #4caf50",borderRadius:"6px",marginBottom:"12px",fontSize:"1rem"},children:[o.jsx("strong",{style:{color:"#000",fontSize:"1.05rem"},children:"Actual Score:"})," ",o.jsxs("span",{style:{color:"#000",fontWeight:"700",fontSize:"1.1rem"},children:[y[c][f.id].team1||"-"," - ",y[c][f.id].team2||"-"]}),((S=m[c])==null?void 0:S[f.id])==="final"&&o.jsx("span",{style:{marginLeft:"10px",padding:"2px 8px",background:"#4caf50",color:"white",borderRadius:"4px",fontSize:"0.8rem",fontWeight:"bold"},children:" FINAL"}),((j=m[c])==null?void 0:j[f.id])==="live"&&o.jsx("span",{style:{marginLeft:"10px",padding:"2px 8px",background:"#ff9800",color:"white",borderRadius:"4px",fontSize:"0.8rem",fontWeight:"bold"},children:" LIVE"})]}),o.jsxs("div",{className:"score-inputs",children:[o.jsxs("div",{className:"team-score",children:[o.jsxs("label",{children:[o.jsx("span",{className:"team-designation",children:"AWAY TEAM"}),o.jsx("span",{className:"team-name-label",style:{color:"#ffffff",fontWeight:"700"},children:f.team1})]}),o.jsx("input",{type:"number",min:"0",max:"99",value:((I=p[f.id])==null?void 0:I.team1)||"",onChange:L=>Bd(f.id,"team1",L.target.value),placeholder:"0",required:!0,disabled:Vt(c)},`${f.id}-team1-${n}`)]}),o.jsx("div",{className:"vs",children:"VS"}),o.jsxs("div",{className:"team-score",children:[o.jsxs("label",{children:[o.jsx("span",{className:"team-designation",children:"HOME TEAM"}),o.jsx("span",{className:"team-name-label",style:{color:"#ffffff",fontWeight:"700"},children:f.team2})]}),o.jsx("input",{type:"number",min:"0",max:"99",value:((N=p[f.id])==null?void 0:N.team2)||"",onChange:L=>Bd(f.id,"team2",L.target.value),placeholder:"0",required:!0,disabled:Vt(c)},`${f.id}-team2-${n}`)]})]})]},f.id)}),o.jsxs("div",{style:{display:"flex",gap:"15px",marginTop:"20px"},children:[o.jsx("button",{type:"submit",className:"submit-btn",disabled:Er==="manual"?!1:!js()||Vt(c),style:Er==="manual"?{background:"#e74c3c",fontSize:"1.1rem",fontWeight:"700",flex:"1"}:{flex:"1"},children:Er==="manual"?` Submit for ${be[ae]}`:Vt(c)&&!ue()?" Week Locked - Cannot Edit Picks":js()?" Submit / Update My Picks":" Submissions Locked (Playoff Weekend)"}),!Vt(c)&&Er!=="manual"&&o.jsx("button",{type:"button",onClick:I0,style:{padding:"15px 30px",background:"#6c757d",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"1.1rem",fontWeight:"600",transition:"all 0.3s ease",flex:"0 0 auto",minWidth:"150px"},onMouseOver:f=>{f.target.style.background="#5a6268"},onMouseOut:f=>{f.target.style.background="#6c757d"},children:" Cancel"})]}),js()&&!Vt(c)&&o.jsx("p",{style:{textAlign:"center",marginTop:"15px",color:"#666",fontSize:"0.9rem"},children:"You can edit and resubmit your picks as many times as you want until Friday 11:59 PM PST (before game weekends)"})]})]})]}):o.jsx("div",{className:"prediction-form",children:o.jsxs("div",{className:"code-entry-section",children:[o.jsx("h3",{children:" Enter Your Player Code"}),o.jsx("p",{style:{marginBottom:"20px",color:"#666"},children:"You received a 6-character code when you paid your $20 entry fee."}),o.jsx("p",{style:{marginBottom:"20px",color:"#666",fontSize:"0.9rem",fontStyle:"italic"},children:" Have multiple entries? Enter one code at a time."}),o.jsxs("div",{className:"code-input-group",children:[o.jsx("label",{htmlFor:"playerCode",children:"Player Code (6 characters)"}),o.jsx("input",{type:"text",id:"playerCode",className:"code-input",value:s,onChange:f=>i(f.target.value.toUpperCase()),placeholder:"A7K9M2",maxLength:"6",autoComplete:"off",onKeyPress:f=>{f.key==="Enter"&&Kd()}}),o.jsx("button",{className:"validate-btn",onClick:Kd,children:"Validate Code & Continue"}),o.jsxs("div",{style:{marginTop:"20px",padding:"15px",background:"#fff3cd",border:"2px solid #ffc107",borderRadius:"8px",textAlign:"left"},children:[o.jsx("h4",{style:{margin:"0 0 10px 0",color:"#856404"},children:" Entry Fee Payment"}),o.jsxs("p",{style:{margin:"5px 0",fontSize:"0.9rem",color:"#856404"},children:[o.jsx("strong",{children:"Cost:"})," $20 per entry"]}),o.jsxs("p",{style:{margin:"5px 0",fontSize:"0.9rem",color:"#856404"},children:[o.jsx("strong",{children:"Send e-Transfer to:"})," gammoneer2b@gmail.com"]}),o.jsxs("p",{style:{margin:"5px 0",fontSize:"0.9rem",color:"#856404"},children:[o.jsx("strong",{children:"Password:"})," nflpool"]}),o.jsx("p",{style:{margin:"10px 0 5px 0",fontSize:"0.85rem",color:"#856404",fontStyle:"italic"},children:"You will receive your player code after payment is confirmed."})]}),o.jsx("p",{style:{marginTop:"15px",fontSize:"0.9rem",color:"#666",textAlign:"center"},children:"Questions? Contact: gammoneer2b@gmail.com"})]})]})}),o.jsxs("div",{className:"all-picks",children:[o.jsxs("h2",{children:["All Player Picks - ",Ee.name,o.jsx("button",{onClick:A0,style:{marginLeft:"15px",padding:"8px 16px",background:"#4caf50",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"0.9rem",fontWeight:"600"},children:" Download CSV"}),o.jsx("div",{style:{fontSize:"0.75rem",color:"#666",marginTop:"5px",fontStyle:"italic"},children:" Mobile: Open the DOWNLOADABLE CSV file with Google Sheets (free app) or MS Office EXCEL"}),o.jsx("button",{onClick:P0,disabled:ys,style:{marginLeft:"10px",padding:"8px 16px",background:ys?"#a0a0a0":"#667eea",color:"white",border:"none",borderRadius:"6px",cursor:ys?"not-allowed":"pointer",fontSize:"0.9rem",fontWeight:"600",opacity:ys?.7:1},children:ys?" Refreshed!":" Refresh Picks Table"})]}),h.filter(f=>f.week===c).length===0?o.jsx("p",{className:"no-picks",children:"No picks submitted yet for this week."}):o.jsx("div",{className:"picks-table-container",children:o.jsxs("table",{className:"picks-table",children:[o.jsxs("thead",{children:[o.jsxs("tr",{children:[o.jsx("th",{rowSpan:"2",children:"Player"}),Ee.games.map(f=>{var g,x,S,j,I;return o.jsxs("th",{colSpan:"2",children:["Game ",f.id,o.jsx("br",{}),o.jsxs("small",{style:{color:"#ffffff",fontWeight:"700"},children:[wn(c,f.id,"team1",V)," @ ",wn(c,f.id,"team2",V)]}),ue()&&o.jsxs("div",{style:{marginTop:"5px",display:"flex",gap:"5px",justifyContent:"center",alignItems:"center"},children:[o.jsx("input",{type:"text",maxLength:"3",value:((x=(g=E[c])==null?void 0:g[f.id])==null?void 0:x.team1)||"",onChange:N=>$d(f.id,"team1",N.target.value),placeholder:"PIT",style:{width:"45px",padding:"4px",textAlign:"center",fontSize:"0.8rem",fontWeight:"bold",border:"2px solid #667eea",borderRadius:"4px"}}),o.jsx("span",{style:{fontSize:"0.8rem"},children:"@"}),o.jsx("input",{type:"text",maxLength:"3",value:((j=(S=E[c])==null?void 0:S[f.id])==null?void 0:j.team2)||"",onChange:N=>$d(f.id,"team2",N.target.value),placeholder:"BUF",style:{width:"45px",padding:"4px",textAlign:"center",fontSize:"0.8rem",fontWeight:"bold",border:"2px solid #667eea",borderRadius:"4px"}})]}),!ue()&&((I=E[c])==null?void 0:I[f.id])&&o.jsxs("div",{style:{fontSize:"0.8rem",color:"#ffffff",fontWeight:"700",marginTop:"3px"},children:[E[c][f.id].team1||"?"," @ ",E[c][f.id].team2||"?"]})]},f.id)}),o.jsxs("th",{rowSpan:"2",style:{backgroundColor:"#e8f5e9",fontWeight:"bold",color:"#090909ff",minWidth:"60px",fontSize:"0.75rem",padding:"8px 4px"},children:[o.jsx("div",{style:{marginBottom:"2px"},children:"Correct"}),o.jsx("div",{children:"Picks"})]}),c==="superbowl"?o.jsxs(o.Fragment,{children:[o.jsxs("th",{rowSpan:"2",style:{backgroundColor:"#fff3cd",fontWeight:"bold",color:"#000"},children:[ue()?o.jsxs("div",{style:{marginBottom:"8px"},children:[o.jsxs("div",{style:{fontSize:"0.7rem",marginBottom:"4px",color:"#000",display:"flex",alignItems:"center",justifyContent:"center",gap:"5px"},children:["OFFICIAL ",H.superbowl_week4?"":"",H.superbowl_week4&&o.jsx("button",{onClick:()=>bs("superbowl_week4"),title:"Return to auto-calculation",style:{padding:"2px 6px",fontSize:"0.65rem",background:"#e74c3c",color:"white",border:"none",borderRadius:"3px",cursor:"pointer"},children:"Clear"})]}),o.jsx("input",{type:"number",min:"0",value:yn("superbowl_week4","superbowl"),onChange:f=>Nr("superbowl_week4",f.target.value),placeholder:"Auto",title:H.superbowl_week4?"Manually overridden - click Clear to return to auto":"Auto-calculated - click to override",style:{width:"60px",padding:"4px",textAlign:"center",fontSize:"1rem",fontWeight:"bold",border:H.superbowl_week4?"2px solid #e74c3c":"2px solid #27ae60",borderRadius:"4px",color:"#000",backgroundColor:H.superbowl_week4?"#ffe5e5":"#e8f8f5"}})]}):o.jsxs("div",{style:{marginBottom:"8px"},children:[o.jsxs("div",{style:{fontSize:"0.7rem",color:"#000",marginBottom:"2px"},children:["Official ",H.superbowl_week4?"":""]}),o.jsx("div",{style:{fontSize:"1rem",fontWeight:"bold",color:"#d63031"},children:yn("superbowl_week4","superbowl")||"-"})]}),"Week 4",o.jsx("br",{}),"Total"]}),o.jsxs("th",{rowSpan:"2",style:{backgroundColor:"#d1ecf1",fontWeight:"bold",color:"#000"},children:[ue()?o.jsxs("div",{style:{marginBottom:"8px"},children:[o.jsxs("div",{style:{fontSize:"0.7rem",marginBottom:"4px",color:"#000",display:"flex",alignItems:"center",justifyContent:"center",gap:"5px"},children:["OFFICIAL ",H.superbowl_week3?"":"",H.superbowl_week3&&o.jsx("button",{onClick:()=>bs("superbowl_week3"),title:"Return to auto-calculation",style:{padding:"2px 6px",fontSize:"0.65rem",background:"#e74c3c",color:"white",border:"none",borderRadius:"3px",cursor:"pointer"},children:"Clear"})]}),o.jsx("input",{type:"number",min:"0",value:yn("superbowl_week3","conference"),onChange:f=>Nr("superbowl_week3",f.target.value),placeholder:"Auto",title:H.superbowl_week3?"Manually overridden - click Clear to return to auto":"Auto-calculated - click to override",style:{width:"60px",padding:"4px",textAlign:"center",fontSize:"1rem",fontWeight:"bold",border:H.superbowl_week3?"2px solid #e74c3c":"2px solid #27ae60",borderRadius:"4px",color:"#000",backgroundColor:H.superbowl_week3?"#ffe5e5":"#e8f8f5"}})]}):o.jsxs("div",{style:{marginBottom:"8px"},children:[o.jsxs("div",{style:{fontSize:"0.7rem",color:"#000",marginBottom:"2px"},children:["Official ",H.superbowl_week3?"":""]}),o.jsx("div",{style:{fontSize:"1rem",fontWeight:"bold",color:"#d63031"},children:yn("superbowl_week3","conference")||"-"})]}),"Week 3",o.jsx("br",{}),"Total"]}),o.jsxs("th",{rowSpan:"2",style:{backgroundColor:"#d4edda",fontWeight:"bold",color:"#000"},children:[ue()?o.jsxs("div",{style:{marginBottom:"8px"},children:[o.jsxs("div",{style:{fontSize:"0.7rem",marginBottom:"4px",color:"#000",display:"flex",alignItems:"center",justifyContent:"center",gap:"5px"},children:["OFFICIAL ",H.superbowl_week2?"":"",H.superbowl_week2&&o.jsx("button",{onClick:()=>bs("superbowl_week2"),title:"Return to auto-calculation",style:{padding:"2px 6px",fontSize:"0.65rem",background:"#e74c3c",color:"white",border:"none",borderRadius:"3px",cursor:"pointer"},children:"Clear"})]}),o.jsx("input",{type:"number",min:"0",value:yn("superbowl_week2","divisional"),onChange:f=>Nr("superbowl_week2",f.target.value),placeholder:"Auto",title:H.superbowl_week2?"Manually overridden - click Clear to return to auto":"Auto-calculated - click to override",style:{width:"60px",padding:"4px",textAlign:"center",fontSize:"1rem",fontWeight:"bold",border:H.superbowl_week2?"2px solid #e74c3c":"2px solid #27ae60",borderRadius:"4px",color:"#000",backgroundColor:H.superbowl_week2?"#ffe5e5":"#e8f8f5"}})]}):o.jsxs("div",{style:{marginBottom:"8px"},children:[o.jsxs("div",{style:{fontSize:"0.7rem",color:"#000",marginBottom:"2px"},children:["Official ",H.superbowl_week2?"":""]}),o.jsx("div",{style:{fontSize:"1rem",fontWeight:"bold",color:"#d63031"},children:yn("superbowl_week2","divisional")||"-"})]}),"Week 2",o.jsx("br",{}),"Total"]}),o.jsxs("th",{rowSpan:"2",style:{backgroundColor:"#f8d7da",fontWeight:"bold",color:"#000"},children:[ue()?o.jsxs("div",{style:{marginBottom:"8px"},children:[o.jsxs("div",{style:{fontSize:"0.7rem",marginBottom:"4px",color:"#000",display:"flex",alignItems:"center",justifyContent:"center",gap:"5px"},children:["OFFICIAL ",H.superbowl_week1?"":"",H.superbowl_week1&&o.jsx("button",{onClick:()=>bs("superbowl_week1"),title:"Return to auto-calculation",style:{padding:"2px 6px",fontSize:"0.65rem",background:"#e74c3c",color:"white",border:"none",borderRadius:"3px",cursor:"pointer"},children:"Clear"})]}),o.jsx("input",{type:"number",min:"0",value:yn("superbowl_week1","wildcard"),onChange:f=>Nr("superbowl_week1",f.target.value),placeholder:"Auto",title:H.superbowl_week1?"Manually overridden - click Clear to return to auto":"Auto-calculated - click to override",style:{width:"60px",padding:"4px",textAlign:"center",fontSize:"1rem",fontWeight:"bold",border:H.superbowl_week1?"2px solid #e74c3c":"2px solid #27ae60",borderRadius:"4px",color:"#000",backgroundColor:H.superbowl_week1?"#ffe5e5":"#e8f8f5"}})]}):o.jsxs("div",{style:{marginBottom:"8px"},children:[o.jsxs("div",{style:{fontSize:"0.7rem",color:"#000",marginBottom:"2px"},children:["Official ",H.superbowl_week1?"":""]}),o.jsx("div",{style:{fontSize:"1rem",fontWeight:"bold",color:"#d63031"},children:yn("superbowl_week1","wildcard")||"-"})]}),"Week 1",o.jsx("br",{}),"Total"]}),o.jsxs("th",{rowSpan:"2",className:"grand-total",children:[ue()?o.jsxs("div",{style:{marginBottom:"8px"},children:[o.jsxs("div",{style:{fontSize:"0.7rem",marginBottom:"4px",color:"#fff",display:"flex",alignItems:"center",justifyContent:"center",gap:"5px"},children:[H.superbowl_grand?"":""," over",H.superbowl_grand&&o.jsx("button",{onClick:()=>bs("superbowl_grand"),title:"Return to auto-calculation",style:{padding:"2px 6px",fontSize:"0.65rem",background:"#e74c3c",color:"white",border:"none",borderRadius:"3px",cursor:"pointer"},children:"Clear"})]}),o.jsx("input",{type:"number",min:"0",value:Hd(),onChange:f=>Nr("superbowl_grand",f.target.value),placeholder:"Auto",title:H.superbowl_grand?"Manually overridden - click Clear to return to auto":"Auto-calculated - click to override",style:{width:"70px",padding:"4px",textAlign:"center",fontSize:"1rem",fontWeight:"bold",border:H.superbowl_grand?"3px solid #e74c3c":"3px solid #27ae60",borderRadius:"4px",backgroundColor:H.superbowl_grand?"#ffe5e5":"#e8f8f5",color:"#000"}})]}):o.jsxs("div",{style:{marginBottom:"8px"},children:[o.jsxs("div",{style:{fontSize:"0.7rem",color:"#fff",marginBottom:"2px"},children:[H.superbowl_grand?" ":" ","Official"]}),o.jsx("div",{style:{fontSize:"1.2rem",fontWeight:"bold",color:"#fff"},children:Hd()||"-"})]}),"GRAND",o.jsx("br",{}),"TOTAL"]})]}):o.jsxs("th",{rowSpan:"2",style:{backgroundColor:"#f8f9fa",fontWeight:"bold",color:"#000"},children:[!b[c]&&(()=>{const f=Ee.games.reduce((g,x)=>{var I,N,L,F;const S=parseInt((N=(I=y[c])==null?void 0:I[x.id])==null?void 0:N.team1)||0,j=parseInt((F=(L=y[c])==null?void 0:L[x.id])==null?void 0:F.team2)||0;return g+S+j},0);return o.jsxs("div",{style:{fontSize:"1.05rem",color:"#131515ff",marginBottom:"6px",fontWeight:"700"},children:["Actual Total: ",f>0?f:"-"]})})(),ue()?o.jsx("div",{style:{marginBottom:"8px"},children:o.jsx("input",{type:"number",min:"0",value:b[c]||"",onChange:f=>Nr(c,f.target.value),placeholder:"override",style:{width:"60px",padding:"4px",textAlign:"center",fontSize:"0.9rem",fontWeight:"bold",border:"2px solid #f39c12",borderRadius:"4px",color:"#000"}})}):null,b[c]&&o.jsxs("div",{style:{marginBottom:"8px"},children:[o.jsx("div",{style:{fontSize:"0.7rem",color:"#000",marginBottom:"2px"},children:"Official"}),o.jsx("div",{style:{fontSize:"1rem",fontWeight:"bold",color:"#d63031"},children:b[c]})]}),"Official",o.jsx("br",{}),"Total"]}),o.jsx("th",{rowSpan:"2",children:"Submitted"})]}),o.jsx("tr",{style:{background:"#ffffff",borderTop:"3px solid #4caf50",borderBottom:"3px solid #4caf50"},children:Ee.games.map(f=>{var g,x,S,j,I,N,L,F,G,U,q;return o.jsxs(Ga.Fragment,{children:[o.jsx("th",{style:{padding:"8px 4px",background:"#ffffff",borderLeft:"1px solid #ddd"},children:ue()?o.jsxs("div",{children:[o.jsx("input",{type:"number",min:"0",max:"99",value:((x=(g=y[c])==null?void 0:g[f.id])==null?void 0:x.team1)||"",onChange:Z=>Ud(f.id,"team1",Z.target.value),placeholder:"-",style:{width:"50px",padding:"4px",textAlign:"center",fontSize:"1rem",fontWeight:"bold",border:"2px solid #4caf50",borderRadius:"4px",color:"#000",background:"#f0fff0"}}),o.jsx("div",{style:{fontSize:"0.75rem",marginTop:"3px",color:"#000",fontWeight:"700"},children:"ACTUAL"})]}):o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"1.1rem",fontWeight:"bold",color:"#000"},children:((j=(S=y[c])==null?void 0:S[f.id])==null?void 0:j.team1)||"-"}),o.jsx("div",{style:{fontSize:"0.75rem",color:"#000",fontWeight:"700"},children:"ACTUAL"})]})}),o.jsx("th",{style:{padding:"8px 4px",background:"#ffffff",borderRight:"1px solid #ddd"},children:ue()?o.jsxs("div",{children:[o.jsx("input",{type:"number",min:"0",max:"99",value:((N=(I=y[c])==null?void 0:I[f.id])==null?void 0:N.team2)||"",onChange:Z=>Ud(f.id,"team2",Z.target.value),placeholder:"-",style:{width:"50px",padding:"4px",textAlign:"center",fontSize:"1rem",fontWeight:"bold",border:"2px solid #4caf50",borderRadius:"4px",color:"#000",background:"#f0fff0"}}),o.jsx("div",{style:{fontSize:"0.75rem",marginTop:"3px",color:"#000",fontWeight:"700"},children:"ACTUAL"}),o.jsxs("select",{value:((L=m[c])==null?void 0:L[f.id])||"",onChange:Z=>v0(f.id,Z.target.value),style:{width:"60px",padding:"2px",fontSize:"0.7rem",marginTop:"4px",borderRadius:"3px",border:"1px solid #999"},children:[o.jsx("option",{value:"",children:"--"}),o.jsx("option",{value:"live",children:" LIVE"}),o.jsx("option",{value:"final",children:" FINAL"})]})]}):o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"1.1rem",fontWeight:"bold",color:"#000"},children:((G=(F=y[c])==null?void 0:F[f.id])==null?void 0:G.team2)||"-"}),o.jsx("div",{style:{fontSize:"0.75rem",color:"#000",fontWeight:"700"},children:"ACTUAL"}),((U=m[c])==null?void 0:U[f.id])==="final"&&o.jsx("div",{style:{display:"inline-block",padding:"2px 6px",background:"#4caf50",color:"white",borderRadius:"3px",fontSize:"0.65rem",fontWeight:"bold",marginTop:"4px"},children:" FINAL"}),((q=m[c])==null?void 0:q[f.id])==="live"&&o.jsx("div",{style:{display:"inline-block",padding:"2px 6px",background:"#ff9800",color:"white",borderRadius:"3px",fontSize:"0.65rem",fontWeight:"bold",marginTop:"4px"},children:" LIVE"})]})})]},`actual-${f.id}`)})})]}),o.jsx("tbody",{children:(c==="superbowl"?(()=>{const g=new Map;return h.forEach(x=>{if(!g.has(x.playerCode)){const S=h.find(j=>j.playerCode===x.playerCode&&j.week==="superbowl");g.set(x.playerCode,S||{playerName:x.playerName,playerCode:x.playerCode,week:"superbowl",predictions:{},timestamp:x.timestamp,lastUpdated:x.lastUpdated||x.timestamp})}}),Array.from(g.values())})():h.filter(g=>g.week===c)).sort((g,x)=>(x.lastUpdated||x.timestamp)-(g.lastUpdated||g.timestamp)).map((g,x)=>{var j;const S=I=>{var oe;const N=(oe=y[c])==null?void 0:oe[I],L=g.predictions[I];if(!N||!L)return!1;const F=parseInt(N.team1),G=parseInt(N.team2),U=parseInt(L.team1),q=parseInt(L.team2);if(isNaN(F)||isNaN(G))return!1;const Z=F>G?"team1":G>F?"team2":"tie",te=U>q?"team1":q>U?"team2":"tie";return Z===te&&Z!=="tie"};return o.jsxs("tr",{children:[o.jsx("td",{className:"player-name",children:g.playerName}),Ee.games.map(I=>{var q,Z,te,oe;const N=g.predictions[I.id],L=(q=y[c])==null?void 0:q[I.id],F=(Z=m[c])==null?void 0:Z[I.id],G=Md(N==null?void 0:N.team1,N==null?void 0:N.team2,L==null?void 0:L.team1,L==null?void 0:L.team2,F,!0),U=Md(N==null?void 0:N.team1,N==null?void 0:N.team2,L==null?void 0:L.team1,L==null?void 0:L.team2,F,!1);return o.jsxs(Ga.Fragment,{children:[o.jsx("td",{className:"score",style:{background:G.background,color:G.color,fontWeight:G.background!=="transparent"?"bold":"normal"},children:((te=g.predictions[I.id])==null?void 0:te.team1)||"-"}),o.jsx("td",{className:"score",style:{background:U.background,color:U.color,fontWeight:U.background!=="transparent"?"bold":"normal"},children:((oe=g.predictions[I.id])==null?void 0:oe.team2)||"-"})]},`${x}-${I.id}`)}),(()=>{let I=0;return Ee.games.forEach(N=>{S(N.id)&&I++}),o.jsx("td",{style:{backgroundColor:"#f1f8f4",fontWeight:"bold",fontSize:"1rem",color:I>0?"#2e7d32":"#999",textAlign:"center",padding:"8px 4px"},children:I})})(),c==="superbowl"?o.jsx(o.Fragment,{children:(()=>{const I=Zi(g.playerCode,"superbowl"),N=Zi(g.playerCode,"conference"),L=Zi(g.playerCode,"divisional"),F=Zi(g.playerCode,"wildcard"),G=N0(g.playerCode);return o.jsxs(o.Fragment,{children:[o.jsx("td",{style:{backgroundColor:"#fff3cd",fontWeight:"bold",fontSize:I.fontSize},title:I.tooltip,children:o.jsx("span",{style:{color:"#000"},children:I.display})}),o.jsx("td",{style:{backgroundColor:"#d1ecf1",fontWeight:"bold",fontSize:N.fontSize},title:N.tooltip,children:o.jsx("span",{style:{color:"#000"},children:N.display})}),o.jsx("td",{style:{backgroundColor:"#d4edda",fontWeight:"bold",fontSize:L.fontSize},title:L.tooltip,children:o.jsx("span",{style:{color:"#000"},children:L.display})}),o.jsx("td",{style:{backgroundColor:"#f8d7da",fontWeight:"bold",fontSize:F.fontSize},title:F.tooltip,children:o.jsx("span",{style:{color:"#000"},children:F.display})}),o.jsx("td",{className:"grand-total",style:{fontSize:G.fontSize},title:G.tooltip,children:G.display})]})})()}):o.jsx("td",{style:{backgroundColor:"#f8f9fa",fontWeight:"bold",fontSize:"16px"},children:o.jsx("span",{style:{color:"#000"},children:((j=D0[g.playerName])==null?void 0:j.current)||0})}),o.jsx("td",{className:"timestamp",children:new Date(g.lastUpdated||g.timestamp).toLocaleString("en-US",{month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})})]},x)})})]})}),l&&o.jsxs(o.Fragment,{children:[c==="superbowl"&&o.jsxs("div",{style:{marginTop:"40px",marginBottom:"40px",padding:"30px",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",borderRadius:"12px",border:"3px solid #5a67d8",boxShadow:"0 8px 20px rgba(0,0,0,0.15)"},children:[o.jsx("h3",{style:{color:"#fff",marginBottom:"20px",fontSize:"1.4rem",display:"flex",alignItems:"center",gap:"10px"},children:" Format Guide - How to Read the Totals"}),o.jsxs("div",{style:{background:"rgba(255,255,255,0.95)",padding:"25px",borderRadius:"10px",color:"#333"},children:[o.jsxs("div",{style:{marginBottom:"25px"},children:[o.jsx("p",{style:{fontWeight:"bold",color:"#5a67d8",marginBottom:"12px",fontSize:"1.1rem"},children:"Grand Total Format:"}),o.jsxs("ul",{style:{listStyle:"none",padding:0,margin:0,lineHeight:"2.2"},children:[o.jsxs("li",{children:[o.jsx("strong",{children:"Complete Entry:"})," ",o.jsx("code",{style:{background:"#f0f4f8",padding:"4px 10px",borderRadius:"5px",fontWeight:"bold",color:"#2d3748"},children:"784"})," - All 4 weeks entered"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"During Season:"})," ",o.jsx("code",{style:{background:"#f0f4f8",padding:"4px 10px",borderRadius:"5px",fontWeight:"bold",color:"#2d3748"},children:"784/598/35"})," - Full Pred / Played Weeks / Difference"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"After Season:"})," ",o.jsx("code",{style:{background:"#f0f4f8",padding:"4px 10px",borderRadius:"5px",fontWeight:"bold",color:"#2d3748"},children:"784/55"})," - Full Pred / Total Difference"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Abnormal Pattern:"})," ",o.jsx("code",{style:{background:"#fff3cd",padding:"4px 10px",borderRadius:"5px",fontWeight:"bold",color:"#856404",border:"2px solid #ffc107"},children:"P13/415"})," - P = Partial (weeks 1 & 3 only - unusual!)"]})]})]}),o.jsxs("div",{style:{marginBottom:"25px"},children:[o.jsx("p",{style:{fontWeight:"bold",color:"#5a67d8",marginBottom:"12px",fontSize:"1.1rem"},children:"Special Indicators:"}),o.jsxs("ul",{style:{listStyle:"none",padding:0,margin:0,lineHeight:"2.2"},children:[o.jsxs("li",{children:[o.jsx("strong",{children:"Asterisk (*):"})," ",o.jsx("code",{style:{background:"#f0f4f8",padding:"4px 10px",borderRadius:"5px",fontWeight:"bold",color:"#2d3748"},children:"234*"})," - Pick filled by RNG/Pool Manager"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"P Notation:"})," Shows which weeks entered when pattern is unusual (e.g., P13 = weeks 1 & 3, skipped 2)"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Dash (-):"})," Week not entered yet"]})]})]}),o.jsxs("div",{style:{marginBottom:"15px"},children:[o.jsx("p",{style:{fontWeight:"bold",color:"#5a67d8",marginBottom:"12px",fontSize:"1.1rem"},children:"Examples:"}),o.jsxs("ul",{style:{listStyle:"none",padding:0,margin:0,lineHeight:"2.2"},children:[o.jsxs("li",{children:["Richard: ",o.jsx("code",{style:{background:"#f0f4f8",padding:"4px 10px",borderRadius:"5px",fontWeight:"bold"},children:"784"})," - Entered all 4 weeks normally"]}),o.jsxs("li",{children:["Neema: ",o.jsx("code",{style:{background:"#f0f4f8",padding:"4px 10px",borderRadius:"5px",fontWeight:"bold"},children:"533/287/22"})," - 2 weeks played so far, 22 points off"]}),o.jsxs("li",{children:["Bob: ",o.jsx("code",{style:{background:"#fff3cd",padding:"4px 10px",borderRadius:"5px",fontWeight:"bold",border:"2px solid #ffc107"},children:"P13/415"})," - Entered weeks 1 & 3 only (skipped 2) - unusual!"]}),o.jsxs("li",{children:["After RNG fills Bob's week 2: ",o.jsx("code",{style:{background:"#f0f4f8",padding:"4px 10px",borderRadius:"5px",fontWeight:"bold"},children:"649"})," - P notation drops (normalized)"]})]})]}),o.jsx("div",{style:{paddingTop:"20px",borderTop:"2px solid #cbd5e0",marginTop:"15px"},children:o.jsxs("p",{style:{color:"#4a5568",fontStyle:"italic",fontSize:"1rem",margin:0},children:[" ",o.jsx("strong",{children:"Tip:"})," Hover over any number for detailed breakdown! The P notation only appears for unusual entry patterns and disappears once normalized."]})})]})]}),o.jsx("div",{style:{marginTop:"60px"},children:o.jsx(gC,{allPicks:h,actualScores:y,games:ve,officialWinners:Qi,weekData:ve})})]}),l&&ue()&&o.jsxs("div",{style:{marginTop:"40px",marginBottom:"40px"},children:[o.jsxs("div",{style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",padding:"25px",borderRadius:"12px",marginBottom:"30px",boxShadow:"0 4px 6px rgba(0,0,0,0.1)"},children:[o.jsxs("h2",{style:{margin:"0 0 15px 0",display:"flex",alignItems:"center",gap:"10px"},children:[o.jsx("span",{children:""}),o.jsx("span",{children:"PRIZE POOL MANAGEMENT"})]}),Fe.totalFees>0?o.jsxs("div",{children:[o.jsxs("div",{style:{background:"rgba(255,255,255,0.2)",padding:"20px",borderRadius:"8px",marginBottom:"15px"},children:[o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"20px",marginBottom:"15px"},children:[o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"0.85rem",opacity:.9},children:"Total Pool Fees"}),o.jsxs("div",{style:{fontSize:"1.8rem",fontWeight:"bold"},children:["$",Fe.totalFees.toFixed(2)]})]}),o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"0.85rem",opacity:.9},children:"Number of Players"}),o.jsx("div",{style:{fontSize:"1.8rem",fontWeight:"bold"},children:Fe.numberOfPlayers})]}),o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"0.85rem",opacity:.9},children:"Each Prize (10%)"}),o.jsxs("div",{style:{fontSize:"1.8rem",fontWeight:"bold"},children:["$",Fe.prizeValue.toFixed(2)]})]})]}),o.jsxs("div",{style:{fontSize:"0.85rem",opacity:.8},children:["Entry Fee: $",Fe.entryFee," per player"]})]}),o.jsx("button",{onClick:()=>Xi(!0),style:{padding:"10px 20px",background:"rgba(255,255,255,0.3)",color:"white",border:"2px solid white",borderRadius:"6px",cursor:"pointer",fontWeight:"600"},children:" Edit Prize Pool Setup"})]}):o.jsxs("div",{children:[o.jsx("p",{style:{marginBottom:"15px"},children:" Set up your prize pool to enable winner declarations."}),o.jsx("button",{onClick:()=>Xi(!0),style:{padding:"12px 24px",background:"white",color:"#667eea",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:"700",fontSize:"1rem"},children:" Set Up Prize Pool"})]})]}),Fe.totalFees>0&&o.jsxs("div",{style:{background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)",color:"white",padding:"25px",borderRadius:"12px",boxShadow:"0 4px 6px rgba(0,0,0,0.1)"},children:[o.jsxs("h2",{style:{margin:"0 0 20px 0",display:"flex",alignItems:"center",gap:"10px"},children:[o.jsx("span",{children:""}),o.jsx("span",{children:"DECLARE PRIZE WINNERS"})]}),o.jsx("button",{onClick:()=>ea(!0),style:{padding:"14px 28px",background:"white",color:"#f5576c",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"700",fontSize:"1.1rem",boxShadow:"0 2px 4px rgba(0,0,0,0.2)"},children:" Declare Winner(s) for a Prize"}),Object.keys(Qi).length>0&&o.jsxs("div",{style:{marginTop:"25px"},children:[o.jsx("h3",{style:{marginBottom:"15px",fontSize:"1.1rem"},children:" Current Prize Winners:"}),o.jsx("div",{style:{background:"rgba(255,255,255,0.2)",padding:"15px",borderRadius:"8px",maxHeight:"400px",overflowY:"auto"},children:Object.entries(Qi).sort((f,g)=>{const x=f[1].prizeNumber,S=g[1].prizeNumber;return x-S}).map(([f,g])=>o.jsxs("div",{style:{background:"rgba(255,255,255,0.9)",color:"#333",padding:"15px",borderRadius:"6px",marginBottom:"12px"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"10px"},children:[o.jsxs("div",{children:[o.jsx("div",{style:{fontWeight:"bold",fontSize:"1rem",marginBottom:"5px"},children:g.prizeName}),o.jsxs("div",{style:{fontSize:"0.9rem",color:"#666"},children:["Prize Value: $",g.prizeValue.toFixed(2)]})]}),o.jsx("button",{onClick:()=>m0(g.prizeNumber),style:{padding:"6px 12px",background:"#e74c3c",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.85rem",fontWeight:"600"},children:" Delete"})]}),o.jsx("div",{style:{paddingLeft:"15px"},children:g.winners.map((x,S)=>o.jsxs("div",{style:{padding:"8px 0",borderBottom:S<g.winners.length-1?"1px solid #eee":"none"},children:[o.jsxs("span",{style:{fontWeight:"600"},children:[" ",x.playerName]}),o.jsxs("span",{style:{marginLeft:"15px",color:"#666"},children:[x.percentage.toFixed(2),"% = $",x.amount.toFixed(2)]})]},S))})]},f))})]})]})]}),e0&&o.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4,padding:"20px"},children:o.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"30px",maxWidth:"600px",width:"100%",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 8px 32px rgba(0,0,0,0.3)"},children:[o.jsx("h2",{style:{marginTop:0,color:"#667eea"},children:" Prize Pool Setup"}),o.jsxs("div",{style:{marginBottom:"20px"},children:[o.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"600"},children:"Total Pool Fees Collected:"}),o.jsx("input",{type:"number",id:"totalFees",defaultValue:Fe.totalFees||"",placeholder:"1000",style:{width:"100%",padding:"12px",fontSize:"1.1rem",border:"2px solid #667eea",borderRadius:"6px"}}),o.jsx("div",{style:{fontSize:"0.85rem",color:"#666",marginTop:"5px"},children:"Total money collected from all players"})]}),o.jsxs("div",{style:{marginBottom:"20px"},children:[o.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"600"},children:"Number of Players:"}),o.jsx("input",{type:"number",id:"numberOfPlayers",defaultValue:Fe.numberOfPlayers||"",placeholder:"50",style:{width:"100%",padding:"12px",fontSize:"1.1rem",border:"2px solid #667eea",borderRadius:"6px"}}),o.jsx("div",{style:{fontSize:"0.85rem",color:"#666",marginTop:"5px"},children:"Total number of players in the pool"})]}),o.jsxs("div",{style:{marginBottom:"20px"},children:[o.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"600"},children:"Entry Fee per Player:"}),o.jsx("input",{type:"number",id:"entryFee",defaultValue:Fe.entryFee||20,placeholder:"20",style:{width:"100%",padding:"12px",fontSize:"1.1rem",border:"2px solid #667eea",borderRadius:"6px"}}),o.jsx("div",{style:{fontSize:"0.85rem",color:"#666",marginTop:"5px"},children:"Amount each player paid to enter ($20, $50, etc.)"})]}),o.jsxs("div",{style:{background:"#f0f8ff",padding:"15px",borderRadius:"8px",marginBottom:"20px"},children:[o.jsx("div",{style:{fontWeight:"600",marginBottom:"10px"},children:" Calculation Preview:"}),o.jsxs("div",{style:{fontSize:"0.9rem",lineHeight:"1.6"},children:["Each Prize = Total Pool  10",o.jsx("br",{}),o.jsx("span",{id:"prizePreview",style:{fontWeight:"bold",color:"#667eea"},children:"Example: $1,000  10 = $100 per prize"})]})]}),o.jsxs("div",{style:{display:"flex",gap:"10px"},children:[o.jsx("button",{onClick:()=>Xi(!1),style:{flex:"1",padding:"14px",background:"#95a5a6",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"1rem",fontWeight:"700"},children:" Cancel"}),o.jsx("button",{onClick:()=>{const f=document.getElementById("totalFees").value,g=document.getElementById("numberOfPlayers").value,x=document.getElementById("entryFee").value;if(!f||f<=0){alert(" Please enter a valid total pool amount.");return}h0(f,g,x)},style:{flex:"1",padding:"14px",background:"#667eea",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"1rem",fontWeight:"700"},children:" Save Prize Pool"})]})]})}),t0&&o.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4,padding:"20px"},children:o.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"30px",maxWidth:"700px",width:"100%",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 8px 32px rgba(0,0,0,0.3)"},children:[o.jsx("h2",{style:{marginTop:0,color:"#f5576c"},children:" Declare Prize Winner(s)"}),o.jsxs("div",{style:{marginBottom:"20px"},children:[o.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"600"},children:"Select Prize:"}),o.jsxs("select",{value:Rt,onChange:f=>ql(f.target.value),style:{width:"100%",padding:"12px",fontSize:"1rem",border:"2px solid #f5576c",borderRadius:"6px"},children:[o.jsx("option",{value:"",children:"-- Select Prize --"}),[1,2,3,4,5,6,7,8,9,10].map(f=>o.jsx("option",{value:f,children:Es(f)},f))]}),Rt&&o.jsxs("div",{style:{marginTop:"8px",fontSize:"0.9rem",color:"#666"},children:["Prize Value: $",Fe.prizeValue.toFixed(2)," (10% of pool)"]})]}),Rt&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{style:{marginBottom:"20px"},children:[o.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"600"},children:"Number of Winners (Tie?):"}),o.jsx("input",{type:"number",min:"1",max:"10",value:Sr,onChange:f=>{const g=parseInt(f.target.value)||1;Jl(g),qi(Array(g).fill(null).map(()=>({name:"",code:""})));const x=Ji(Fe.prizeValue,g);xs(x)},style:{width:"100%",padding:"12px",fontSize:"1rem",border:"2px solid #f5576c",borderRadius:"6px"}}),o.jsx("div",{style:{fontSize:"0.85rem",color:"#666",marginTop:"5px"},children:"How many players are tied? (1 = single winner, 2+ = tie)"})]}),o.jsxs("div",{style:{marginBottom:"20px"},children:[o.jsx("label",{style:{display:"block",marginBottom:"12px",fontWeight:"600"},children:"Select Winner(s):"}),Array(Sr).fill(0).map((f,g)=>{var S,j,I;const x=gn?null:Ji(Fe.prizeValue,Sr)[g];return o.jsxs("div",{style:{background:"#f8f9fa",padding:"15px",borderRadius:"8px",marginBottom:"12px"},children:[o.jsxs("div",{style:{marginBottom:"10px",fontWeight:"600"},children:["Winner ",g+1,":"]}),o.jsxs("select",{value:((S=Et[g])==null?void 0:S.code)||"",onChange:N=>{const L=Object.entries(be).find(([G])=>G===N.target.value),F=[...Et];F[g]={code:N.target.value,name:L?L[1]:""},qi(F)},style:{width:"100%",padding:"10px",fontSize:"1rem",border:"1px solid #ddd",borderRadius:"6px",marginBottom:"8px"},children:[o.jsx("option",{value:"",children:"-- Select Player --"}),Object.entries(be).sort((N,L)=>N[1].localeCompare(L[1])).map(([N,L])=>o.jsx("option",{value:N,children:L},N))]}),!gn&&x&&o.jsxs("div",{style:{fontSize:"0.9rem",color:"#666"},children:["Share: ",x.percentage.toFixed(2),"% = $",x.amount.toFixed(2),g===Sr-1&&Sr>1&&o.jsx("span",{style:{marginLeft:"10px",fontSize:"0.85rem",color:"#f5576c"},children:"(includes extra penny)"})]}),gn&&o.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"8px"},children:[o.jsx("input",{type:"number",placeholder:"%",step:"0.01",value:((j=Gt[g])==null?void 0:j.percentage)||"",onChange:N=>{const L=[...Gt],F=parseFloat(N.target.value)||0;L[g]={...L[g],percentage:F,amount:Fe.prizeValue*F/100},xs(L)},style:{flex:"1",padding:"8px",border:"1px solid #ddd",borderRadius:"4px"}}),o.jsx("input",{type:"number",placeholder:"$",step:"0.01",value:((I=Gt[g])==null?void 0:I.amount)||"",onChange:N=>{const L=[...Gt],F=parseFloat(N.target.value)||0;L[g]={...L[g],amount:F,percentage:F/Fe.prizeValue*100},xs(L)},style:{flex:"1",padding:"8px",border:"1px solid #ddd",borderRadius:"4px"}})]})]},g)})]}),o.jsx("div",{style:{marginBottom:"20px"},children:o.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"10px",cursor:"pointer"},children:[o.jsx("input",{type:"checkbox",checked:gn,onChange:f=>Zl(f.target.checked),style:{width:"18px",height:"18px"}}),o.jsx("span",{style:{fontWeight:"600"},children:"Use custom percentages/amounts (manual override)"})]})}),o.jsxs("div",{style:{background:"#fff3cd",border:"2px solid #ffc107",padding:"15px",borderRadius:"8px",marginBottom:"20px",color:"#000"},children:[o.jsx("div",{style:{fontWeight:"700",marginBottom:"10px",color:"#000",fontSize:"1.05rem"},children:" Summary:"}),Et.every(f=>f.name)?o.jsxs("div",{style:{color:"#000"},children:[Et.map((f,g)=>{const x=gn?Gt[g]:Ji(Fe.prizeValue,Sr)[g];return o.jsxs("div",{style:{marginBottom:"5px",color:"#000",fontWeight:"600"},children:[" ",f.name,": ",x==null?void 0:x.percentage.toFixed(2),"% = $",x==null?void 0:x.amount.toFixed(2)]},g)}),o.jsxs("div",{style:{marginTop:"10px",paddingTop:"10px",borderTop:"2px solid #856404",fontWeight:"700",color:"#000"},children:["Total: ",gn?Gt.reduce((f,g)=>f+(g.percentage||0),0).toFixed(2):"100.00","% = $",gn?Gt.reduce((f,g)=>f+(g.amount||0),0).toFixed(2):Fe.prizeValue.toFixed(2)]})]}):o.jsx("div",{style:{color:"#856404",fontWeight:"600"},children:"Select all winners to see summary"})]})]}),o.jsxs("div",{style:{display:"flex",gap:"10px"},children:[o.jsx("button",{onClick:()=>{ea(!1),ql(""),Jl(1),qi([]),Zl(!1),xs([])},style:{flex:"1",padding:"14px",background:"#95a5a6",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"1rem",fontWeight:"700"},children:" Cancel"}),o.jsx("button",{onClick:p0,disabled:!Rt||!Et.every(f=>f.name),style:{flex:"1",padding:"14px",background:Rt&&Et.every(f=>f.name)?"#f5576c":"#ccc",color:"white",border:"none",borderRadius:"6px",cursor:Rt&&Et.every(f=>f.name)?"pointer":"not-allowed",fontSize:"1rem",fontWeight:"700"},children:" Declare Winner(s)"})]})]})}),Qn==="unsavedChanges"&&o.jsx(lC,{currentWeek:ve[c].name,onDiscard:()=>{u(Ki),eo(Ki),Qe(null)},onSaveAndSwitch:async()=>{await Qd(new Event("submit")),setTimeout(()=>{u(Ki),eo(Ki),Qe(null),Xl(null)},100)},onCancel:()=>{Xl(null),Qe(null)}}),Qn==="discardChanges"&&o.jsx(aC,{onKeepEditing:()=>Qe(null),onDiscard:()=>{d({...ta}),yt(!1),Qe(null)}}),Qn==="incomplete"&&o.jsx(cC,{missingGames:Ad,totalGames:Ee.games.length,onClose:()=>Qe(null)}),Qn==="invalidScores"&&o.jsx(uC,{invalidScores:qy,onClose:()=>Qe(null)}),Qn==="success"&&o.jsx(dC,{weekName:Ee.name,deadline:Ee.deadline,onClose:()=>Qe(null)}),Qn==="noChanges"&&o.jsx(fC,{onClose:()=>Qe(null)}),Qn==="tiedGames"&&o.jsx(hC,{tiedGames:Ad,gameData:Ee.games,onClose:()=>Qe(null)})]})]})]}),o.jsxs("footer",{children:[o.jsx("p",{children:"Richard's NFL Playoff Pool 2025 | Good luck! "}),o.jsx("p",{style:{fontSize:"0.85rem",marginTop:"5px"},children:"Questions? Contact: gammoneer2b@gmail.com"})]})]})}Va.createRoot(document.getElementById("root")).render(o.jsx(Ga.StrictMode,{children:o.jsx(TC,{})}));
